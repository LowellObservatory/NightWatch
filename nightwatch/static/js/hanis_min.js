var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,aa,W){l!=Array.prototype&&l!=Object.prototype&&(l[aa]=W.value)};$jscomp.getGlobal=function(l){return"undefined"!=typeof window&&window===l?l:"undefined"!=typeof global&&null!=global?global:l};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var l=0;return function(aa){return $jscomp.SYMBOL_PREFIX+(aa||"")+l++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.iterator;l||(l=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[l]&&$jscomp.defineProperty(Array.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(l){var aa=0;return $jscomp.iteratorPrototype(function(){return aa<l.length?{done:!1,value:l[aa++]}:{done:!0}})};$jscomp.iteratorPrototype=function(l){$jscomp.initSymbolIterator();l={next:l};l[$jscomp.global.Symbol.iterator]=function(){return this};return l};
$jscomp.iteratorFromArray=function(l,aa){$jscomp.initSymbolIterator();l instanceof String&&(l+="");var W=0,Q={next:function(){if(W<l.length){var yb=W++;return{value:aa(yb,l[yb]),done:!1}}Q.next=function(){return{done:!0,value:void 0}};return Q.next()}};Q[Symbol.iterator]=function(){return Q};return Q};
$jscomp.polyfill=function(l,aa,W,Q){if(aa){W=$jscomp.global;l=l.split(".");for(Q=0;Q<l.length-1;Q++){var yb=l[Q];yb in W||(W[yb]={});W=W[yb]}l=l[l.length-1];Q=W[l];aa=aa(Q);aa!=Q&&null!=aa&&$jscomp.defineProperty(W,l,{configurable:!0,writable:!0,value:aa})}};
$jscomp.polyfill("Array.prototype.fill",function(l){return l?l:function(l,W,Q){var aa=this.length||0;0>W&&(W=Math.max(0,aa+W));if(null==Q||Q>aa)Q=aa;Q=Number(Q);0>Q&&(Q=Math.max(0,aa+Q));for(W=Number(W||0);W<Q;W++)this[W]=l;return this}},"es6","es3");
function PEvs(l,aa,W,Q,yb,cg,Ve){var Ha,hc,Ra,wd,We,xd,Ia,ic,da,ge,Ja,Kb=0,zc=0,ad,db=!1,jc=!1,zb=0,Sa=0,Lb=0,Mb=0,Ac=function(m){Ia=m.target;for(da=ic=0;Ia;)ic+=Ia.offsetLeft-Ia.scrollLeft,da+=Ia.offsetTop-Ia.scrollTop,Ia=Ia.offsetParent;Kb=m.pageX-ic-document.body.scrollLeft;zc=m.pageY-da-document.body.scrollTop};this.getX=function(){return Kb};this.getY=function(){return zc};var Ka=function(m){m.preventDefault();m.stopImmediatePropagation?m.stopImmediatePropagation():m.stopPropagation()},yd=function(m){Ac(m);
ad=Kb;eb=zc;K=!0;null!=mb&&(wd=(new Date).getTime());null!=he&&he(m)},X=function(m){K&&(Ac(m),K=!1,null!=ua&&ua(m),null!=mb&&(We=(new Date).getTime(),xd=We-wd,300>xd&&mb(m)))},zd=function(m){Ac(m);3>Math.abs(Kb-ad)&&3>Math.abs(zc-eb)||(eb=ad=-9999,K?null!=fb&&fb(m):null!=ja&&ja(m),null!=Ta&&L())};this.touchDown=function(m){Ra=!0;if(1<m.targetTouches.length)return db=!0,Ja&&(Sa=-1,Ka(m)),!1;Ha=m.changedTouches;hc=Ha[0];yd(hc)};this.touchUp=function(m){0==m.targetTouches.length&&(db=Ra=!1);Ka(m);if(db||
jc)return db||(jc=!1),!1;Ha=m.changedTouches;hc=Ha[0];X(hc)};this.touchMove=function(m){Ra=!0;Ka(m);if(db)return Ja&&(Ha=m.targetTouches,jc=!0,Lb=Ha[0].pageX-Ha[1].pageX,Mb=Ha[0].pageY-Ha[1].pageY,zb=Lb*Lb+Mb*Mb,Ja&&0<Sa&&0!=zb-Sa&&Ja(0<zb-Sa?1:-1),Sa=zb),!1;Ha=m.changedTouches;hc=Ha[0];zd(hc)};this.pointUp=function(m){Ka(m);for(var l=0;l<za.length;l++)if(za[l].pointerId==m.pointerId){za.splice(l,1);break}0==za.length&&(Ra=db=!1);if(db||jc)return db||(jc=!1),!1;X(m);return!1};this.pointDown=function(m){Ka(m);
za.push(m);Sa=-1;Ra=!0;1<za.length?db=!0:yd(m);return!1};this.pointMove=function(m){Ka(m);for(var l=0;l<za.length;l++)za[l].pointerId==m.pointerId&&(za[l]=m);if(db||!jc){if(db)return Ja&&(jc=!0,Lb=za[0].pageX-za[1].pageX,Mb=za[0].pageY-za[1].pageY,zb=Lb*Lb+Mb*Mb,Ja&&0<Sa&&3<Math.abs(zb-Sa)&&Ja(0<zb-Sa?1:-1),Sa=zb),!1;zd(m);return!1}};this.mouseDown=function(m){Ra||(Ka(m),yd(m))};this.clearDown=function(){K=!1};this.mouseUp=function(m){Ra||(Ka(m),X(m))};this.useWheel=function(m){l.addEventListener("wheel",
this.mouseWheel,!0);Ja=m};this.mouseWheel=function(m){Ac(m);var l=Math.max(-1,Math.min(1,-m.deltaY||-m.detail));Ka(m);Ja&&Ja(l)};this.mouseClick=function(m){Ka(m);K=!1};this.mouseMove=function(m){Ra||(Ka(m),zd(m))};this.mouseDragged=function(m){Ra||(Ka(m),Ac(m),null!=fb&&fb(m),null!=Ta&&L())};var L=function(){clearTimeout(ge);ge=setTimeout(function(){Ta()},600)};var eb=ad=zc=Kb=0;var he=aa;var ua=W;var ja=Q;var fb=yb;var mb=cg;var Ta=Ve;var K=Ra=!1;var za=[];l.addEventListener("mousedown",this.mouseDown,
!1);l.addEventListener("mouseup",this.mouseUp,!1);l.addEventListener("mousemove",this.mouseMove,!1);l.addEventListener("click",this.mouseClick,!1);window.PointerEvent?(l.addEventListener("pointerdown",this.pointDown,!1),l.addEventListener("pointerup",this.pointUp,!1),l.addEventListener("pointermove",this.pointMove,!1),l.addEventListener("pointerleave",this.pointUp,!1),l.addEventListener("pointercancel",this.pointUp,!1)):(l.addEventListener("touchstart",this.touchDown,!1),l.addEventListener("touchend",
this.touchUp,!1),l.addEventListener("touchmove",this.touchMove,!1),l.addEventListener("touchleave",this.touchUp,!1),l.addEventListener("touchcancel",this.touchUp,!1));l.addEventListener("contextmenu",function(m){m.preventDefault()},!1);l.style["touch-action"]="none";l.addEventListener("mouseout",function(m){K||(zc=Kb=-1,null!=ja&&ja(m));K=!1})};var HAniS=new function(){function l(b){var a,d;bd=!0;if(b instanceof Array)for(e={},a=0;a<b.length;a++){if(!(2>b[a].length)){var c=b[a].trim();if(0!=c.indexOf("#")){var h=c.indexOf("=");if(!(1>h)){var f=c.substr(0,h).trim().toLowerCase();e[f]=c.substr(h+1).trim()}}}}else e=b;ie=!1;a=e.debug;null!=a&&("true"==a?(Xe=window.open("","HAniSDebugInfo","scrollbars=yes,width=400,height=200"),ie=!0,ea("HAniS Version 4.24")):ie=!1);gb=!0;a=e.set_className;null!=a&&D(a,"f")&&(gb=!1);ea("Is type of param an array = "+
(b instanceof Array));a=e.divalign;null!=a&&(Ad=a.trim(),y.align=Ad);a=e.prevent_shortcuts;null!=a&&D(a,"t")&&(je=!0);a=e.initial_message;null!=a&&(b=e.initial_message_style,null==b&&(b="background-color:red;top:10px;left:10px;height:100px;width:200px"),b="z-index:99;position:absolute;"+b,kc=p("div"),kc.setAttribute("style",b),kc.innerHTML=a,kc.addEventListener("click",function(){kc.style.visibility="hidden"},!1),kc.style.visibility="visible",Ua.appendChild(kc),b=e.initial_message_timeout,null!=b&&
("auto"==b?Ye=!0:(Ye=!1,b=parseInt(e.initial_message_timeout,10),2>b&&(b=2),setTimeout(function(){kc.style.visibility="hidden"},1E3*b))));a=e.coordinates;null!=a&&yb(a);c="green";h="white";f="12px Arial";var n=null,k=d=10,g=10;Ze=2;dg="Lat = ";eg=" Lon = ";a=e.coordinates_display_style;null!=a&&(b=a.split(","),c=b[0].trim(),h=b[1].trim(),f=b[2].trim(),3<b.length&&(dg=b[3],eg=b[4],Ze=parseInt(b[5],10),6<b.length&&(n=b[6].trim(),d=parseInt(b[7],10),k=parseInt(b[8],10),g=parseInt(b[9],10))));fg=new mb(c,
h,f,n,d,k,g);ke=Bc=null;null!=e.map_scale&&(le=lc=!0,b=e.map_scale.split(","),Bc=parseFloat(b[0]),ke=1<b.length?parseFloat(b[1]):Bc);gg=" ";a=e.distance_unit;null!=a&&(gg=a.trim());a=e.divcan_style;null!=a&&a.trim();$e="default";a=e.distance_cursor;null!=a&&($e=a.trim());me="default";a=e.location_cursor;null!=a&&(me=a.trim());ne="default";a=e.probe_cursor;null!=a&&(ne=a.trim());af="default";a=e.mark_cursor;null!=a&&(af=a.trim());a=e.imagecan_style;null!=a&&(b=a.trim()+";position:absolute;top:0;left:0;",
nb.setAttribute("style",b+"z-index:1;"),mc.setAttribute("style",b+"z-index:6;"));c="blue";h="white";f="12px Arial";n=null;g=k=d=10;hg=1;ig="white";a=e.distance_display_style;null!=a&&(b=a.split(","),c=b[0].trim(),h=b[1].trim(),ig=5<=b.length?b[4].trim():h,f=b[2].trim(),hg=parseInt(b[3],10),5<b.length&&(n=b[5].trim(),d=parseInt(b[6],10),k=parseInt(b[7],10),g=parseInt(b[8],10)));Kh=new mb(c,h,f,n,d,k,g);c="black";h="white";f="12px Arial";n=null;g=k=d=10;a=e.probe_display_style;null!=a&&(b=a.split(","),
c=b[0].trim(),h=b[1].trim(),f=b[2].trim(),3<b.length&&(n=b[3].trim(),d=parseInt(b[4],10),k=parseInt(b[5],10),g=parseInt(b[6],10)));Lh=new mb(c,h,f,n,d,k,g);jg="Undefined";kg=!1;Bd=0;a=e.probe_undefined;null!=a&&(b=a.split(","),jg=b[0].trim(),1<b.length&&(Bd=parseInt(b[1],10)+1),2<b.length&&(kg=!0));bf=!1;e.probe_base_image&&(bf=!0);a=e.active_probe;null!=a&&(Nb=!0);a=e.pause;null!=a&&(lg=parseInt(a,10));a=e.auto_refresh;null!=a&&(cf=6E4*parseInt(a,10),Cc=setInterval("HAniS.reloadFOF();",cf),Cd=!0);
Dd=!1;a=e.enable_smoothing;null!=a&&D(a,"t")&&(Dd=!0);oe=!0;a=e.check_image_size;null!=a&&D(a,"f")&&(oe=!1);mg=!1;a=e.sprites;if(null!=a){b=a.split(",");df=new Image;ef=[];ff=[];Ob=[];Pb=[];if("row"==b[1].trim().toLowerCase())for(k=h=c=0,a=2;a<b.length;)for("row"==b[a].trim().toLowerCase()&&(c=0,h+=k,k=0,a+=1),d=parseInt(b[a],10),a+=1,f=parseInt(b[a],10),a+=1,n=parseInt(b[a],10),n>k&&(k=n),a+=1,g=0;g<d;g++)ef.push(c),ff.push(h),Ob.push(f),Pb.push(n),c+=f;else for(h=!1,a=1;a<b.length;)ef.push(parseInt(b[a],
10)),a+=1,ff.push(parseInt(b[a],10)),a+=1,a>=b.length?(c=0,h=!0):c=parseInt(b[a],10),0>c?(h=!0,Ob.push(Math.abs(c)),a+=1,c=parseInt(b[a++],10),Pb.push(Math.abs(c))):h?(Ob.push(Ob[Ob.length-1]),Pb.push(Pb[Pb.length-1])):(Ob.push(parseInt(b[a],10)),a+=1,Pb.push(parseInt(b[a],10)),a+=1);df.onload=function(){mg=!0};df.src=b[0]}a=e.overlay_labels;null!=a&&(Qb=a.split(","));gf=null;a=e.auto_enhance_background;null!=a&&(gf=parseInt(a,10)-1);Dc=null;a=e.auto_enhance;if(null!=a)for(c=e.overlay_probe_table,
b=a.split(","),Dc=Array(b.length),a=0;a<b.length;a++)"x"==b[a].trim().toLowerCase()?Dc[a]=-1:Dc[a]=parseInt(b[a].trim(),10)-1,null==c&&(nc[a]=Dc[a]);Ec=!1;ob=-1;a=e.overlay_enhance;null!=a&&(Ec=!0,ob=parseInt(a,10)-1);oc=null;cd=!0;a=e.overlay_allow_hoverzones;if(null!=a)for(b=a.split(","),oc=Array(b.length),a=0;a<b.length;a++)if(oc[a]=!0,D(b[a],"n")||D(b[a],"f"))oc[a]=!1;R=V=null;hf=ng=!1;a=e.window_size;null!=a&&(b=a.split(","),"div"==b[0]?hf=!0:(R=parseInt(b[0],10),V=parseInt(b[1],10)),ng=!0);
Ed=[];a=e.use_for_all_frames;if(null!=a)for(b=a.split(","),a=0;a<b.length;a+=2)Ed[parseInt(b[a],10)]=parseInt(b[a+1],10)-1;Fd=-1;a=e.skip_missing;null!=a&&(Fd=parseInt(a,10));og="#00000000";a=e.skip_missing_color;null!=a&&(og=a);pe=null;a=e.overlay_spacer;if(null!=a)for(b=a.split(","),pe=Array(b.length),a=0;a<b.length;a++)pe[a]=parseInt(b[a],10);a=e.overlay_probe_table;if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)"x"==b[a].trim().toLowerCase()?nc[a]=-1:nc[a]=parseInt(b[a],10)-1;jf=[];a=e.overlay_ontop;
if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)jf[parseInt(b[a],10)-1]=!0;Fc=null;a=e.overlay_order;null==a&&(a=e.overlay_zorder);if(null!=a)for(b=a.split(","),Fc=Array(b.length),a=0;a<b.length;a++)Fc[parseInt(b[a],10)-1]=a;Rb=null;a=e.overlay_links;if(null!=a)for(b=a.split(","),Rb=Array(b.length),a=0;a<b.length;a++)Rb[a]=parseInt(b[a],10);pg=[];J=null;a=e.overlay_slice;if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)pg[parseInt(b[a],10)-1]=!0;qg=!0;a=e.slice_smoothing;D(a,"f")&&(qg=!1);dd=null;
a=e.overlay_clear;if(null!=a)for(b=a.split(","),dd=Array(b.length),a=0;a<b.length;a++)dd[a]=b[a].trim().toLowerCase();rg=!1;a=e.transparency;null!=a&&(b=a.split(","),1==b.length?sg=tg=ug=parseInt(b[0],10):(sg=parseInt(b[0],10),tg=parseInt(b[1],10),ug=parseInt(b[2],10)),rg=!0);kf=!1;a=e.transparency_list;if(null!=a){b=a.split(",");vg=[];for(a=0;a<b.length;a++)vg[parseInt(b[a].trim(),10)-1]=!0;kf=!0}qe=null;a=e.overlay_transparent_amount;if(null!=a)for(b=a.split(","),qe=Array(b.length),a=0;a<b.length;a++)qe[a]=
parseFloat(b[a])/100;Gc=null;a=e.overlay_zoom;if(null!=Qb&&null!=a)for(b=a.split(","),Gc=Array(b.length),a=0;a<b.length;a++)if(Gc[a]=1,D(b[a],"n")||D(b[a],"f"))Gc[a]=0;else if(D(b[a],"d")||D(b[a],"h"))Gc[a]=-1;pb=null;wg=[];a=e.overlay_preserve_list;if(null!=Qb&&null!=a)for(b=a.split(","),pb=Array(b.length),a=0;a<b.length;a++){pb[a]=!0;if(D(b[a],"n")||D(b[a],"f"))pb[a]=!1;if(D(b[a],"a")||D(b[a],"A"))wg[a]=!0}Y=null;if(null!=Qb&&null!=pb)for(b=e.overlay_preserve.replace(/&/g,",&,").split(","),c=e.overlay_preserve_position,
null!=c&&(c=c.split(",")),h=0,Y=Array(pb.length),a=f=0;a<pb.length;a++)if(pb[a]){Y[a]=[];n=0;do{Y[a][n]=[];for(d=0;4>d;d++)Y[a][n][d]=parseInt(b[f].trim(),10),f+=1;Y[a][n][2]=Y[a][n][2]-Y[a][n][0]+1;Y[a][n][3]=Y[a][n][3]-Y[a][n][1]+1;null!=c?(Y[a][n][4]=parseInt(c[h],10),Y[a][n][5]=parseInt(c[h+1],10),h+=2):(Y[a][n][4]=Y[a][n][0],Y[a][n][5]=Y[a][n][1]);f<b.length&&"&"==b[f].trim()?(f+=1,n+=1,d=!0):d=!1}while(d)}re=0;xg=" ";pc="white";Gd="transparent";Hd="14pt arial";yg=!1;a=e.times_label_style;null!=
a&&(b=a.split(","),pc=b[0].trim(),1<b.length&&(re=Math.floor(60*parseFloat(b[1]))),1<b.length&&(re="?"==b[1].trim()||"auto"==b[1].trim().toLowerCase()?-Math.floor((new Date).getTimezoneOffset()):Math.floor(60*parseFloat(b[1]))),2<b.length&&(xg=b[2].trim()),3<b.length&&(Gd=b[3].trim()),4<b.length&&(Hd=b[4].trim()),5<b.length&&-1!=b[5].trim().indexOf("t")&&(yg=!0));0==pc.indexOf("0x")&&(pc="#"+pc.substring(2));0==Gd.indexOf("0x")&&(Gd="#"+Gd.substring(2));ed=parseInt(Hd,10);Mh=new mb("black","white",
Hd,"black",20,5,5);zg=!1;a=e.to_from_lock;null!=a&&(zg=D(a,"t")?!0:!1);a="black";d="white";k="14px arial";c=null;n=f=h=10;Ag=Bg=" ";lf=fd=null;a=e.dirspd_display_style;null!=a&&(b=a.split(","),a=b[0].trim(),d=b[1].trim(),k=b[2].trim(),Ag=b[3],Bg=b[4],5<b.length&&(c=b[5].trim(),h=parseInt(b[6],10),f=parseInt(b[7],10),n=parseInt(b[8],10)),lf=new mb(a,d,k,c,h,f,n));c="black";h="white";f="14px arial";n=null;g=k=d=10;a=e.tipbox_display_style;null!=a&&(b=a.split(","),c=b[0].trim(),h=b[1].trim(),f=b[2].trim(),
3<b.length&&(n=b[3].trim(),d=parseInt(b[4],10),k=parseInt(b[5],10),g=parseInt(b[6],10)));Cg=new mb(c,h,f,n,d,k,g);gd=null;ba=e.image_base;null!=ba?gd=ba=ba.trim():ba=null!=e.image_only_base?e.image_only_base.trim():null;Dg=ba;a=e.overlay_base;null!=a&&(Sb=a.trim());se=!0;a=e.zip_only;null!=a&&D(a,"f")&&(se=!1);Hc=!1;a=e.zip_filename;null!=a&&(Hc=!0,mf=a.trim());bd=!0;a=e.filenames;null==a&&(a=e.background_filenames);null!=a&&Nh(a);a=e.basename;null!=a&&(c=e.base_starting_number,h=0,f=1,null!=c&&(b=
c.split(","),h=parseInt(b[0],10),1<b.length&&(f=parseInt(b[1],10))),u=e.num_frames,null==u&&(u=e.num_images),u=parseInt(u,10),Oh(a,h,f));nf=!0;b=e.zip_static;null!=b&&(D(b,"f")||D(b,"n"))&&(nf=!1);of=!0;b=e.background_static;null!=b&&(D(b,"f")||D(b,"n"))&&(of=!1);a=e.overlay_filenames;null!=a&&Ph(a);Aa=null;a=e.image_preserve;if(null!=a)for(b=a.split(","),Aa=[],a=0;a<b.length;a++)Aa[a]=parseInt(b[a].trim(),10),1<a%4&&(Aa[a]=Aa[a]-Aa[a-2]+1);Eg=!0;a=e.keep_zoom;null!=a&&D(a,"f")&&(Eg=!1);Id=Fg=0;Gg=
!1;a=e.hide_bottom;null!=a&&(b=a.split(","),Fg=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Gg=!0));Jd=Hg=0;Ig=!1;a=e.hide_top;null!=a&&(b=a.split(","),Hg=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Ig=!0));Kd=Jg=0;Kg=!1;a=e.hide_left;null!=a&&(b=a.split(","),Jg=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Kg=!0));Ld=Lg=0;Mg=!1;a=e.hide_right;null!=a&&(b=a.split(","),Lg=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Mg=!0));Ng=!1;a=e.hide_background;null!=a&&D(a,"t")&&(Ng=!0);
Og="<div>";Pg=300;Qg=500;a=e.popup_style;null!=a&&(Og='<div style="'+a+'">');a=e.popup_window_size;null!=a&&(b=a.split(","),Qg=b[0],Pg=b[1]);Rg=!1;a=e.wheel_frames;null!=a&&(Rg=!0,ka.useWheel(HAniS.wheel));Sg=ta=!1;a=e.active_zoom;null!=a&&D(a,"t")&&(null==va&&(ta=!0),ka.useWheel(HAniS.wheel));pf=!1;a=e.cycle_zoom;null!=a&&D(a,"t")&&(pf=!0);a=e.initial_zoom;null!=a&&(b=a.split(","),qc="auto"!=b[0].toLowerCase()?parseFloat(b[0]):"auto",1<b.length?(Md=parseInt(b[1],10),Tg=parseInt(b[2],10)):Md=-1,Ug=
!0);hd=1;id=!1;la=null;a=e.zoom_scale;if(null!=a)if(b=a.split(","),1===b.length)D(a,"hi_res")?(id=!0,hd=0):hd=parseFloat(a);else{la=Array(b.length);for(a=0;a<b.length;a++)la[a]=parseFloat(b[a]);id=!0}Ic=9999999;a=e.maximum_zoom;null!=a&&(Ic=parseFloat(a));te=!0;a=e.use_progress_bar;null!=a&&D(a,"f")&&(te=!1);a=e.dwell;null!=a&&(b=a.split(","),hb=parseInt(b[0].trim(),10),1<b.length&&(Tb=parseInt(b[1].trim(),10),10>Tb&&(Tb=10),Jc=parseInt(b[2].trim(),10),qf=parseInt(b[3].trim(),10)));a=e.rate;null!=
a&&(b=a.split(","),hb=Math.round(1E4/parseFloat(b[0].trim())),1<b.length&&(Tb=Math.round(1E4/parseFloat(b[2].trim())),10>Tb&&(Tb=10),Jc=Math.round(1E4/parseFloat(b[1].trim()))));a=e.frame_times_template;null!=a&&(b=a.split(","));qb=null;a=e.times;if(null!=a){b=a.split(",");qb=Array(b.length);for(a=0;a<b.length;a++)qb[a]=parseInt(b[a].trim(),10);Ha(qb)}a=e.extrap_times_filename;if(null!=a){qb=[];var m=new XMLHttpRequest;m.open("get",a,!0);m.onload=function(){for(var a=m.responseText.split("\n"),b=
0;b<a.length;b++){var c=a[b].split(" ");if(3==c.length){c[2].trim();var d=parseInt(c[0],10)-1;qb[d]=100*parseInt(c[2].substring(0,2),10)+parseInt(c[2].substring(3,5),10)+parseInt(c[2].substring(6,8),10)/30}}Ha(qb)};m.send()}Nd=null;a=e.extrap_times_template;null!=a&&(Nd=RegExp(a));Vg=["Click on target's initial position","Click on target's final position","Move pointer around or click here to select target"];Wg=10;a=e.extrap_prompts_position;null!=a&&D(a,"bot")&&(Wg=9999);a=e.extrap_prompts;null!=
a&&(Vg=a.split(","));ue=["Click on first point to mark","Save points","Remove last point"];a=e.mark_prompts;null!=a&&(ue=a.split(","));ve=!0;a=e.mark_close;null!=a&&D(a,"f")&&(ve=!1);rf="12pt Arial";Xg="white";a=e.mark_prompts_style;null!=a&&(b=a.split(","),rf=b[0].trim(),1<b.length&&(Xg=b[1].trim()));Yg=e.controls;ea("controls = "+e.controls);ea("bottom_controls = "+e.bottom_controls);Kc=we=Ub=Vb=rb=sb=Ab=null;null!=Yg&&ge(Yg,!0);Zg=e.bottom_controls;null!=Zg&&ge(Zg,!1);Lc=!1;a=e.probe_table;null!=
a&&Q(a);b=e.enhance_filename;null==b&&(b=e.enhance_table);if(null!=b){ea("Reading enhancement table...");Lc=!1;m=new XMLHttpRequest;tb=[];Mc=[];xe=[];Nc=[];Wb=[];var $g,Ba,z;Va=[];Wa=[];Xa=[];Od=[];w=-1;ah=!0;var l=!1,t,v,x,sf,r,q,A,tf,B,E,F,G,I;m.onload=function(){for(var a=this.responseText.split("\n"),b=0;b<a.length;b++)if(!(2>a[b].length)){var c=a[b].replace(/\s+/g," ").trim(),d=c.indexOf("#");if(0!=d)if(0<d&&(c=c.substring(0,d)),d=c.split(","),0==d[0].indexOf("*"))w++,tb[w]=Array(256),Nc[w]=
Array(256),Mc[w]=Array(256),Wb[w]=Array(256),Va[w]=Array(256),Wa[w]=Array(256),Xa[w]=Array(256),Od[w]=Array(256),tb[w]=Array(256),xe[w]=1<d.length?d[1].trim():"None",$g=" ",Ba="Value =",z=1,c=p("option"),c.innerHTML=d[0].substring(1),c.value=w,null!=wa&&wa.add(c);else{var h=c.indexOf("value");0>h&&(h=c.indexOf("probe"));l=!1;E=F=0;0<h&&(d=c.substring(h+1),c=c.substring(0,h),h=d.indexOf("="),d=d.substring(h+1),d=d.split(","),1==d.length?(Ba=d[0].trim(),z=-1,l=!1):(E=parseFloat(d[0].trim()),F=parseFloat(d[1].trim()),
2<d.length&&(z=parseInt(d[2],10)),3<d.length&&($g=Qh(d[3].trim())),4<d.length&&(Ba=d[4].trim()),l=!0));c=c.split(" ");t=parseInt(c[0].trim(),10);v=parseInt(c[1].trim(),10);x=v-t;sf=parseFloat(c[2].trim());r=parseFloat(c[3].trim());q=parseFloat(c[4].trim());A=parseFloat(c[5].trim());tf=parseFloat(c[6].trim());B=parseFloat(c[7].trim());G=I=255;9<c.length&&(G=parseFloat(c[8].trim()),I=parseFloat(c[9].trim()));for(c=t;c<=v;c++)0===x?(Va[w][t]=sf,Wa[w][t]=q,Xa[w][t]=tf,Od[w][t]=G):(Va[w][c]=Math.round(sf+
(r-sf)*(c-t)/x),Wa[w][c]=Math.round(q+(A-q)*(c-t)/x),Xa[w][c]=Math.round(tf+(B-tf)*(c-t)/x),Od[w][c]=Math.round(G+(I-G)*(c-t)/x)),Nc[w][c]=Ba,Mc[w][c]=$g,Wb[w][c]=z,l&&(tb[w][c]=E+(F-E)*(c-t)/x)}}-1!=ob&&C[ob].checked&&(wa.disabled=!1);Lc=!0;aa()};m.open("get",b,!0);m.send()}else aa()}function aa(){var b=e.sprite_filenames;if(null!=b){var a=b.split(",");uf=0;ha=[];b=e.sprite_images_offset;Oc=-1;null!=b&&(Oc=parseInt(b,10)-1);for(b=0;b<a.length;b++){ha[b]=new Image;ha[b].gotit=!1;ha[b].inx=b;ha[b].fromfile=
!0;var d="/";0<a[b].indexOf("?")&&(d="?");ha[b].zoomme=0<a[b].indexOf(d+"zoom");ha[b].anim=0<a[b].indexOf(d+"animate");d=a[b].indexOf(d);0<d&&(a[b]=a[b].substring(0,d));ha[b].onload=function(){ha[this.inx].gotit=!0;uf++;uf==a.length&&W()};ha[b].src=a[b].trim()}}else W()}function W(){for(var b=Object.keys(e),a=0;a<b.length;a++)D(b[a],"hotspot")&&Kb("hotspot="+e[b[a]]);bd?HAniS.getFOF():(rc=!0,Ia())}function Q(b){var a=new XMLHttpRequest;tb=[];xe=[];Mc=[];var d=" ";Nc=[];var c="Value=";Wb=[];var h=
1;Pc=[];vf=[];Va=[];Wa=[];Xa=[];var e,n=-1;w=-1;var k=0;a.onload=function(){for(var a=this.responseText.split("\n"),b=0;b<a.length;b++)if(!(2>a[b].length)){var f=a[b].replace(/\s+/g," ").trim().split(","),g=f[0].split(" ");if(0==g[0].indexOf("*"))w++,tb[w]=[],Nc[w]=[],Mc[w]=[],Wb[w]=[],Va[w]=[],Wa[w]=[],Xa[w]=[],vf[w]=[],Pc[w]=[],n=-1,xe[w]=1<f.length?f[1].trim():"None",k=1;else if(0!=k){n++;var m=Array(3);tb[w][n]=parseFloat(g[0]);Va[w][n]=parseInt(g[1].trim(),10);Wa[w][n]=parseInt(g[2].trim(),10);
Xa[w][n]=parseInt(g[3].trim(),10);0!=n&&(m[0]=Va[w][n]-Va[w][n-1],m[1]=Wa[w][n]-Wa[w][n-1],m[2]=Xa[w][n]-Xa[w][n-1],e=0,Math.abs(m[1])>Math.abs(m[e])&&(e=1),Math.abs(m[2])>Math.abs(m[e])&&(e=2),vf[w][n-1]=e,Pc[w][n-1]=m,0==Pc[w][n-1][e]&&(Pc[w][n-1][e]=1));1<f.length&&(0==f[1].trim().indexOf('"')?(h=-1,f=f[1].trim(),c=f.substr(1,f.length-2),d=""):(h=parseInt(f[1],10),2<f.length&&(d=Qh(f[2].trim())),3<f.length&&(c=f[3].trim())));Nc[w][n]=c;Wb[w][n]=h;Mc[w][n]=d}}Lc=!0};a.open("get",b,!0);a.send()}
function yb(b){b=b.split(",");var a=b[0].trim();"PS"===a?(Xb=new ii,Xb.init(b)):"CE"==a?(Xb=new ji,Xb.init(b)):"LCC"==a?(Xb=new ki,Xb.init(b)):(Xb=null,wf=parseFloat(b[0]),bh=parseFloat(b[1]),Rh=parseFloat(b[2]),Sh=parseFloat(b[3]))}function cg(b){var a=new XMLHttpRequest;a.onload=function(){l(this.responseText.split("\n"))};a.open("get",b+"?"+Math.round(1E5*Math.random()),!0);a.send()}function Ve(b){var a;if(null!=dd){for(a=0;a<dd.length;a++)-1!=dd[a].indexOf(b)&&(C[a].checked=!1);for(a=0;a<dd.length;a++)Ja(a)}}
function Ha(b){xf=Array(b.length);for(var a=0;a<b.length;a++){var d=60*Math.floor(b[a]/100)+Math.floor(b[a])%100;0===a&&(Yb=d);var c=d-Yb;0>c&&(c=d+1440-Yb);xf[a]=c;ea("times s="+d+"  min="+xf[a])}Yb+=re;1440<=Yb&&(Yb-=1440);0>Yb&&(Yb+=1440);ea("Starting minute = "+Yb)}function hc(b,a){if(0!=b)for(var d=0;d<b;d++)0==C[Ca[d].overlay].isGhost&&(C[Ca[d].overlay].parentNode.style.visibility=a)}function Ra(){0!=ub?hc(ub,"visible"):0!=ch&&hc(ch,"hidden");rc=!0;Ia()}function wd(b,a){jd||(nb.height=a,nb.width=
b,mc.height=a,mc.width=b,Pd.height=a,Pd.width=b,ye.height=a,ye.width=b,Qd=ye.getContext("2d"),R=b,V=a,ze=R/2-100,Ae=V/2-10,r=1*ma/R,q=1*fa/V,dh&&(dh=!1,null!=eh&&eh()),Ua.style.height=V+"px",Ua.style.width=R+"px",sc.style.height=V+"px",sc.style.width=R+"px",kd.style.height=V+"px",kd.style.width=R+"px",he(u,!1))}function We(){for(var b=0,a={},d=0;d<u;a={ii:a.ii},d++){a.ii=d;var c=null==ba?ra[d]:ra[d].substring(ra[d].lastIndexOf("/")+1);(c=fh.file(c))?c.async("arraybuffer").then(function(a){return function(c){c=
new Blob([c]);tc[a.ii]=URL.createObjectURL(c);b++;b>=u&&xd()}}(a),function(a){return function(){tc[a.ii]=null;b++;b>=u&&xd()}}(a)):(tc[a.ii]=null,b++,b>=u&&xd())}}function xd(){var b=0;if(0==Z)ic();else for(var a=0;a<u;a++){uc[a]=[];for(var d={},c=0;c<Z;d={ii:d.ii,jj:d.jj},c++){d.ii=a;d.jj=c;var h=null==Sb&&null==ba?ca[a][c]:ca[a][c].substring(ca[a][c].lastIndexOf("/")+1);(h=fh.file(h))?h.async("arraybuffer").then(function(a){return function(c){c=new Blob([c]);uc[a.ii][a.jj]=URL.createObjectURL(c);
b++;b>=u*Z&&ic()}}(d),function(a){return function(){uc[a.ii][a.jj]=null;b++;b>=u*Z&&ic()}}(d)):(uc[a][c]=null,b++,b>=u*Z&&ic())}}}function Ia(){if(Hc){var b=new XMLHttpRequest,a=null==gd?mf:gd+mf;nf||(a=a+"?"+Math.round(1E5*Math.random()));b.open("GET",a,!0);b.responseType="arraybuffer";tc=[];uc=[];b.addEventListener("progress",function(a){a.lengthComputable&&Jh("Loading ZIP file",a.total,a.loaded)});b.onload=function(a){(new JSZip).loadAsync(this.response).then(function(a){fh=a;We()},function(){ea("Unable to read ZIP file: "+
mf)})};b.send()}else ic()}function ic(){var b,a,d;void 0!=Be&&Be(!1);var c="?"+Math.round(1E4*Math.random()),h=[];h[0]=vc;for(b=1;b<u;b++)h[b]=b<=vc?b-1:b;Da=Array(u);Bb=Ea=0;gh=te;yf&&(ib.max=u);jd&&(ld||Ec)&&(Zb=[],La=[],Qc=[],zf=[],Ce=[]);null!=wa&&(wa.selectedIndex=0);for(var e=0;e<u;e++){b=h[e];jd&&(ld||Ec)&&(Zb[b]=p("canvas"),La[b]=p("canvas"));Da[b]=new Image;Da[b].gotit=!1;Da[b].frameNum=b;Da[b].onerror=function(){Ea++};Da[b].onload=function(){jd&&(fa=this.height,ma=this.width,Ya=fa,Za=ma,
jd=!1,ng?hf?HAniS.setWindowSize(y.offsetWidth,y.offsetHeight):wd(R,V):wd(ma,fa),Ug&&("auto"==qc&&(qc=(r+q)/2,Md=-1),Ya/=qc,Za/=qc,0>Md&&(Md=ma/2,Tg=fa/2),O=Math.round(Md-ma/2/qc),N=Math.round(Tg-fa/2/qc),E=F=qc,1!=qc&&(ta=!1,HAniS.toggleZooming())));Hc&&null!=tc[this.frameNum]&&URL.revokeObjectURL(tc[this.frameNum]);if(0<De&&!md){Af.height=fa;Af.width=ma;Rd=Af.getContext("2d");Rd.clearRect(0,0,R,V);for(var b=0;b<Ma.length;b++){for(var e=Ma[b].ctx.getImageData(0,0,Ma[b].width,Ma[b].height).data,n=
Rd.getImageData(Ma[b].xmin,Ma[b].ymin,Ma[b].width,Ma[b].height),f=3;f<e.length;f+=4)0!=e[f]&&(n.data[f]=b+1);Rd.putImageData(n,Ma[b].xmin,Ma[b].ymin)}ta||(jb=!0);E==Ee&&(jb=!0);md=!0}if(rc){rc=!1;G=nb.getContext("2d");G.imageSmoothingEnabled=Dd;G.fillStyle="blue";G.font="bold 20px Arial";g=mc.getContext("2d");g.imageSmoothingEnabled=Dd;Na=Array(u);he(u,!0);Fe&&!Oa?ua(ja(vc)):ua(ja(v));if(0<Z)for(I=Array(u),f=0;f<u;f++)for(d=h[f],I[d]=Array(Z),a=0;a<Z;a++)I[d][a]=new Image,I[d][a].gotit=!1,I[d][a].frameNum=
d,I[d][a].overlayNum=a,I[d][a].onerror=function(){Ea++},I[d][a].onload=function(){this.gotit=!0;var a=this.frameNum;Ea++;Rc();!oe||this.height==fa&&this.width==ma?this.overlayNum==Fd-1&&(Na[this.frameNum]=0):(this.gotit=!1,ea("Bad image size:"+this.src));if(Ec&&this.gotit&&this.overlayNum==ob)Zb[a].height=this.height,Zb[a].width=this.width,Sd=Zb[a].getContext("2d"),Sd.drawImage(this,0,0),zf[a]=Sd.getImageData(0,0,this.width,this.height).data,La[a].height=this.height,La[a].width=this.width,Qc[a]=La[a].getContext("2d"),
Qc[a].drawImage(this,0,0),Ce[a]=Qc[a].getImageData(0,0,this.width,this.height),I[a][this.overlayNum]=null,I[a][this.overlayNum]=La[a],I[a][this.overlayNum].gotit=!0;else if(this.gotit&&C[this.overlayNum].hotspotIndex){var b=p("canvas");b.height=this.height;b.width=this.width;var c=b.getContext("2d");c.drawImage(this,0,0);var d=c.getImageData(0,0,this.width,this.height).data,h=d.length;var e=this.overlayNum;var f;for(f=0;f<h;f+=4)if(0!=d[f]){0==kb&&(lb=[]);var n=d[f];var k=Math.floor(f/4/b.width);
c=Math.floor(f/4%b.width);lb[kb]=new zb(c,k,"spritefn",n,"pan",null,null,e,a,null);kb++}}else if(this.gotit&&rg&&(!kf||kf&&vg[this.overlayNum])){b=p("canvas");b.height=this.height;b.width=this.width;c=b.getContext("2d");c.drawImage(this,0,0);k=c.getImageData(0,0,this.width,this.height);d=k.data;h=d.length;for(f=0;f<h;f+=4)d[f]===sg&&d[f+1]===tg&&d[f+2]===ug&&(d[f+3]=0);c.putImageData(k,0,0);I[a][this.overlayNum]=null;I[a][this.overlayNum]=b;I[a][this.overlayNum].gotit=!0}this.gotit&&jf[this.overlayNum]?
(Bf.clearRect(0,0,R,V),Bf.drawImage(I[a][this.overlayNum],0,0,R,V)):this.gotit&&pg[this.overlayNum]&&null!=J&&(b=p("canvas"),b.height=fa,b.width=ma,8>J.length&&(J[4]=0,J[5]=0,J[6]=ma,J[7]=fa),c=b.getContext("2d"),c.imageSmoothingEnabled=qg,c.drawImage(this,J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7]),I[a][this.overlayNum]=null,I[a][this.overlayNum]=b,I[a][this.overlayNum].gotit=!0,null!=pb&&pb[this.overlayNum]&&(I[a][this.overlayNum].origImage=this));Hc&&null!=uc[a][this.overlayNum]&&URL.revokeObjectURL(uc[a][this.overlayNum])},
b=ca[d][a],void 0!=Ed[a+1]&&(b=Ed[a+1],b>=u&&(b=u-1),b=ca[b][a]),void 0==Td||Td[a]||(b+=c),I[d][a].src=b,I[d][a].src=Hc&&(se||uc[d][a])?uc[d][a]:b,Bb++;if(null!=Sc)for($b=[],a=0;a<Sc.length;a++)$b[a]=new Image,$b[a].gotit=!1,$b[a].onerror=function(a){Ea++},$b[a].onload=function(a){a.currentTarget.gotit=!0;Ea++;Rc()},$b[a].src=Sc[a],Bb++;if(null!=Fa&&0<Fa.length)for(sa=[],a=0;a<Fa.length;a++)if(void 0!=Fa[a])for(sa[a]=[],d=0;d<Fa[a].length;d++)for(sa[a][d]=[],f=0;f<u;f++)Th(Fa[a][d],"/")?(b=ca[f][a].lastIndexOf("/"),
b=ca[f][a].substring(0,b+1)+Fa[a][d]+ca[f][a].substring(b+1),sa[a][d][f]=new Image,sa[a][d][f].gotit=!1,sa[a][d][f].onerror=function(a){Ea++;Rc()},sa[a][d][f].onload=function(a){a.currentTarget.gotit=!0;Ea++;Rc()},sa[a][d][f].src=b,Bb++):0===f?(sa[a][d][0]=new Image,sa[a][d][0].gotit=!1,sa[a][d][0].onerror=function(a){Ea++;Rc()},sa[a][d][0].onload=function(a){a.currentTarget.gotit=!0;Ea++;Rc()},sa[a][d][0].src=Fa[a][d],Bb++):sa[a][d][f]=sa[a][d][0]}!oe&&0!=this.height&&0!=this.width||this.height==
fa&&this.width==ma?(this.gotit=!0,0==Fd&&(Na[this.frameNum]=0)):(this.gotit=!1,ea("Image has invalid size:"+this.src));ld&&this.gotit&&(f=this.frameNum,Zb[f].height=this.height,Zb[f].width=this.width,Sd=Zb[f].getContext("2d"),Sd.drawImage(this,0,0),zf[f]=Sd.getImageData(0,0,this.width,this.height).data,La[f].height=this.height,La[f].width=this.width,Qc[f]=La[f].getContext("2d"),Qc[f].drawImage(this,0,0),Ce[f]=Qc[f].getImageData(0,0,this.width,this.height),Da[f]=null,Da[f]=La[f],Da[f].gotit=!0);Ea++;
Rc();Eg||HAniS.resetZoom();Tc=!0;Uh||(Uh=!0,xa=!1,Vh());X(Oa)};var n=ra[b];void 0!=Ed[0]&&(n=Ed[0],n>=u&&(n=u-1),n=ra[n]);of||(n+=c);Da[b].src=Hc&&(se||tc[b])?tc[b]:n;Bb++}Uc=Cb=!1;K()}function da(b,a,d,c,h,f){b.label_on=d;b.label_off=c;gb&&(b.className=f);d=null;c=e[a+"_labels"];null==c&&(c=e[a+"_label"]);null!=c&&(c=c.split(","),b.label_on=c[0].trim(),1<c.length&&(b.label_off=c[1].trim()),2<c.length&&(d="width:"+c[2].trim()+"px;"));null!=h&&(b.title=h);b.innerHTML=b.label_on;h=a=c=e[a+"_style"];
null!=c&&(c=c.split("&"),1<c.length&&(a=c[0],h=c[1]));b.style_on=(null!=d?d:"")+wc+a;b.style_off=(null!=d?d:"")+wc+h;null!=b.style_on&&1<b.style_on.length?b.setAttribute("style",b.style_on):(b.style_on=null,b.style_off=null)}function ge(b,a){wc=e.buttons_style;null==wc&&(wc="");var d=null,c=null;d=a?e.controls_tooltip:e.bottom_controls_tooltip;var h=b.split(",");if(null!=d){var f=d.split(",");f.length!=h.length&&(ea("!!! Number of tooltips must equal number of controls!"),f=d=null)}for(b=0;b<h.length;b++){var n=
null!=d?f[b]:null;var k=h[b].trim();c=k.indexOf("/");if(0===c||0===b){0===c&&(k=k.substring(1));A=p("div");A.align=Ad;var g=e.controls_style;null!=g?A.setAttribute("style",g):A.setAttribute("style","position:relative;padding:2px;width:100%;");a?(y.insertBefore(A,Ua),Cf=A):(g=e.bottom_controls_style,null!=g&&A.setAttribute("style",g),y.appendChild(A),Df=A)}"enhance"==k.trim()&&(wa=p("select"),c=e.enhance_style,null!=c&&wa.setAttribute("style",c),null!=n&&(wa.title=n),c=p("option"),c.innerHTML="Pick Enhancement",
c.value=-1,wa.add(c),wa.addEventListener("change",HAniS.doEnhance,!1),ld=!Ec,wa.disabled=ld?!1:!0,A.appendChild(wa));"startstop"==k&&(Ab=p("button"),da(Ab,"startstop","Start","Stop",n,"startstop start"),Ab.addEventListener("click",HAniS.toggleIsLooping,!1),A.appendChild(Ab));"looprock"==k&&(Ud=p("button"),da(Ud,"looprock","Rock","Loop",n,"looprock rock"),Ef=1,Ud.addEventListener("click",HAniS.toggleLoopRock,!1),A.appendChild(Ud));"extrap"==k&&(ac=p("button"),da(ac,"extrap","Enable Extrap","Disable Extrap",
n,"extrap"),ac.addEventListener("click",HAniS.toggleExtrap,!1),A.appendChild(ac));D(k,"location")&&(nd=p("button"),da(nd,"location","Show Loc","Hide Loc",n,"location"),0<k.indexOf("/on")?(L(nd,!1,"location off"),od=!0,ya.push(y.style.cursor),y.style.cursor=me):(od=!1,y.style.cursor=ya.pop()),nd.addEventListener("click",function(){(od=!od)?(L(nd,!1,"location off"),ya.push(y.style.cursor),y.style.cursor=me):(L(nd,!0,"location on"),y.style.cursor=ya.pop());K()},!1),A.appendChild(nd));"distance"==k&&
(bc=p("button"),da(bc,"distance","Show dist","Hide dist",n,"distance"),lc=le=!1,bc.addEventListener("click",function(){(lc=!lc)?(L(bc,!1,"distance off"),ya.push(y.style.cursor),y.style.cursor=$e):(L(bc,!0,"distance on"),y.style.cursor=ya.pop())},!1),A.appendChild(bc));D(k,"probe")&&(pd=p("button"),da(pd,"probe","Show probe","Hide probe",n,"probe"),0<k.indexOf("/on")?(L(pd,!1,"probe off"),Nb=!0,ya.push(y.style.cursor),y.style.cursor=ne):(Nb=!1,y.style.cursor=ya.pop()),pd.addEventListener("click",function(){(Nb=
!Nb)?(L(pd,!1,"probe off"),ya.push(y.style.cursor),y.style.cursor=ne):(L(pd,!0,"probe on"),y.style.cursor=ya.pop())},!1),A.appendChild(pd));"mark"==k&&(Vc=p("button"),da(Vc,"mark","Mark","Stop Mark",n,"mark"),Vd=!0,Vc.addEventListener("click",function(){vb=!vb;na=[];vb?(qd=0,L(Vc,!1,"mark off"),null!=va&&(va.disabled=!0),ya.push(y.style.cursor),y.style.cursor=af):(L(Vc,!0,"mark on"),null!=va&&(va.disabled=!1),qd=-1,y.style.cursor=ya.pop());K()},!1),Wh=new mb("black","white",rf,"black",20,5,5),hh=
new mb("black","white",rf,"black",20,5,5),A.appendChild(Vc));"refresh"==k&&(we=p("button"),da(we,"refresh","Refresh",null,n,"refresh"),we.addEventListener("click",HAniS.reloadFOF,!1),A.appendChild(we));"restore"==k&&(Ff=p("button"),da(Ff,"restore","Restore",null,n,"restore"),Ff.addEventListener("click",function(a){for(a=0;a<C.length;a++)C[a].checked=C[a].restorableState;for(a=0;a<C.length;a++)Ja(a)},!1),A.appendChild(Ff));"setframe"==k&&(ib=p("input"),gb&&(ib.className="setframe"),ib.type="range",
ib.min=1,ib.max=100,ib.value=1,Ge="Frame #*",null!=n&&(ib.title=n),g=e.setframe_label,null!=g&&(Ge=g),Wd=p("span"),Wd.innerHTML=Ge.replace("*",1),c="display:block;vertical-align:middle;"+e.setframe_style,ib.setAttribute("style",c),c=p("span"),c.setAttribute("style","display:inline-block;vertical-align:top;"),Wd.setAttribute("style","display:block;vertical-align:middle;"+e.setframe_label_style),c.appendChild(Wd),c.appendChild(ib),A.appendChild(c),ib.addEventListener("input",function(a){X(!1);a=parseInt(ib.value,
10)-1;0<=Na[a]&&(ua(a),Wd.innerHTML=Ge.replace("*",v+1));m()},!1),yf=!0);"framelabel"==k&&(Ga=p("button"),gb&&(Ga.className="framelabel"),Ga.innerHTML="",null!=n&&(Ga.title=n),$a=null,g=e.frame_labels,null!=g&&($a=g.split(","),Ga.innerHTML=$a[0]),c=wc+e.framelabel_style,null!=c&&Ga.setAttribute("style",c),c=e.framelabel_position,null!=c&&(c=c.split(","),Ga.style.position="absolute",Ga.style.left=y.offsetLeft+parseInt(c[0],10)+"px",Ga.style.top=y.offsetTop+parseInt(c[1],10)+"px"),A.appendChild(Ga));
if("autorefresh"==k||"autorefresh/off"==k)null!=Cc&&clearInterval(Cc),Kc=p("button"),da(Kc,"autorefresh","Disable Auto Refresh","Enable Auto Refresh",n,"autorefresh"),Kc.addEventListener("click",HAniS.toggleAutoRefresh,!1),Cd=!1,A.appendChild(Kc),"autorefresh"==k?HAniS.toggleAutoRefresh():L(Kc,!1,"autotoggle off");"backward"==k&&(rb=p("button"),da(rb,"backward","<","<",n,"step back"),rb.addEventListener("click",function(){X(!1);fb(-1);m()},!1),A.appendChild(rb));"forward"==k&&(sb=p("button"),da(sb,
"forward",">",">",n,"step forward"),sb.addEventListener("click",function(){X(!1);fb(1);m()},!1),A.appendChild(sb));if("step"==k){c=e.step_labels;var l=null!=c?c.split(","):["<",">"];rb=p("button");gb&&(rb.className="step back");rb.innerHTML=l[0];rb.addEventListener("click",function(){X(!1);fb(-1);m()},!1);c=wc+e.step_style;null!=c&&rb.setAttribute("style",c);null!=n&&(rb.title=n);A.appendChild(rb);sb=p("button");gb&&(sb.className="step forward");sb.innerHTML=l[1];sb.addEventListener("click",function(){X(!1);
fb(1);m()},!1);null!=c&&sb.setAttribute("style",c);null!=n&&(sb.title=n);A.appendChild(sb)}"first"==k&&(Db=p("button"),da(Db,"first","|<","|<",n,"firstlast first"),Db.addEventListener("click",function(){X(!1);ua(ja(0));m()},!1),A.appendChild(Db));"last"==k&&(Eb=p("button"),da(Eb,"last",">|",">|",n,"firstlast last"),Eb.addEventListener("click",function(){X(!1);ua(ja(u-1));m()},!1),A.appendChild(Eb));"firstlast"==k&&(c=e.firstlast_labels,l=null!=c?c.split(","):["<<",">>"],Db=p("button"),gb&&(Db.className=
"firstlast"),Db.innerHTML=l[0],Db.addEventListener("click",function(){X(!1);ua(ja(0));m()},!1),c=wc+e.firstlast_style,null!=c&&Db.setAttribute("style",c),null!=n&&(Db.title=n),A.appendChild(Db),Eb=p("button"),gb&&(Eb.className="firstlast"),Eb.innerHTML=l[1],Eb.addEventListener("click",function(){X(!1);ua(ja(u-1));m()},!1),null!=c&&Eb.setAttribute("style",c),null!=n&&(Eb.title=n),A.appendChild(Eb));"setspeed"==k?(Fb=p("input"),gb&&(Fb.className="setspeed"),Fb.type="range",Fb.min=Tb,Fb.max=Jc,Fb.value=
Jc-hb,null!=n&&(Fb.title=n),c="vertical-align:middle;"+e.setspeed_style,Fb.setAttribute("style",c),Fb.addEventListener("input",function(a){hb=Jc-parseInt(Fb.value,10)+30;X(!0);m()},!1),A.appendChild(Fb)):"speed"==k&&(c=e.speed_labels,l=null!=c?c.split(","):["-","+"],Ub=p("button"),gb&&(Ub.className="speed slower"),Ub.innerHTML=l[0],Ub.addEventListener("click",function(){hb+=qf;Vb.disabled=!1;hb>Jc&&(hb=Jc,Ub.disabled=!0)},!1),c=wc+e.speed_style,null!=c&&Ub.setAttribute("style",c),null!=n&&(Ub.title=
n),A.appendChild(Ub),Vb=p("button"),gb&&(Vb.className="speed faster"),Vb.innerHTML=l[1],Vb.addEventListener("click",function(){hb-=qf;Ub.disabled=!1;hb<Tb&&(hb=Tb,Vb.disabled=!0)},!1),null!=c&&Vb.setAttribute("style",c),null!=n&&(Vb.title=n),A.appendChild(Vb));"zoom"==k&&(va=p("button"),da(va,"zoom","Zoom","Un-zoom",n,"zoom off"),va.addEventListener("click",HAniS.toggleZooming,!1),A.appendChild(va),ta=!1);if("annotate"==k){Xd=p("button");da(Xd,"annotate","Annotate","Finished",n,"annotate");ia=p("div");
ia.setAttribute("style","position:absolute;box-sizing:content-box;height:120px;width:180px;top:20px;left:20px;z-index:15;visibility:hidden;background-color:lightgray;border-width:6px;border-style:solid;border-color:magenta;border-radius:25px;padding:10px;font:normal normal normal 16px Arial;color:black;");ia.title="Drag this box around.  Select attributes, then go onto the image and click & drag";Wc=Xc=20;He=Gb=!1;ih=3;jh=11;Yc=Yd=0;t=[];ia.style["touch-action"]="none";var w=function(a){Xc=a.clientX-
Yc;Wc=a.clientY-Yd;ia.style.top=Wc+"px";ia.style.left=Xc+"px"};ia.addEventListener("mousedown",function(a){if(0!=a.clientX||0!=a.clientY)He=!0,Yc=a.clientX-Xc,Yd=a.clientY-Wc},!1);ia.addEventListener("mouseup",function(a){He=!1},!1);ia.addEventListener("mouseout",function(a){He&&w(a)},!1);ia.addEventListener("mousemove",function(a){He&&w(a)},!1);window.PointerEvent?(ia.addEventListener("pointerdown",function(a){"mouse"!=a.pointerType&&(Yc=a.clientX-Xc,Yd=a.clientY-Wc)},!1),ia.addEventListener("pointermove",
function(a){"mouse"!=a.pointerType&&(0==Yc&&(Yc=a.clientX,Yd=a.clientY),w(a))},!1)):ia.addEventListener("touchmove",function(a){a=a.changedTouches[0];0==Yc&&(Yc=a.clientX,Yd=a.clientY);w(a)},!1);Xd.addEventListener("click",function(){if(Gb=!Gb){t=[];Xc=y.offsetLeft;Wc=y.offsetTop;var a=e.annotate_position;null!=a&&(a=a.split(","),Xc+=parseInt(a[0],10),Wc+=parseInt(a[1],10));ia.style.top=Wc+"px";ia.style.left=Xc+"px";ia.style.visibility="visible";L(Xd,!1,"annotate off");Xh=ta;ta=!1;null!=va&&(va.disabled=
!0)}else ia.style.visibility="hidden",L(Xd,!0,"annotate on"),ta=Xh,null!=va&&(va.disabled=!1);K()},!0);Zd=kh("Color Black White Red Green Blue Yellow Orange Cyan Magenta".split(" "),"black black white red green blue yellow orange cyan magenta".split(" "),function(a){});xc=kh("Width 1 2 3 4 5 6 7 8 10 12 14 16 18 20 24 28 32 36 38".split(" "),[1,1,2,3,4,5,6,7,8,10,12,14,16,18,20,24,28,32,36,38],function(a){6==$d.selectedIndex?jh=xc.selectedIndex:ih=xc.selectedIndex});xc.title="Select width or font size";
$d=kh("Type Arrow Circle Box Polygon Draw Text".split(" "),[-1,0,1,2,3,4,5],function(a){6==$d.selectedIndex?(Hb.focus(),Hb.select(),xc.selectedIndex=jh):xc.selectedIndex=ih;0==Zd.selectedIndex&&(Zd.selectedIndex=2)});c=p("button");c.style.width="70px";c.style.margin="5px";c.innerHTML="Erase";c.title="Erase last item";c.addEventListener("click",function(){0<t.length&&(t.pop(),K())},!1);Hb=p("input");Hb.type="text";Hb.style.width="150px";Hb.style.margin="5px";Hb.title="Enter your text here, then click where you want it";
Hb.value="Text input";l=e.annotate_defaults;null!=l&&(l=l.split(","),$d.selectedIndex=parseInt(l[0],10),1<l.length&&(Zd.selectedIndex=parseInt(l[1],10)),2<l.length&&(xc.selectedIndex=parseInt(l[2],10)),3<l.length&&(Hb.value=l[3].trim()));l=p("div");l.innerHTML="Annotation Tools";var Ba=p("div");Ba.appendChild($d);Ba.appendChild(Zd);var z=p("div");z.appendChild(xc);z.appendChild(c);c=p("div");c.appendChild(Hb);ia.appendChild(l);ia.appendChild(Ba);ia.appendChild(z);ia.appendChild(c);A.appendChild(Xd);
y.appendChild(ia)}"saveall"==k&&(Gf=p("button"),da(Gf,"saveall","SaveAll","SaveAll",n,"saveall"),lh=e.saveall_prompt,cc=e.saveall_filename,c=e.saveall_list,mh=null==c?["0"]:c.split(","),Gf.addEventListener("click",function(){for(var a=0;a<mh.length;a++)for(var b=parseInt(mh[a],10),c=0;c<ra.length;c++){0===c&&null!=lh&&(cc=window.prompt(lh,cc),null!=cc&&1>cc.length&&(cc=null));var d=null==cc?"":-1!=cc.indexOf("#")?cc.replace("#",c.toString()):cc+c;var h=document.createElement("a");h.href=0==b?ra[c]:
ca[c][b-1];h.download=d;d=new MouseEvent("click");h.dispatchEvent(d)}},!1),A.appendChild(Gf));if("capture"==k){Hf=p("button");da(Hf,"capture","Capture","Capture",n,"capture");var x=e.capture_prompt;If=e.capture_filename;null==If&&(If="haimage.png");Hf.addEventListener("click",function(){var a=If;if(null!=x&&(a=window.prompt(x,a),null==a))return;var b=p("canvas");b.height=nb.height;b.width=nb.width;var c=b.getContext("2d");Vd=!1;K();c.drawImage(nb,0,0);c.drawImage(mc,0,0);Vd=!0;b.toBlob(function(b){var c=
URL.createObjectURL(b),d=document.createElement("a");d.href=c;d.download=a;c=new MouseEvent("click");d.dispatchEvent(c);setTimeout(function(){URL.revokeObjectURL(b)},3E4)})},!1);A.appendChild(Hf)}"show"==k&&(Jf=p("button"),da(Jf,"show","Show","Show",n,"show"),Kf=e.show_prompt,Yh=e.show_image_file,null==Kf&&(Kf="Right-click to save or copy the image<br> <font size='-1'>(to save in some browsers, you may need to first 'Open in New Tab')</font> <p>"),Jf.addEventListener("click",function(){if(Yh)window.open(ra[v]);
else{var a=nb.toDataURL("image/png;base64;");var b=window.open();b.document.write(Kf+"<img src="+a+"></img>")}},!1),A.appendChild(Jf));"toggle"==k&&(Na=[],c=e.toggle_size,null!=c?(c=c.split(","),rd=parseInt(c[0],10),Ie=parseInt(c[1],10),Je=parseInt(c[2],10)):(Ie=rd=10,Je=3),nh="red",oh="blue",ph="orange",qh=!1,D(e.toggle_layout_width,"t")&&(qh=!0),c=e.toggle_colors,null!=c&&(c=c.split(","),oh=c[0].trim(),nh=c[1].trim(),ph=c[2].trim()),wb=p("div"),wb.setAttribute("style","position:relative;border:0px;margin:0px;padding:0px;-webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none; -webkit-tap-heightlight-color:transparent;"),
wb.style.backgroundColor=A.style.backgroundColor,wb.align=Ad,rh=new PEvs(wb,null,null,null,null,HAniS.togclick,null),Zc=p("canvas"),Zc.height=2*Ie,Lf=Zc.getContext("2d"),wb.appendChild(Zc),a?y.insertBefore(wb,Ua):y.appendChild(wb),c=e.toggle_onoff,Ke=null,null!=c&&(Ke=c.split(",")),Mf=!0,null!=n&&(wb.title=n));if("overlay"==k){C=[];k=e.overlay_tooltip;n=null;null!=k&&(n=k.split(","));k=e.overlay_radio;c=null;null!=k&&(c=k.split(","));Ba=e.overlay_labels_color;l=null;null!=Ba&&(l=Ba.split(","));Td=
[];z=e.overlay_caching;Ba=null;null==z&&(z=e.overlay_static);null!=z&&(Ba=z.split(","));var q=!0;null!=e.overlay_nonewdiv&&(q=!1);for(z=0;z<Qb.length;z++){var r=Qb[z].trim();if(0==z||0==r.indexOf("/"))0==r.indexOf("/")&&(r=r.substr(1)),q?(Ib=p("div"),sh++,Ib.align="center",a?y.insertBefore(Ib,Ua):y.appendChild(Ib)):(Ib=p("span"),A.appendChild(Ib)),g=e.overlay_labels_style,null!=g&&Ib.setAttribute("style",g);var B=!1;g=r.length;0<r.indexOf("/on")&&r.indexOf("/on")==g-3&&(B=!0,r=r.substr(0,g-3));var E=
!1;0<r.indexOf("/always")&&r.indexOf("/always")==g-7&&(E=B=!0);var G=!1;0<r.indexOf("/hidden")&&(G=!0);var F=!1;0<r.indexOf("/hotspots")&&(F=!0,r=r.substr(0,r.indexOf("/")));null!=Ba?D(Ba[z],"y")||D(Ba[z],"t")?Td[z]=!0:Td[z]=!1:Td[z]=!0;C[z]=p("input");C[z].type="checkbox";C[z].value=r;C[z].id=r;C[z].showMe=!(E&G)&!F;var I="vertical-align:middle;";g=e.checkbox_style;null!=g&&(I+=g);C[z].setAttribute("style",I);C[z].checked=B;C[z].restorableState=B;C[z].name=0;C[z].hotspotIndex=F;null!=wa&&z==ob&&
C[z].checked&&(wa.disabled=!1);null!=oc&&!oc[z]&&B&&(cd=!1);C[z].addEventListener("click",HAniS.overClick,!1);null!=k&&(g=c[z].indexOf("/"),-1!=g&&(C[z].name=c[z].substr(g+1).trim()),D(c[z],"t")&&(C[z].type="radio",-1==g&&(C[z].name="all")));C[z].isGhost=!0;E||G||(null!=n&&(C[z].title=n[z]),g=p("label"),g.htmlFor=r,null!=n&&(g.title=n[z]),g.innerHTML=r,g.name=C[z].name,r="vertical-align:middle;",null!=l&&(r=r+"color:"+l[z]+";"),g.setAttribute("style",r),r=p("span"),E="10",null!=pe&&(E=10+pe[z]),r.setAttribute("style",
"margin-left:"+E+"px;"),r.appendChild(C[z]),r.appendChild(g),Ib.appendChild(r),C[z].isGhost=!1)}if(null==Rb)for(Rb=Array(Qb.length),z=0;z<Qb.length;z++)Rb[z]=0;else for(z=0;z<Qb.length;z++)Ja(z)}}Oa=!0;Fe=null;g=e.start_looping;null!=g&&(c=g.split(","),D(c[0],"f")&&(Oa=!1),1<c.length&&(vc=parseInt(c[1],10)-1,isNaN(vc)&&(vc=0),v=vc),2<c.length&&(D(c[2],"t")&&(Fe=!0),D(c[2],"f")&&(Fe=!1)));X(Oa)}function Ja(b){var a;if(0>Rb[b]){var d=!1;for(a=0;a<Qb.length;a++)Rb[a]!=-Rb[b]||d||(d=C[a].checked);C[b].checked=
d}}function Kb(b){0==kb&&(lb=[]);b=b.substr(b.indexOf("=")+1).trim().split(",");var a=b[4].trim(),d=b[4].indexOf("/"),c=b[4].indexOf("?"),h=-1,f=-1;-1!=d&&(h=parseInt(b[4].substring(d+1),10)-1,a=a.substring(0,d));-1!=c&&(f=parseInt(b[4].substring(c+1),10)-1,c<d||-1==d)&&(a=a.substring(0,c));lb[kb]=new zb(parseInt(b[0].trim(),10),parseInt(b[1].trim(),10),b[2].trim(),b[3].trim(),a.toLowerCase(),b[5].trim().toLowerCase(),b[6].trim(),h,f,8==b.length?b[7].trim():null);kb+=1}function zc(b){0==De&&(Ma=[],
oa=null);var a=b.substr(b.indexOf("=")+1).trim().split("(");b=a[0].split(",");var d=b[0].trim();0==d.indexOf("0x")&&(d="#"+d.substring(2));Ma[De]=new db(d,b[1].trim(),b[2].trim(),b[3].trim(),a[1].trim());De+=1}function ad(b){0==ub&&(Ca=[]);b=b.substr(b.indexOf("=")+1).trim().split(",");Ca[ub]=new jc(parseInt(b[0],10)-1,parseInt(b[1],16),b[2].trim(),b[3].trim(),5==b.length?b[4].trim():"Click for details");ub+=1}function db(b,a,d,c,h){this.color=b;this.alpha=1;7<this.color.length&&(this.alpha=parseInt(this.color.substring(7),
16)/255,this.color=this.color.substring(0,7),.1>this.alpha&&(this.alpha=.1));this.action=a;this.value=d;this.tip=c;this.poly=h;b=h.split(",");this.xy=[];this.ymin=this.xmin=9999;for(a=this.ymax=this.xmax=0;a<b.length;a++)this.xy[a]=parseInt(b[a].trim(),10),0==a%2?(this.xy[a]<this.xmin&&(this.xmin=this.xy[a]),this.xy[a]>this.xmax&&(this.xmax=this.xy[a])):(this.xy[a]<this.ymin&&(this.ymin=this.xy[a]),this.xy[a]>this.ymax&&(this.ymax=this.xy[a]));this.height=this.ymax-this.ymin+1;this.width=this.xmax-
this.xmin+1;this.can=p("canvas");this.can.height=this.height;this.can.width=this.width;this.ctx=this.can.getContext("2d");this.ctx.imageSmoothingEnabled=!1;this.ctx.fillStyle=this.color;this.ctx.globalAlpha=this.alpha;this.ctx.beginPath();this.ctx.moveTo(this.xy[0]-this.xmin,this.xy[1]-this.ymin);for(a=2;a<this.xy.length;a+=2)this.ctx.lineTo(this.xy[a]-this.xmin,this.xy[a+1]-this.ymin);this.ctx.closePath();this.ctx.fill()}function jc(b,a,d,c,h){this.overlay=b;this.color=a;this.action=d;this.value=
c;this.tip=h}function zb(b,a,d,c,h,f,e,g,l,m){this.x0=b;this.y0=a;this.icon=null;this.isIcon=!1;if("icon"==d)this.icon=new Image,this.icon.hotspot=this,Nf=!0,this.icon.onload=function(a){this.gotit=!0;this.hotspot.x1=this.hotspot.x0+this.width;this.hotspot.y1=this.hotspot.y0+this.height;this.hotspot.width=this.width;this.hotspot.height=this.height;this.hotspot.w2=this.width/2;this.hotspot.h2=this.height/2;this.hotspot.isIcon=!0;this.hotspot.origX=0;this.hotspot.origY=0},this.y1=this.x1=-1,this.zoomme=
this.fromfile=this.anim=!1,this.icon.gotit=!1,this.icon.src=c.trim();else if("sprite"==d||"spritefn"===d){this.x0=b;this.y0=a;this.inx=parseInt(c,10)-1;ae=!1;mg?null!=ha&&(-1!=Oc?this.inx>=Oc&&this.inx<=Oc+ha.length&&(ae=!0):"spritefn"===d&&(ae=!0)):ae=!0;if(ae){-1!=Oc&&(this.inx-=Oc);if(this.inx>=ha.length)return null;this.x1=ha[this.inx].width+b;this.y1=ha[this.inx].height+a;this.width=ha[this.inx].width;this.height=ha[this.inx].height;this.w2=this.width/2;this.h2=this.height/2;this.origY=this.origX=
0;this.icon=ha[this.inx].cloneNode();this.anim=ha[this.inx].anim;this.fromfile=ha[this.inx].fromfile;this.zoomme=ha[this.inx].zoomme;this.anim&&(this.icon.setAttribute("style","position:absolute;top:0px;left:0px;visibility:hidden;"),sc.appendChild(this.icon))}else this.x1=Ob[this.inx]+b,this.y1=Pb[this.inx]+a,this.width=Ob[this.inx],this.height=Pb[this.inx],this.w2=Ob[this.inx]/2,this.h2=Pb[this.inx]/2,this.origX=ef[this.inx],this.origY=ff[this.inx],this.icon=df,this.zoomme=this.fromfile=this.anim=
!1;Nf=this.isIcon=!0;this.icon.gotit=!0}else this.width=parseInt(d,10),this.height=parseInt(c,10),this.x1=this.width+b,this.y1=this.height+a,this.w2=this.width/2,this.h2=this.height/2;this.pan=h;this.isPan=!1;"pan"===this.pan&&(this.isPan=!0);this.action=f;this.value=e;this.overlay=g;this.frame=l;this.tip=m}function Sa(){if(sd&&!id){S=-1;for(var b=0;b<la.length;b++)E>=la[b]&&(S=b)}}function Lb(){null!=Xb?ab=Xb.toLatLon(pa,qa):null!=wf?(ab[0]=wf+(Rh-wf)*qa/fa,ab[1]=bh+(Sh-bh)*pa/ma):(ab[0]=Math.round(pa),
ab[1]=Math.round(qa))}function Mb(b,a){"popup"==b.action?(null!=Of&&Of.close(),Of=window.open("","HAniSPopup","scrollbars=yes,width="+Qg+",height="+Pg),Of.document.write(Og+b.value+"</div>")):"link"==b.action?(b=b.value,Lb(),b=b.replace("%LATITUDE%",ab[0].toFixed(4)),b=b.replace("%LONGITUDE%",ab[1].toFixed(4)),b=b.replace("%FRAMENUMBER%",v+1),window.open(b,"_blank","")):"fof"==b.action&&(ba=Dg,HAniS.resetZoom(),HAniS.newFOF(b.value,!0),Ve(a))}function Ac(){var b=Kg?Kd/E:0;O+b<Kd&&(O=Kd-b);b=Mg?Ld/
E:0;O+Za-b>ma-Ld&&(O=ma-Za+b-Ld);b=Ig?Jd/F:0;N+b<Jd&&(N=Jd-b);b=Gg?Id/F:0;N+Ya-b>fa-Id&&(N=fa-Ya-Id+b);N=Math.round(N);O=Math.round(O)}function Ka(b){var a=!1;b?id?(S--,0>S?a=!0:(E=la[S],F=la[S])):(E-=.1*hd/r,F-=.1*hd/q):id?(S++,S>=la.length?(S--,pf&&(a=!0)):(E=la[S],F=la[S])):(!pf||E!==Ic&&F!==Ic||(a=!0),E+=.1*hd/r,F+=.1*hd/q,E>Ic&&(E=Ic),F>Ic&&(F=Ic));a||E<=Ee||F<=Le?(E=Ee,F=Le,S=-1,pa=B,qa=x,N=O=0,Ya=fa,Za=ma,Kd=Ld=Jd=Id=0,md&&(jb=!0)):(Id=Fg,Jd=Hg,Ld=Lg,Kd=Jg,O=pa-B/E,N=qa-x/F,Ya=Math.floor(fa/
F),Za=Math.floor(ma/E),Ac(),md&&(jb=!1));Sa()}function yd(){Me=0;Jb=Array(2);xb=Array(2);td=Array(2);Pa=0;fd=null;ua(ja(0))}function X(b){xa=!b;HAniS.toggleIsLooping()}function zd(b,a,d,c,h,f){Qd.clearRect(0,0,R,V);Qd.imageSmoothingEnabled=Dd;G.imageSmoothingEnabled=Dd;Qd.drawImage(b,a,d,c,h,0,0,R,V);th=Qd.getImageData(0,0,R,V);$c=th.data;Pf=Va[f];Qf=Wa[f];Rf=Xa[f];Sf=Od[f];Zh=4*R*V;for(dc=0;dc<Zh;dc+=4)bb=$c[dc],bb===$c[dc+1]&&bb===$c[dc+2]&&($c[dc]=Pf[bb],$c[dc+1]=Qf[bb],$c[dc+2]=Rf[bb],$c[dc+3]=
Sf[bb]);Qd.putImageData(th,0,0);G.drawImage(ye,0,0,R,V)}function L(b,a,d){null!=b&&(a?(null!=b.style_on&&b.setAttribute("style",b.style_on),b.innerHTML=b.label_on):(null!=b.style_off&&b.setAttribute("style",b.style_off),b.innerHTML=b.label_off),gb&&(b.className=d))}function eb(b,a){if(!(b>=u)&&(-2==Na[b]&&(a=-2),Na[b]=a,yf&&1==a&&(ib.value=b+1,Wd.innerHTML=Ge.replace("*",b+1)),Mf)){b=uh+b*(rd+Je);var d=ph;0==a?d=oh:-1==a?d=nh:-2==a&&(d=og);Lf.fillStyle=d;Lf.fillRect(b,Ie/2,rd,Ie)}}function he(b,a){Mf&&
(Zc.width=qh?parseInt(y.style.width,10):R,Lf.clearRect(0,0,Zc.width,Zc.height),uh=Zc.width/2-b*(rd+Je)/2);for(var d=0;d<b;d++)a?-1!=Fd?eb(d,-2):null!=Ke&&"n"==Ke[d].toLowerCase().trim()?eb(d,-1):eb(d,0):eb(d,Na[d])}function ua(b){eb(v,0);v=b;eb(v,1);null!=Ga&&null!=$a&&null!=$a[v]&&(Ga.innerHTML=$a[v]);void 0!=Ne&&Ne(v)}function ja(b){b>=u&&(b=u-1);if(0<=Na[b])return b;var a=-1,d=b;0==d&&(a=1);for(var c=0;c<u-1;c++)if(d+=a,0<=Na[d])return d;return b}function fb(b){eb(v,0);var a=b;do 0<a?(a=ja(u-1),
v+=1,v>a&&(be&&xa?(v=a,b=-b):v=ja(0))):(a=ja(0),--v,v<a&&(be&&xa?(v=a,b=-b):v=ja(u-1))),a=b;while(0>Na[v]);void 0!=Ne&&Ne(v);Ef=a;eb(v,1);null!=Ga&&null!=$a&&null!=$a[v]&&(Ga.innerHTML=$a[v])}function mb(b,a,d,c,h,f,e){this.bg=b;null!=b&&0==this.bg.indexOf("0x")&&(this.bg="#"+this.bg.substring(2));this.fg=a;null!=a&&0==this.fg.indexOf("0x")&&(this.fg="#"+this.fg.substring(2));this.font=d;this.fontHeight=Math.round(1.1*parseInt(d,10));this.scolor=c;null!=c&&0==this.scolor.indexOf("0x")&&(this.scolor=
"#"+this.scolor.substring(2));this.sblur=h;this.sxoff=f;this.syoff=e}function Ta(b,a,d,c,h){g.globalAlpha=1;g.font=b.font;var f=b.fontHeight;d=d-f-6;var e=g.measureText(c).width;1==h&&(a-=e);0==h&&(a-=e/2);5>a&&(a=5);5>d&&(d=5);d+f+3>V&&(d=V-f-6);a+3+e>R&&(a=R-e-6);g.save();g.beginPath();g.fillStyle=b.bg;null!=b.scolor&&(g.shadowColor=b.scolor,g.shadowBlur=b.sblur,g.shadowOffsetX=b.sxoff,g.shadowOffsetY=b.syoff);Oe=a-3;Tf=d;vh=e+6;Uf=f+6;g.fillRect(Oe,Tf,vh,Uf);g.closePath();g.restore();g.textBaseline=
"bottom";g.fillStyle=b.fg;g.fillText(c,a,d+f+3)}function K(){g.clearRect(0,0,R,V);Vf=!1;if(cb){g.beginPath();g.lineWidth=2;g.strokeStyle="white";var b=Pa;1<b&&(b=2);for(var a=0;a<b;a++)1<Pa&&(g.moveTo(Jb[0]/r,xb[0]/q),g.lineTo(Jb[1]/r,xb[1]/q)),g.moveTo(Jb[a]/r-15,xb[a]/q),g.lineTo(Jb[a]/r+15,xb[a]/q),g.moveTo(Jb[a]/r,xb[a]/q-15),g.lineTo(Jb[a]/r,xb[a]/q+15);g.closePath();g.stroke();if(3==Pa){var d=T,c=P;g.moveTo(d,c);g.fillStyle=pc;g.fillRect(d-2,c-2,5,5);b=ud;a=Math.round(d+Pe/r*ce*(ud-td[1]));
for(var h=Math.round(c+de/q*ce*(ud-td[1])),f=0;300>f;f++){g.beginPath();g.lineWidth=1;g.strokeStyle=pc;g.moveTo(d,c);g.lineTo(a,h);g.stroke();g.beginPath();g.lineWidth=3;g.rect(a-2,h-2,5,5);g.stroke();if(3>a||a+3>R||3>h||h+3>V)break;c=Yb+b;c=100*Math.floor(c/60)+c%60;c%=2400;yg?(d="AM",1200<=c?(1300<=c&&(c-=1200),d="PM"):100>c&&(c+=1200),d=Math.floor(c/100)+":"+Math.floor(Math.floor(c%100)/10)+Math.floor(c%10)+" "+d):(d=c+" ",1E3>c&&(d="0"+c),100>c&&(d="00"+c),10>c&&(d="000"+c));c=0;Math.abs(Wf)<
ed+5&&(c=45*.0174533);var e=h;0>wh*Wf&&0==c&&(e=h+ed);g.font=Hd;d=d+" "+xg;var k=g.measureText(d).width;g.fillStyle=Gd;0===c?(g.fillRect(a+2,e-ed-2+c,k+4,ed+3),g.fillStyle=pc,g.textBaseline="bottom",g.fillText(d,a+5,e)):(g.save(),g.translate(a+5,h),g.rotate(c),g.fillRect(2,-2,k+4,ed+3),g.fillStyle=pc,g.textBaseline="bottom",g.fillText(d,5,ed),g.restore());d=a;c=h;a=Math.round(d+ce*wh);h=Math.round(c+ce*Wf);b+=U}}null!=fd&&Ta(lf,$h,ai,fd,0);Vd&&(Ta(Mh,9999,Wg,Vg[Me],0),xh=Oe,yh=Tf,zh=Tf+Uf)}if(vb){Vd&&
(0==qd?Ta(hh,9999,10,ue[0],0):(Ta(Wh,10,10,ue[1],0),bi=Oe+vh,Ta(hh,9999,10,ue[2],0)),ci=Oe,di=Uf);g.beginPath();g.lineWidth=2;g.strokeStyle=Xg;for(b=0;b<na.length;b+=2)0==b?g.moveTo(na[b]/r,na[b+1]/q):g.lineTo(na[b]/r,na[b+1]/q);ve&4<na.length&&g.lineTo(na[0]/r,na[1]/q);g.stroke();for(b=0;b<na.length;b+=2)g.beginPath(),g.rect(na[b]/r-2,na[b+1]/q-2,5,5),g.stroke()}if(Gb)for(b=0;b<t.length;b++){a=t[b].type;g.beginPath();g.strokeStyle=t[b].color;g.lineWidth=t[b].width;if("0"==a)a=Math.atan2(t[b].xe-
t[b].x,t[b].ye-t[b].y),h=t[b].x+t[b].width*Math.sin(a),f=t[b].y+t[b].width*Math.cos(a),g.beginPath(),g.moveTo(h,f),g.lineTo(t[b].xe,t[b].ye),d=12+t[b].width/5,g.moveTo(h+d*Math.sin(a-.523599),f+d*Math.cos(a-.523599)),g.lineTo(h,f),g.lineTo(h+d*Math.sin(a+.523599),f+d*Math.cos(a+.523599));else if("1"==a)g.arc(t[b].x,t[b].y,t[b].size,0,2*Math.PI);else if("2"==a)g.rect(t[b].x-t[b].size,t[b].y-t[b].size,2*t[b].size,2*t[b].size);else if("3"==a){g.moveTo(t[b].xp[0],t[b].yp[0]);for(h=1;h<t[b].xp.length;h++)g.lineTo(t[b].xp[h],
t[b].yp[h]);g.lineTo(t[b].xp[0],t[b].yp[0])}else if("4"==a)for(g.moveTo(t[b].xp[0],t[b].yp[0]),h=1;h<t[b].xp.length;h++)g.lineTo(t[b].xp[h],t[b].yp[h]);else"5"==a&&(g.fillStyle=t[b].color,g.font=t[b].width+"pt arial",a=g.measureText(t[b].text).width,g.fillText(t[b].text,t[b].x-a/2,t[b].y+t[b].width/2));g.stroke()}Uc&&(b=Bc*(Qe-ee)/E,a=ke*(Re-fe)/F,b=" "+Math.sqrt(b*b+a*a).toFixed(hg)+" "+gg+" ",Ta(Kh,ee/r,fe/q,b,-1),g.beginPath(),g.strokeStyle=ig,g.lineWidth=3,g.moveTo(Qe/r,Re/q),g.lineTo(ee/r,fe/
q),g.stroke(),g.closePath());Cb&&Ta(Cg,Ah,Bh,Ch,-1);if(Nb||od)if(T=ka.getX(),B=T*r,P=ka.getY(),x=P*q,0<=B&&0<=x){pa=O+B/E;qa=N+x/F;if(od){Lb();ei=dg+ab[0].toFixed(Ze)+"  "+eg+ab[1].toFixed(Ze);b=P;if(Uc||Cb)b=P+fg.fontHeight+6;Ta(fg,T+10,b,ei,-1)}if(Nb&&Lc&&Tc)if(pa=Math.round(pa),qa=Math.round(qa),bf)Qa.clearRect(0,0,1,1),Qa.drawImage(Da[v],pa,qa,1,1,0,0,1,1),M=Qa.getImageData(0,0,1,1).data,H=0,za(!1);else for(b=0;b<Z;b++)if(a=Z-b-1,I[v][a].gotit&&C[a].checked&&(a==ob||null!=nc[a]&&0<=nc[a])){Qa.clearRect(0,
0,1,1);a==ob?Qa.drawImage(Zb[v],pa,qa,1,1,0,0,1,1):Qa.drawImage(I[v][a],pa,qa,1,1,0,0,1,1);M=Qa.getImageData(0,0,1,1).data;H=nc[a];null!=H&&za(a==ob||ah);break}}!jb||cb||lc||Nb||null==oa||(g.drawImage(oa.can,0,0,oa.width,oa.height,oa.xmin/r,oa.ymin/q,oa.width/r,oa.height/q),Ta(Cg,(oa.xmin+oa.xmax)/2/r,(oa.ymin+oa.ymax)/2/q,oa.tip,0),Vf=!0)}function za(b){Se=999;ec=jg;var a=tb[H].length-1;if(0==M[3])ec=xe[H];else{if(kg)fc=M[0];else if(b)Xf=0,fc=M[0],Se=0;else for(var d=0;d<a;d++)gc[0]=M[0]-Va[H][d],
0>gc[0]*(Va[H][d+1]-M[0]-1)||(gc[1]=M[1]-Wa[H][d],0>gc[1]*(Wa[H][d+1]-M[1]-1)||(gc[2]=M[2]-Xa[H][d],0>gc[2]*(Xa[H][d+1]-M[2]-1)||(vd=vf[H][d],Yf=gc[vd]/Pc[H][d][vd],Dh=Math.abs(gc[Eh[vd]]-Yf*Pc[H][d][Eh[vd]])+Math.abs(gc[Fh[vd]]-Yf*Pc[H][d][Fh[vd]]),Dh<Se&&(fc=d,Se=Dh,Xf=Yf))));if(999>Se)ec=Nc[H][fc],-1!=Wb[H][fc]&&(Gh=tb[H][fc],0!=Xf&&(Gh+=Xf*(tb[H][fc+1]-tb[H][fc])),ec=ec+" "+Gh.toFixed(Wb[H][fc])+" "+Mc[H][fc]);else if(b||0<Bd){var c=-1;if(b)c=M[0];else for(d=0;d<a;d++)if(Math.abs(M[0]-Va[H][d])<
Bd&&Math.abs(M[1]-Wa[H][d])<Bd&&Math.abs(M[2]-Xa[H][d])<Bd){c=d;break}-1!=c&&(ec=Nc[H][c],-1!=Wb[H][c]&&(ec=ec+" "+tb[H][c].toFixed(Wb[H][c])+" "+Mc[H][c]))}}"hide"!=ec&&Ta(Lh,T-10,P,ec,1)}function m(){if(Tc)try{G.clearRect(0,0,R,V);G.globalAlpha=1;if(!Ng)if(sd&&null!=$b&&0<=S&&$b[S].gotit)G.drawImage($b[S],O*la[S],N*la[S],Za*la[S],Ya*la[S],0,0,R,V);else if(Da[v].gotit&&(null!=gf?zd(Da[v],O,N,Za,Ya,gf):G.drawImage(Da[v],O,N,Za,Ya,0,0,R,V)),null!=Aa&&(G.globalAlpha=1,Da[v].gotit))for(var b=0;b<Aa.length;b+=
4)G.drawImage(Da[v],Aa[b],Aa[b+1],Aa[b+2],Aa[b+3],Aa[b]/r,Aa[b+1]/q,Aa[b+2]/r,Aa[b+3]/q);if(0<Z){for(b=0;b<Z;b++){var a=null!=Fc?Fc[b]:b;!jf[a]&&C[a].checked&&C[a].showMe&&(null!=qe&&(G.globalAlpha=qe[a]),sd&&0<=S&&null!=sa&&void 0!=sa[a]&&sa[a][S][v].gotit?G.drawImage(sa[a][S][v],O*la[S],N*la[S],Za*la[S],Ya*la[S],0,0,R,V):I[v][a].gotit&&(null==Gc||1===Gc[a]?null!=Dc&&0<=Dc[a]?zd(I[v][a],O,N,Za,Ya,Dc[a]):G.drawImage(I[v][a],O,N,Za,Ya,0,0,R,V):0===Gc[a]&&G.drawImage(I[v][a],0,0,ma,fa,0,0,R,V)))}if(null!=
pb)for(G.globalAlpha=1,b=0;b<Z;b++)if(a=null!=Fc?Fc[b]:b,I[v][a].gotit&&(wg[a]||C[a].checked)&&pb[a])for(var d=0;d<Y[a].length;d++)G.drawImage(null!=I[v][a].origImage?I[v][a].origImage:I[v][a],Y[a][d][0],Y[a][d][1],Y[a][d][2],Y[a][d][3],Y[a][d][4]/r,Y[a][d][5]/q,Y[a][d][2]/r,Y[a][d][3]/q);Nb&&K()}gh&&Rc();if(Nf)for(G.globalAlpha=1,a=0;a<kb;a++)if(null!=lb[a]){var c=lb[a];null!=c.icon&&(c.icon.style.visibility="hidden");if((-1==c.frame||c.frame==v)&&null!=c.icon&&c.icon.gotit&&(-1==c.overlay||-1!=
c.overlay&&C[c.overlay].checked)){if(c.isPan){c.zoomme&&(c.icon.style.width=Math.round(c.width*E)+"px",c.icon.style.height=Math.round(c.height*F)+"px",c.w2=Math.round(c.width*E/2),c.h2=Math.round(c.height*F/2));var h=Math.round(((c.x0-O)*E-c.w2)/r);var e=Math.round(((c.y0-N)*F-c.h2)/q);if(c.anim){if(0>=h+c.icon.width||h>=ma||0>=e+c.icon.height||e>=fa)continue;c.icon.style.top=e+"px";c.icon.style.left=h+"px"}else G.drawImage(c.icon,c.origX,c.origY,c.width,c.height,h,e,c.width/r,c.height/q)}else G.drawImage(c.icon,
c.origX,c.origY,c.width,c.height,c.x0/r,c.y0/q,c.width/r,c.height/q);c.icon.style.visibility="visible"}}}catch(n){ea("Error:"+n)}}function Jh(b,a,d){!te||d>=a||(G.save(),G.fillStyle="blue",G.strokeStyle="white",G.lineWidth=3,G.strokeRect(ze,Ae,200,18),G.fillRect(ze,Ae,d/a*200,18),a=G.measureText(b).width,G.fillStyle="orange",G.font="14px arial",G.fillText(b,ze+100-a/2,Ae+14),G.restore())}function Rc(){te&&Bb>Ea?Jh("Loading Images",Bb,Ea):(gh=!1,Ye&&(kc.style.visibility="hidden"));Ea>=Bb&&!xa&&ua(ja(v));
void 0!=Be&&Ea>=Bb&&Be(!0)}function ea(b){if(ie&&Xe&&!Xe.closed)try{Xe.document.write(b+"<br>")}catch(a){}}function Vh(){xa&&fb(Ef);fi=v==ja(u-1)?lg+hb:hb;m();setTimeout(function(){li(Vh)},fi)}function Te(b){for(;-180>b;)b+=360;for(;180<b;)b-=360;return b}function ji(){var b,a,d,c,h,e,g,k,l=Math.PI/180;this.init=function(c){for(var d=[],f=1;f<c.length;f++)d[f]=parseFloat(c[f]);a=d[1];b=d[4]/d[5];h=d[6];e=d[7];c=this.toXY(d[2],d[3]);h=c[0];e=c[1]};this.toXY=function(f,g){d=b*Te(g-a)*l-h;c=-b*f*l-e;
return[d,c]};this.toLatLon=function(c,d){g=-(d+e)/b/l;k=Te((c+h)/b/l+a);return[g,k]}}function ii(){var b,a,d,c,h,e,g,k,l,m,r,t,z,p,u,w,v,y,x,B,q,C,E,D,A,G,F,I,K,L,J,H=Math.PI/180;this.init=function(c){for(var d=[],e=1;e<c.length;e++)d[e]=parseFloat(c[e]);b=d[1];a=d[2];B=0==d[8]?!1:!0;q=d[6];C=q*q;E=C*C;D=E*C;A=E*E;g=d[5]/d[7];J=d[7];B?(k=Math.cos(H*b),l=Math.sin(H*b)):(k=Math.cos(-b*H),l=Math.sin(-b*H));v=k/Math.sqrt(1-C*l*l);x=(1-q*l)/(1+q*l);w=B?Math.tan(Math.PI/4-b*H/2)/Math.pow(x,q/2):Math.tan(Math.PI/
4- -b*H/2)/Math.pow(x,q/2);p=d[9];u=d[10];c=this.toXY(d[3],d[4]);p=c[0];u=c[1]};this.toXY=function(f,k){B?(h=H*f,e=H*(k-a)):(h=H*-f,e=H*(a-k));x=(1-q*Math.sin(h))/(1+q*Math.sin(h));y=Math.tan(Math.PI/4-h/2)/Math.pow(x,q/2);G=90!=b&&-90!=b?g*v*y/w:2*g*J*y/Math.sqrt(Math.pow(1+q,1+q)*Math.pow(1-q,1-q));d=G*Math.sin(e);c=G*Math.cos(e);B||(d=-d,c=-c);m=d-p;r=c-u;return[m,r]};this.toLatLon=function(e,f){d=e+p;c=f+u;G=Math.sqrt(d*d+c*c);y=90==b||-90==b?G*Math.sqrt(Math.pow(1+q,1+q)*Math.pow(1-q,1-q))/(2*
g*J):G*w/(g*v);F=Math.PI/2-2*Math.atan(y);I=Math.sin(2*F);K=Math.sin(4*F);L=Math.sin(6*F);h=F+I*C/2+5*I*E/24+I*D/12+13*I*A/360+7*K*E/48+29*K*D/240+811*K*A/11520+7*L*D/120+81*L*A/1120+4279*Math.sin(8*F)*A/161280;B?(t=h/H,z=Math.atan2(d,c)/H+a):(t=-h/H,z=-Math.atan2(-d,-c)/H+a);return[t,Te(z)]}}function ki(){var b,a,d,c,e,f,g,k,l,m,r,p,t,u,q,w,v,y,x,B,C,E,G,A,D,F,I,H,K,L,J,Q,O,N,P,M=Math.PI/180;this.init=function(c){for(var e=[],h=1;h<c.length;h++)e[h]=parseFloat(c[h]);b=e[1];a=e[2];d=e[3];A=e[7];D=
A*A;F=D*D;I=F*D;H=F*F;k=e[6]/e[8];l=Math.cos(M*b);m=Math.cos(M*a);p=Math.sin(b*M);r=Math.sin(a*M);C=l/Math.sqrt(1-D*p*p);E=m/Math.sqrt(1-D*r*r);x=Math.sqrt((1-p)/(1+p)*Math.pow((1+A*p)/(1-A*p),A));B=Math.sqrt((1-r)/(1+r)*Math.pow((1+A*r)/(1-A*r),A));J=(Math.log(C)-Math.log(E))/(Math.log(x)-Math.log(B));Q=C/(J*Math.pow(x,J));N=k*Q*Math.pow(x,J);v=e[9];y=e[10];c=this.toXY(e[4],e[5]);v=c[0];y=c[1]};this.toXY=function(a,b){f=M*a;g=M*Te(b-d);P=Math.sin(f);G=Math.sqrt((1-P)/(1+P)*Math.pow((1+A*P)/(1-A*
P),A));L=k*Q*Math.pow(G,J);O=J*g;c=L*Math.sin(O);e=N+L*Math.cos(O);t=c-v;u=e-y;return[t,u]};this.toLatLon=function(a,b){c=a+v;e=b+y;L=Math.abs(J)/J*Math.sqrt(c*c+(N-e)*(N-e));G=Math.pow(L/(k*Q),1/J);K=Math.PI/2-2*Math.atan(G);O=0>J?Math.atan(-c/(e-N)):Math.atan(c/(N-e));g=O/J;f=K+(D/2+5/24*F+I/12+13/360*H)*Math.sin(2*K)+(7/48*F+29/240*I+811/11520*H)*Math.sin(6*K)+(7/120*I+81/1120*H)*Math.sin(6*K)+4279/161280*H*Math.sin(8*K);q=f/M;w=Te(d-g/M);return[q,w]}}var ng,V,R,fa,ma,r,q,Yg,Zg,Db,Eb,kc,Ye,ka,
ie,Of,Xe,wc,Zf,hf=!1,y,A,Cf,Df,Ua,sc,kd,nb,G,Qa,mc,g,Pd,Bf,Hc,mf,se,fh,nf,tc,u,ra,Rg,Z,jf,Qb,Fc,ca,uc,Rb,gd,ba,Dg,Da,I,C,qe,Td,Cb,Ch,Ah,Bh,dd,Ed,pg,J,qg,$f,Hh,T,P,B,x,pa,qa,Za,Ya,O,N,Vd,gb,vc,Uh,xa,Oa,Fe,v,Ne,Ef,be,rc,jd=!0,oe,ag,je,e,hb,Tb,Jc,Be,qf,lg,fi,Dd,wa,ld,Ec,ob,La,Zb,Qc,Sd,zf,Ce,gf,ye,Qd,th,$c,bb,Pf,Qf,Rf,Sf,Zh,dc,Dc,Na,rd,Ie,Je,qh,wb,uh,rh,nh,oh,ph,Fd,og,lb,kb,Nf,of,uf,ha,Oc,ae,ch,ub,Ca,M,bg,Ma,De,jb,md,Af,Rd,oa,Vf,oc,cd,la,S,$b,Sc,sa,Fa,sd,$a,Ga,yc,Mf,Ke,Zc,Lf,Tc,bd,Ab,sb,rb,Fb,Vb,Ub,pe,
Vc,vb,qd,ue,rf,ve,Xg,na,Wh,hh,ci,bi,di,ac,cb,Pa,Jb,xb,td,xh,Vg,yh,zh,Wg,Mh,qb,ce,Pe,de,Ih,Nd,xf,wh,Wf,ud,U,Me,Yb,re,xg,pc,Gd,Hd,ed,yg,zg,Yh,Jf,Kf,Hf,If,Xd,t,Gf,lh,cc,mh,ia,Gb,Yc,Yd,Xc,Wc,He,Xh,$d,Zd,xc,Hb,ih,jh,va,Eg,hd,E,F,Ee,Le,Ug,qc,Md,Tg,Sg,ta,Ic,id,Ue,pf,rg=!1,sg,tg,ug,kf,vg,Ud,ib,Ge,Wd,yf,bc,lc,Qe,Re,hg,le,Oe,Tf,vh,Uf,dh=!0,eh,ee,fe,Kh,ig,af,ya,$e,me,Uc,Bc,ke,gg,Cg,nd,od,Ze,dg,eg,fg,Xb,ab,ei,wf,bh,Rh,Sh,Aa,Ib,sh,Gc,pb,Y,wg,Ff,we,Kc,Og,Qg,Pg,nc,Nb,pd,ne,Lc,Mc,Nc,Wb,vd,Se,Lh,jg,Bd,kg,bf,lf,Ag,
Bg,fd,$h,ai,fc,Xf,Yf,Eh,Fh,gc,H,Dh,ec,Gh,tb,w,Pc,ah,Va,Wa,Xa,Od,vf,xe,gi,Cd,cf,Cc,te,df,ef,ff,Ob,Pb,mg,gh,ze,Ae,Ea,Bb,Id,Ng,Fg,Jd,Hg,Kd,Jg,Gg,Ig,Mg,Kg,Ld,Lg,Ad,Sb,mi="N NNE NE ENE E ESE SE SSE S SSW SW WSW W WNW NW NNW N".split(" "),li=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(b,10)},p=function(b){return document.createElement(b)},D=function(b,a){if(null!=b)return 0==b.trim().toLowerCase().indexOf(a)},
Th=function(b,a){if(null!=b)return b=b.trim(),b.lastIndexOf(a)===b.length-1},Qh=function(b){void 0==Zf&&(Zf=p("textarea"));Zf.innerHTML=b;return Zf.value},kh=function(b,a,d){var c=p("select");c.style.width="70px";c.style.margin="5px";for(var e=0;e<b.length;e++){var f=p("option");f.innerHTML=b[e];f.value=a[e];c.add(f)}c.addEventListener("change",d,!1);return c},Ph=function(b){b=b.split(",");ca=Array(u);for(var a=0;a<b.length;a++){var d=b[a].split("&");Z=b.length;for(var c=0;c<u;c++)0===a&&(ca[c]=Array(Z)),
ca[c][a]=d[c].trim(),null!=Sb?ca[c][a]=(Sb+ca[c][a]).trim():null!=ba&&(ca[c][a]=(ba+ca[c][a]).trim())}bd=!1},Nh=function(b){b=b.split(",");u=b.length;ra=Array(u);for(var a=0;a<u;a++)ra[a]=null!=ba?ba+b[a].trim():b[a].trim();bd=!1;u>Z&&(Z=0)},Oh=function(b,a,d){var c=b;null!=ba&&(c=ba+b);ra=Array(u);for(var h=0;h<u;h++){b=h*d+a;if(0<=c.indexOf("*"))ra[h]=c.replace("*",b);else if(0<=c.indexOf("?")){for(var f=c;0<=f.lastIndexOf("?");){var g=f.lastIndexOf("?");f=f.substring(0,g)+b%10+f.substring(g+1);
b=Math.floor(b/10)}ra[h]=f}else ra[h]=c+h;ea("image filename = "+ra[h])}b=e.reverse_order;null!=b&&D(b,"t")&&ra.reverse();bd=!1;u>Z&&(Z=0)};HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(b,a,d){d=window.atob(this.toDataURL(a,d).split(",")[1]);for(var c=d.length,e=new Uint8Array(c),f=0;f<c;f++)e[f]=d.charCodeAt(f);b(new Blob([e],{type:a||"image/png"}))}});this.setup=function(b,a,d){void 0==a&&(a="MORdivcan");eh=d;y=document.getElementById(a);
Ad="center";y.align=Ad;Ua=p("div");Ua.setAttribute("style","position:relative;border:0px;margin:0px;padding:0px;-webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none; -webkit-tap-heightlight-color:transparent;");nb=p("canvas");nb.setAttribute("style","position:absolute;top:0;left:0;z-index:1;");G=nb.getContext("2d");mc=p("canvas");mc.setAttribute("style","position:absolute;top:0;left:0;z-index:6;");g=mc.getContext("2d");g.imageSmoothingEnabled=!1;Pd=p("canvas");Pd.setAttribute("style",
"position:absolute;top:0;left:0;z-index:10;");Bf=Pd.getContext("2d");Bf.imageSmoothingEnabled=!1;sc=p("div");sc.setAttribute("style","position:absolute;top:0;left:0;z-index:5;overflow:hidden;border-width:0px;padding:0px;margin:0px;");kd=p("div");kd.setAttribute("style","position:absolute;top:0;left:0;z-index:10;overflow:hidden;border-width:0px;padding:0px;margin:0px;");kd.appendChild(Pd);ye=p("canvas");Ua.appendChild(kd);Ua.appendChild(nb);Ua.appendChild(mc);Ua.appendChild(sc);y.appendChild(Ua);ka=
new PEvs(Ua,HAniS.down,HAniS.up,HAniS.move,HAniS.drag,null,HAniS.canTip);y.setAttribute("tabindex",0);y.addEventListener("keyup",function(a){Gb||je||(ag=!1,a.preventDefault(),a.stopPropagation())},!1);y.addEventListener("keypress",function(a){Gb||je||(a.preventDefault(),a.stopPropagation())},!1);y.addEventListener("keydown",function(a){Gb||je||(a.preventDefault(),a.stopPropagation(),ag=a.ctrlKey?!0:!1,37==a.keyCode?(X(!1),fb(-1),m()):39==a.keyCode?(X(!1),fb(1),m()):32==a.keyCode?HAniS.toggleIsLooping():
82==a.keyCode&&a.altKey&&HAniS.resetZoom())},!1);kd.addEventListener("mouseenter",function(a){y.focus()},!1);y.style.outlineWidth="0px";y.style.outline="none";y.focus();vc=v=0;be=!1;Ef=1;Oa=xa=!0;kb=Z=u=0;oe=!0;Fc=null;rc=!0;hb=500;Tb=100;Jc=2E3;qf=30;lg=0;cf=6E4;Cc=null;Hc=Cd=!1;se=!0;tc=[];la=Dg=gd=Sb=ba=null;sd=!1;S=-1;id=!1;Le=Ee=F=E=1;Ue=!1;N=O=Ya=Za=qa=pa=x=B=P=T=0;Ug=!1;jd=dh=!0;Mf=Ye=hf=!1;Fd=-1;Na=[];ub=0;Nf=!1;ha=null;Oc=-1;uf=0;ae=!1;Ga=null;Ae=ze=Ea=Bb=0;ah=!1;H=0;Cb=nf=of=Tc=!1;Qe=Re=
ee=fe=0;Uc=lc=!1;ya=[];ya.push("default");ya.push("default");$e="default";od=!1;me="default";Xb=null;ab=[0,0];jb=yf=le=!1;cd=!0;oa=oc=null;vb=Vf=!1;ve=!0;af="default";Vd=!0;na=[];Nb=bf=!1;ne="default";Lc=!1;Eh=[1,0,0];Fh=[2,2,1];gc=[];nc=[];Ec=ld=cb=!1;re=Me=0;Ib=Df=Cf=A=wb=null;sh=0;Gb=je=ag=!1;a=p("canvas");a.height=1;a.width=1;Qa=a.getContext("2d");Qa.imageSmoothingEnabled=!1;Af=p("canvas");ie=!1;"string"===typeof b?0>b.indexOf("\n")?cg(b):l(b.split("\n")):l(b)};this.newBasenames=function(b,a,
d,c){Tc=!1;Oa=xa;X(!1);u=c;Oh(b,a,d);rc=!0;Ia()};this.newFilenames=function(b){Tc=!1;Oa=xa;X(!1);Nh(b);rc=!0;Ia()};this.newOverlayFilenames=function(b){Tc=!1;Oa=xa;X(!1);Ph(b);rc=!0;Ia()};this.newProbeTable=function(b){Lc=!1;Q(b.trim())};this.reloadFOF=function(){ea("reload FoF = "+Cc);Ve("r");bd?hi(gi,!1):(Oa=null==Fe?!0:xa,rc=!0,Ia())};this.getFOF=function(){var b=e.file_of_filenames.trim();HAniS.newFOF(null!=gd?gd+b:b,!0)};this.newFOF=function(b,a){HAniS.resetZoom();hi(b,a)};var hi=function(b,
a){var d,c,e,f,g=new XMLHttpRequest,k,l,m,r,p,t,q,v=null,w=!1;ch=ub;Tc=!1;Oa=xa;X(!1);a&&ua(vc);ub=u=0;ra=[];J=Ma=null;Hh=[];for($f=null;sc.hasChildNodes();)sc.removeChild(sc.lastChild);De=0;sd=jb=md=!1;sa=Sc=$b=null;Fa=[];yc=-1;ca=[];var x=!1;if(null==qb||null!=Nd)qb=[];ea("new FOF="+b);cb&&(null!=ac&&(L(ac,!0,"extrap on"),y.style.cursor="default",X(Oa),Pa=-1),cb=!1,K());vb&&(null!=Vc&&(L(Vc,!0,"mark on"),y.style.cursor="default",X(Oa),qd=-1),vb=!1,K());g.onload=function(){var a=this.responseText.split("\n");
for(d=0;d<a.length;d++)if(!(2>a[d].length)&&(k=a[d].trim(),ea("FOF: "+k),0!=k.indexOf("#")))if(0==k.indexOf("frame_labels"))p=k.split("="),$a=p[1].split(",");else if(0==k.indexOf("redirect"))for(p=k.split("="),q=p[1].split(","),$f=q[0].trim(),c=1;c<q.length;c++){var b=parseInt(q[c],10)-1;Hh[b]=!0}else if(0==k.indexOf("slice")){p=k.split("=");q=p[1].split(",");J=[];for(c=0;c<q.length;c++)J[c]=parseInt(q[c],10);J[2]=J[2]-J[0]+1;J[3]=J[3]-J[1]+1;4<J.length&&(J[6]=J[6]-J[4]+1,J[7]=J[7]-J[5]+1)}else if(0==
k.indexOf("fof_extension"))p=k.split("="),v=p[1].trim();else if(0==k.indexOf("probe_table"))p=k.split("="),Lc=!1,Q(p[1].trim());else if(0==k.indexOf("image_base"))p=k.split("="),ba=p[1].trim();else if(0==k.indexOf("overlay_base"))p=k.split("="),Sb=p[1].trim();else if(0==k.indexOf("high_res_basemap")){p=k.split("=");q=p[1].split(",");Sc=[];for(c=0;c<q.length;c++)Sc[c]=q[c].trim(),null!=ba&&(Sc[c]=ba+Sc[c]);sd=!0}else if(0==k.indexOf("high_res_overlay"))for(p=k.split("="),t=p[1].split("&"),e=0;e<t.length;e++){q=
t[e].split(",");yc=parseInt(q[0].trim(),10)-1;Fa[yc]=[];for(c=1;c<q.length;c++)Fa[yc][c-1]=q[c].trim(),Th(Fa[yc][c-1],"/")||(null!=Sb?Fa[yc][c-1]=Sb+Fa[yc][c-1]:null!=ba&&(Fa[yc][c-1]=ba+Fa[yc][c-1]));sd=!0}else if(0==k.indexOf("high_res_zoom")){p=k.split("=");q=p[1].split(",");la=[];for(c=0;c<q.length;c++)la[c]=parseFloat(q[c].trim());Sa()}else if(0==k.indexOf("hoverzone"))zc(k);else if(0==k.indexOf("hotzone"))ad(k);else if(0==k.indexOf("hotspot"))w||(lb=null,kb=0,w=!0),Kb(k);else if(0==k.indexOf("toggle_onoff"))p=
k.split("="),Ke=p[1].split(",");else if(0==k.indexOf("coordinates"))p=k.split("="),yb(p[1]);else if(0==k.indexOf("map_scale"))p=k.split("="),q=p[1].split(","),Bc=parseFloat(q[0]),ke=1<q.length?parseFloat(q[1]):Bc;else if(0==k.indexOf("times")){p=k.split("=");q=p[1].split(",");for(d=0;d<q.length;d++)qb[d]=parseInt(q[d].trim(),10);x=!0}else{null!=Nd&&(b=k.match(Nd),null!=b&&2==b.length?(qb.push(parseInt(b[1],10)),ea("+ + + Extrap time = "+b[1]),x=!0):ea("+ + + Cannot parse times using "+Nd+" from line: "+
k));e=k.indexOf(" ");0>e&&(e=k.length);ra[u]=k.substring(0,e).trim();null!=ba&&(ra[u]=ba+ra[u]);k=k.substring(e+1);b=k.indexOf('"');0<=b&&(null==$a&&($a=[]),e=k.substring(b+1),b=e.indexOf('"'),0<=b&&($a[u]=e.substring(0,b),0==u&&(Ga.innerHTML=$a[0])));ca[u]=[];b=k.indexOf("overlay");if(0<=b)for(l=k.substring(b),b=l.indexOf("="),0>b&&ea("Cannot find a = sign in "+l),m=l.substring(b+1),l=m.trim(),m=l.split(","),Z=m.length,ea("numOverlays set to "+Z),f=0;f<m.length;f++)ca[u][f]=m[f].trim(),null!=$f&&
Hh[f]?ca[u][f]=($f+ca[u][f]).trim():null!=Sb?ca[u][f]=(Sb+ca[u][f]).trim():null!=ba&&(ca[u][f]=(ba+ca[u][f]).trim());u+=1}x&&Ha(qb);null!=v?(a=new XMLHttpRequest,a.onload=function(){var a=this.responseText.split("\n");for(d=0;d<a.length;d++)2>a[d].length||(r=a[d].trim(),ea("ext_FOF: "+r),0!=r.indexOf("#")&&(0==r.indexOf("hotzone")?ad(r):0==r.indexOf("hotspot")&&Kb(r)));Ra()},a.onerror=function(){Ra()},a.open("get",v+"?"+Math.round(1E5*Math.random()),!0),a.send()):Ra()};gi=b;g.open("get",b+"?"+Math.round(1E5*
Math.random()),!0);g.send()};this.setWindowSize=function(b,a){if(null!=y){y.style.height=a+"px";y.style.width=b+"px";y.style.padding="0px";a=a-(null!=Cf?Cf.offsetHeight:0)-(null!=Df?Df.offsetHeight:0)-(null!=wb?wb.offsetHeight:0)-sh*(null!=Ib?Ib.offsetHeight:0);a>fa&&(a=fa);var d=a*ma/fa;d>b&&(d=b,a=b*fa/ma);a=Math.floor(a);d=Math.floor(d);jd||(wd(d,a),K())}};this.drag=function(b){vb||(T=ka.getX(),P=ka.getY(),Gb?(b=t.length-1,t[b].xe=T,t[b].ye=P,t[b].xp.push(T),t[b].yp.push(P),t[b].size=Math.round(Math.sqrt(Math.pow(T-
t[b].x,2)+Math.pow(P-t[b].y,2)))):(B=T*r,x=P*q,Uc=Cb=!1,lc&&(!le||le&&b.shiftKey)?(ee=B,fe=x,Uc=!0):(ta&&F!=Le?(O=pa-B/E,N=qa-x/F,Ac(),pa=Math.round(O+B/E),qa=Math.round(N+x/F)):vb||cb||!jb||(oa=null,cd&&0<=B&&0<=x&&(M=Rd.getImageData(B,x,1,1).data,0!=M[3]&&(oa=Ma[M[3]-1]))),Ue=!0,m())),K())};this.resetZoom=function(){E=Ee;F=Le;S=-1;null!=va&&(L(va,!0,"zoom on"),ta=!1);pa=B;qa=x;N=O=0;Ya=fa;Za=ma;Sa();m();md&&(jb=!0)};this.canTip=function(){var b;Cb=!1;T=ka.getX();B=T*r;P=ka.getY();x=P*q;if(!((vb||
cb)&&x<zh&&x>yh&&B>xh)){pa=Math.round(O+B/E);qa=Math.round(N+x/F);if(0!=ub)for(b=0;b<ub;b++)if(Ca[b].overlay>=Z)ea(" Error...hotzone overlay # "+Ca[b].overlay+" > number of overlays = "+Z);else if(C[Ca[b].overlay].checked&&(Qa.clearRect(0,0,1,1),Qa.drawImage(I[v][Ca[b].overlay],pa,qa,1,1,0,0,1,1),M=Qa.getImageData(0,0,1,1).data,bg=(M[0]<<16)+(M[1]<<8)+M[2],bg==Ca[b].color)){Cb=!0;Ah=T;Bh=P;Ch=Ca[b].tip;break}if(0!=kb)for(b=kb-1;0<=b;b--)if(null!=lb[b]){var a=lb[b];if(-1==a.frame||a.frame==v)if(-1==
a.overlay||C[a.overlay].checked){var d=!1;if(a.isPan)if(a.isIcon){var c=(a.x0-O)*E-a.w2;var e=(a.y0-N)*F-a.h2;B>c&&B<c+a.width&&x>e&&x<e+a.height&&(d=!0)}else c=(a.x0-O)*E,e=(a.y0-N)*F,B>c&&B<c+a.width*E&&x>e&&x<e+a.height*F&&(d=!0);else B>a.x0&&B<a.x1&&x>a.y0&&x<a.y1&&(d=!0);if(d&&null!=a.tip){Cb=!0;Ah=T;Bh=P;Ch=lb[b].tip;break}}}K()}};this.move=function(){if(!cb&&jb&&(oa=null,cd)){var b=ka.getX()*r,a=ka.getY()*q;0<=b&&0<=a&&(M=Rd.getImageData(b,a,1,1).data,0!=M[3]&&(oa=Ma[M[3]-1]))}cb&&2<=Pa&&(T=
ka.getX(),B=T*r,P=ka.getY(),x=P*q);K()};this.down=function(){Cb&&(Cb=!1,K());T=ka.getX();B=T*r;P=ka.getY();x=P*q;Qe=B;Re=x;ee=Qe;fe=Re;pa=Math.round(O+B/E);qa=Math.round(N+x/F);Ue=!1;if(Gb){var b={};b.x=T;b.y=P;b.xe=T;b.ye=P;b.xp=[T];b.yp=[P];b.type=$d.value;b.color=Zd.value;b.width=xc.value;b.text=Hb.value;b.size=0;t.push(b)}};this.up=function(b){Cb=!1;if(!Gb){if(cb||vb){T=ka.getX();B=T*r;P=ka.getY();x=P*q;if(vb){qd=1;if(0<qd&&x/q<di){if(B/r>ci){na.pop();na.pop();0==na.length&&(qd=0);K();return}if(B/
r<bi){K();b=window.open("","Mark Points");b.document.write("<div>Marked Points<br>");for(var a=[],d=0;d<na.length;d+=2)pa=O+na[d]/E,qa=N+na[d+1]/F,Lb(),b.document.write(ab[0].toFixed(4)+","+ab[1].toFixed(4)+"<br>"),0==d&&(a[0]=ab[0],a[1]=ab[1]);ve&&b.document.write(a[0].toFixed(4)+","+a[1].toFixed(4)+"<br>");return}}na.push(B);na.push(x);K();return}if(3>Pa)if(Jb[Pa]=B,xb[Pa]=x,td[Pa]=xf[v],0==Pa)Pa=1,ua(ja(u-1)),Me=1,fd=null;else{Ih=td[1]-td[0];Pe=(Jb[1]-Jb[0])/Ih;de=(xb[1]-xb[0])/Ih;if(null!=lf&&
null!=Bc){d=Pe*Bc;var c=de*ke;a=Math.round(60*Math.sqrt(d*d+c*c));d=Math.atan2(d,-c)/.0174533;0>d&&(d+=360);fd=Ag+mi[Math.round(d/22.5)]+" at "+a+" "+Bg;$h=Jb[0];ai=0<de?xb[0]-15:xb[0]+30}a=parseInt(Hd,10);U=Math.round(Math.abs(4*(a+4)/Pe));ud=Math.round(Math.abs(2*(a+4)/de));ud<U&&(U=ud);120<U?U=120*Math.floor(U/120)+60:90<U?U=120:60<U?U=90:30<U?U=60:15<U?U=30:10<U?U=15:5<U?U=10:2<U?U=5:0==U&&(U=1);ud=td[1]/U*U+U;ce=1;zg&&(ce=-1);wh=Pe*U;Wf=de*U;ua(ja(u-1));Pa=3;Me=2}else if(x/q<zh&&x/q>yh&&B/r>
xh&&3==Pa){yd();K();return}K()}if(Uc)Uc=!1,K();else if(null!=bc&&ta&&(lc=!1,L(bc,!0,"distance on")),Ue)Ue=!1;else if(b.altKey)HAniS.resetZoom();else if(jb&&null!=oa&&Vf)Mb(oa,"z");else{T=ka.getX();B=T*r;P=ka.getY();x=P*q;if(0!=ub)for(a=0;a<ub;a++)if(Ca[a].overlay>=Z)ea(" Error...hotzone overlay # "+Ca[a].overlay+" > number of overlays = "+Z);else if(C[Ca[a].overlay].checked&&(Qa.clearRect(0,0,1,1),Qa.drawImage(I[v][Ca[a].overlay],Math.floor(pa),Math.floor(qa),1,1,0,0,1,1),M=Qa.getImageData(0,0,1,
1).data,bg=(M[0]<<16)+(M[1]<<8)+M[2],bg==Ca[a].color)){Mb(Ca[a],"z");return}if(0!=kb)for(a=kb-1;0<=a;a--)if(null!=lb[a]){var e=lb[a];if(!(-1!=e.frame&&e.frame!=v||e.fromfile||-1!=e.overlay&&!C[e.overlay].checked)){var f=!1;e.isPan?e.isIcon?(d=(e.x0-O)*E-e.w2,c=(e.y0-N)*F-e.h2,B>d&&B<d+e.width&&x>c&&x<c+e.height&&(f=!0)):(d=(e.x0-O)*E,c=(e.y0-N)*F,B>d&&B<d+e.width*E&&x>c&&x<c+e.height*F&&(f=!0)):B>e.x0&&B<e.x1&&x>e.y0&&x<e.y1&&(f=!0);if(f){Mb(lb[a],"s");return}}}ta&&(jb=!1,Ka(b.ctrlKey||ag||b.which&&
3==b.which||b.button&&2==b.button));m();K()}}};this.wheel=function(b){Rg?fb(b):ta&&(T=ka.getX(),B=T*r,P=ka.getY(),x=P*q,pa=Math.round(O+B/E),qa=Math.round(N+x/F),Ka(-1==b))};this.toggleAutoRefresh=function(){Cd?(L(Kc,!1,"autorefresh off"),null!=Cc&&clearInterval(Cc),Cd=!1):(L(Kc,!0,"autorefresh on"),Cc=setInterval("HAniS.reloadFOF();",cf),Cd=!0)};this.toggleLoopRock=function(){be?(L(Ud,!0,"looprock rock"),be=!1):(L(Ud,!1,"looprock loop"),be=!0)};this.toggleExtrap=function(){cb?(null!=ac&&(L(ac,!0,
"extrap on"),y.style.cursor=ya.pop(),null!=Ab&&(Ab.disabled=!1),X(Oa),ta=Sg,Pa=-1),cb=!1,K()):(null!=ac&&(cb=!0,fd=null,ya.push(y.style.cursor),y.style.cursor="crosshair",L(ac,!1,"extrap off"),Oa=xa,null!=Ab&&(Ab.disabled=!0),xa=!1,Sg=ta,ta=!1,HAniS.resetZoom(),yd(),K()),m())};this.doEnhance=function(b){if(ld||Ec){var a=La[0].height,d=La[0].width;b=parseInt(wa.value,10);0<=b?(Pf=Va[b],Qf=Wa[b],Rf=Xa[b],Sf=Od[b],nc[ob]=b):nc[ob]=null;var c=a*d*4;for(d=0;d<Zb.length;d++)if(La[d].gotit){La[d].gotit=
!1;var e=Ce[d].data;var f=zf[d];if(0>b)for(a=0;a<c;a+=4)e[a]=f[a],e[a+1]=f[a+1],e[a+2]=f[a+2],e[a+3]=f[a+3];else for(a=0;a<c;a+=4)bb=f[a],bb===f[a+1]&&bb===f[a+2]&&(e[a]=Pf[bb],e[a+1]=Qf[bb],e[a+2]=Rf[bb],e[a+3]=Sf[bb]);Qc[d].putImageData(Ce[d],0,0);La[d].gotit=!0}}};this.overClick=function(b){var a;if(b.target.checked)for(a=0;a<C.length;a++)b.target!=C[a]&&0!=b.target.name&&b.target.name==C[a].name&&(C[a].checked=!1);cd=!0;for(a=0;a<Rb.length;a++)b.target!=C[a]&&Ja(a),null!=oc&&!oc[a]&&C[a].checked&&
(cd=!1),null!=wa&&a===ob&&(wa.disabled=!C[a].checked);m()};this.toggleIsLooping=function(){xa?(xa=!1,L(Ab,!0,"startstop start")):(xa=!0,L(Ab,!1,"startstop stop"))};this.toggleZooming=function(){ta?(HAniS.resetZoom(),L(va,!0,"zoom on")):(L(va,!1,"zoom off"),ta=!0,null!=bc&&(lc=!1,L(bc,!0,"distance on")),md&&(jb=!0),cb&&HAniS.toggleExtrap())};this.togclick=function(b){var a=rh.getX();rh.getY();for(var d=uh,c=0;c<Na.length;c++){if(a>d&&a<d+rd){if(b.shiftKey){0<=Na[c]&&(X(!1),ua(c));break}b=0;0<=Na[c]&&
(b=-1);eb(c,b);break}d=d+rd+Je}};this.doneLoading=function(b){Be=b};this.frameChanged=function(b){Ne=b};this.getFrame=function(){return v};this.showFrame=function(b){ua(ja(b))}};
