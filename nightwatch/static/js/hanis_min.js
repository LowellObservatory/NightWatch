var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,n,A){if(h==Array.prototype||h==Object.prototype)return h;h[n]=A.value;return h};
$jscomp.getGlobal=function(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var n=0;n<h.length;++n){var A=h[n];if(A&&A.Math==Math)return A}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(h,n){var A=$jscomp.propertyToPolyfillSymbol[n];if(null==A)return h[n];A=h[A];return void 0!==A?A:h[n]};$jscomp.polyfill=function(h,n,A,I){n&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(h,n,A,I):$jscomp.polyfillUnisolated(h,n,A,I))};
$jscomp.polyfillUnisolated=function(h,n,A,I){A=$jscomp.global;h=h.split(".");for(I=0;I<h.length-1;I++){var C=h[I];if(!(C in A))return;A=A[C]}h=h[h.length-1];I=A[h];n=n(I);n!=I&&null!=n&&$jscomp.defineProperty(A,h,{configurable:!0,writable:!0,value:n})};
$jscomp.polyfillIsolated=function(h,n,A,I){var C=h.split(".");h=1===C.length;I=C[0];I=!h&&I in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Za=0;Za<C.length-1;Za++){var w=C[Za];if(!(w in I))return;I=I[w]}C=C[C.length-1];A=$jscomp.IS_SYMBOL_NATIVE&&"es6"===A?I[C]:null;n=n(A);null!=n&&(h?$jscomp.defineProperty($jscomp.polyfills,C,{configurable:!0,writable:!0,value:n}):n!==A&&(void 0===$jscomp.propertyToPolyfillSymbol[C]&&($jscomp.propertyToPolyfillSymbol[C]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(C):
$jscomp.POLYFILL_PREFIX+C),$jscomp.defineProperty(I,$jscomp.propertyToPolyfillSymbol[C],{configurable:!0,writable:!0,value:n})))};$jscomp.underscoreProtoCanBeSet=function(){var h={a:!0},n={};try{return n.__proto__=h,n.a}catch(A){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(h,n){h.__proto__=n;if(h.__proto__!==n)throw new TypeError(h+" is not extensible");return h}:null;
$jscomp.arrayIteratorImpl=function(h){var n=0;return function(){return n<h.length?{done:!1,value:h[n++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.makeIterator=function(h){var n="undefined"!=typeof Symbol&&Symbol.iterator&&h[Symbol.iterator];return n?n.call(h):$jscomp.arrayIterator(h)};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(h){if(!(h instanceof Object))throw new TypeError("Iterator result "+h+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(h){this.yieldResult=h};
$jscomp.generator.Context.prototype.throw_=function(h){this.abruptCompletion_={exception:h,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(h){this.abruptCompletion_={return:h};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(h){this.abruptCompletion_={jumpTo:h};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(h,n){this.nextAddress=n;return{value:h}};
$jscomp.generator.Context.prototype.yieldAll=function(h,n){h=$jscomp.makeIterator(h);var A=h.next();$jscomp.generator.ensureIteratorResultIsObject_(A);if(A.done)this.yieldResult=A.value,this.nextAddress=n;else return this.yieldAllIterator_=h,this.yield(A.value,n)};$jscomp.generator.Context.prototype.jumpTo=function(h){this.nextAddress=h};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(h,n){this.catchAddress_=h;void 0!=n&&(this.finallyAddress_=n)};$jscomp.generator.Context.prototype.setFinallyBlock=function(h){this.catchAddress_=0;this.finallyAddress_=h||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(h,n){this.nextAddress=h;this.catchAddress_=n||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(h){this.catchAddress_=h||0;h=this.abruptCompletion_.exception;this.abruptCompletion_=null;return h};$jscomp.generator.Context.prototype.enterFinallyBlock=function(h,n,A){A?this.finallyContexts_[A]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=h||0;this.finallyAddress_=n||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(h,n){n=this.finallyContexts_.splice(n||0)[0];if(n=this.abruptCompletion_=this.abruptCompletion_||n){if(n.isException)return this.jumpToErrorHandler_();void 0!=n.jumpTo&&this.finallyAddress_<n.jumpTo?(this.nextAddress=n.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=h};$jscomp.generator.Context.prototype.forIn=function(h){return new $jscomp.generator.Context.PropertyIterator(h)};
$jscomp.generator.Context.PropertyIterator=function(h){this.object_=h;this.properties_=[];for(var n in h)this.properties_.push(n);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var h=this.properties_.pop();if(h in this.object_)return h}return null};$jscomp.generator.Engine_=function(h){this.context_=new $jscomp.generator.Context;this.program_=h};
$jscomp.generator.Engine_.prototype.next_=function(h){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,h,this.context_.next_);this.context_.next_(h);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(h){this.context_.start_();var n=this.context_.yieldAllIterator_;if(n)return this.yieldAllStep_("return"in n?n["return"]:function(A){return{value:A,done:!0}},h,this.context_.return);this.context_.return(h);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(h){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],h,this.context_.next_);this.context_.throw_(h);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(h,n,A){try{var I=h.call(this.context_.yieldAllIterator_,n);$jscomp.generator.ensureIteratorResultIsObject_(I);if(!I.done)return this.context_.stop_(),I;var C=I.value}catch(Za){return this.context_.yieldAllIterator_=null,this.context_.throw_(Za),this.nextStep_()}this.context_.yieldAllIterator_=null;A.call(this.context_,C);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var h=this.program_(this.context_);if(h)return this.context_.stop_(),{value:h.value,done:!1}}catch(n){this.context_.yieldResult=void 0,this.context_.throw_(n)}this.context_.stop_();if(this.context_.abruptCompletion_){h=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(h.isException)throw h.exception;return{value:h.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(h){this.next=function(n){return h.next_(n)};this.throw=function(n){return h.throw_(n)};this.return=function(n){return h.return_(n)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(h,n){n=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(n));$jscomp.setPrototypeOf&&h.prototype&&$jscomp.setPrototypeOf(n,h.prototype);return n};
$jscomp.asyncExecutePromiseGenerator=function(h){function n(I){return h.next(I)}function A(I){return h.throw(I)}return new Promise(function(I,C){function Za(w){w.done?I(w.value):Promise.resolve(w.value).then(n,A).then(Za,C)}Za(h.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(h){return $jscomp.asyncExecutePromiseGenerator(h())};$jscomp.asyncExecutePromiseGeneratorProgram=function(h){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(h)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(h){if(h)return h;var n=function(C,Za){this.$jscomp$symbol$id_=C;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:Za})};n.prototype.toString=function(){return this.$jscomp$symbol$id_};var A=0,I=function(C){if(this instanceof I)throw new TypeError("Symbol is not a constructor");return new n("jscomp_symbol_"+(C||"")+"_"+A++,C)};return I},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(h){if(h)return h;h=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),A=0;A<n.length;A++){var I=$jscomp.global[n[A]];"function"===typeof I&&"function"!=typeof I.prototype[h]&&$jscomp.defineProperty(I.prototype,h,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return h},"es6",
"es3");$jscomp.iteratorPrototype=function(h){h={next:h};h[Symbol.iterator]=function(){return this};return h};
$jscomp.polyfill("Promise",function(h){function n(){this.batch_=null}function A(w){return w instanceof C?w:new C(function(E,Z){E(w)})}if(h&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return h;n.prototype.asyncExecute=function(w){if(null==this.batch_){this.batch_=[];var E=this;this.asyncExecuteFunction(function(){E.executeBatch_()})}this.batch_.push(w)};
var I=$jscomp.global.setTimeout;n.prototype.asyncExecuteFunction=function(w){I(w,0)};n.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var w=this.batch_;this.batch_=[];for(var E=0;E<w.length;++E){var Z=w[E];w[E]=null;try{Z()}catch(ka){this.asyncThrow_(ka)}}}this.batch_=null};n.prototype.asyncThrow_=function(w){this.asyncExecuteFunction(function(){throw w;})};var C=function(w){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var E=
this.createResolveAndReject_();try{w(E.resolve,E.reject)}catch(Z){E.reject(Z)}};C.prototype.createResolveAndReject_=function(){function w(ka){return function(pb){Z||(Z=!0,ka.call(E,pb))}}var E=this,Z=!1;return{resolve:w(this.resolveTo_),reject:w(this.reject_)}};C.prototype.resolveTo_=function(w){if(w===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(w instanceof C)this.settleSameAsPromise_(w);else{a:switch(typeof w){case "object":var E=null!=w;break a;case "function":E=
!0;break a;default:E=!1}E?this.resolveToNonPromiseObj_(w):this.fulfill_(w)}};C.prototype.resolveToNonPromiseObj_=function(w){var E=void 0;try{E=w.then}catch(Z){this.reject_(Z);return}"function"==typeof E?this.settleSameAsThenable_(E,w):this.fulfill_(w)};C.prototype.reject_=function(w){this.settle_(2,w)};C.prototype.fulfill_=function(w){this.settle_(1,w)};C.prototype.settle_=function(w,E){if(0!=this.state_)throw Error("Cannot settle("+w+", "+E+"): Promise already settled in state"+this.state_);this.state_=
w;this.result_=E;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};C.prototype.scheduleUnhandledRejectionCheck_=function(){var w=this;I(function(){if(w.notifyUnhandledRejection_()){var E=$jscomp.global.console;"undefined"!==typeof E&&E.error(w.result_)}},1)};C.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var w=$jscomp.global.CustomEvent,E=$jscomp.global.Event,Z=$jscomp.global.dispatchEvent;if("undefined"===typeof Z)return!0;
"function"===typeof w?w=new w("unhandledrejection",{cancelable:!0}):"function"===typeof E?w=new E("unhandledrejection",{cancelable:!0}):(w=$jscomp.global.document.createEvent("CustomEvent"),w.initCustomEvent("unhandledrejection",!1,!0,w));w.promise=this;w.reason=this.result_;return Z(w)};C.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var w=0;w<this.onSettledCallbacks_.length;++w)Za.asyncExecute(this.onSettledCallbacks_[w]);this.onSettledCallbacks_=null}};
var Za=new n;C.prototype.settleSameAsPromise_=function(w){var E=this.createResolveAndReject_();w.callWhenSettled_(E.resolve,E.reject)};C.prototype.settleSameAsThenable_=function(w,E){var Z=this.createResolveAndReject_();try{w.call(E,Z.resolve,Z.reject)}catch(ka){Z.reject(ka)}};C.prototype.then=function(w,E){function Z(Lb,$a){return"function"==typeof Lb?function(Mb){try{ka(Lb(Mb))}catch(Xb){pb(Xb)}}:$a}var ka,pb,tc=new C(function(Lb,$a){ka=Lb;pb=$a});this.callWhenSettled_(Z(w,ka),Z(E,pb));return tc};
C.prototype.catch=function(w){return this.then(void 0,w)};C.prototype.callWhenSettled_=function(w,E){function Z(){switch(ka.state_){case 1:w(ka.result_);break;case 2:E(ka.result_);break;default:throw Error("Unexpected state: "+ka.state_);}}var ka=this;null==this.onSettledCallbacks_?Za.asyncExecute(Z):this.onSettledCallbacks_.push(Z);this.isRejectionHandled_=!0};C.resolve=A;C.reject=function(w){return new C(function(E,Z){Z(w)})};C.race=function(w){return new C(function(E,Z){for(var ka=$jscomp.makeIterator(w),
pb=ka.next();!pb.done;pb=ka.next())A(pb.value).callWhenSettled_(E,Z)})};C.all=function(w){var E=$jscomp.makeIterator(w),Z=E.next();return Z.done?A([]):new C(function(ka,pb){function tc(Mb){return function(Xb){Lb[Mb]=Xb;$a--;0==$a&&ka(Lb)}}var Lb=[],$a=0;do Lb.push(void 0),$a++,A(Z.value).callWhenSettled_(tc(Lb.length-1),pb),Z=E.next();while(!Z.done)})};return C},"es6","es3");
$jscomp.iteratorFromArray=function(h,n){h instanceof String&&(h+="");var A=0,I=!1,C={next:function(){if(!I&&A<h.length){var Za=A++;return{value:n(Za,h[Za]),done:!1}}I=!0;return{done:!0,value:void 0}}};C[Symbol.iterator]=function(){return C};return C};$jscomp.polyfill("Array.prototype.keys",function(h){return h?h:function(){return $jscomp.iteratorFromArray(this,function(n){return n})}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(h){return h?h:function(n,A,I){var C=this.length||0;0>A&&(A=Math.max(0,C+A));if(null==I||I>C)I=C;I=Number(I);0>I&&(I=Math.max(0,C+I));for(A=Number(A||0);A<I;A++)this[A]=n;return this}},"es6","es3");$jscomp.typedArrayFill=function(h){return h?h:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
function PEvs(h,n,A,I,C,Za,w){var E,Z,ka,pb,tc,Lb,$a,Mb,Xb,ua,Yb,uc=0,Lc=0,Ye,tb=!1,md=!1,Mc=0,Zb=0,Nc=0,dc=0,ie,Dd,Ze=3,Oc=function(v){$a=v.target;for(Xb=Mb=0;$a;)Mb+=$a.offsetLeft-$a.scrollLeft,Xb+=$a.offsetTop-$a.scrollTop,$a=$a.offsetParent;uc=(tb?ie:v.pageX)-Mb-document.body.scrollLeft;Lc=(tb?Dd:v.pageY)-Xb-document.body.scrollTop};this.getX=function(){return uc};this.getY=function(){return Lc};this.setHysteresis=function(v){Ze=v};var T=function(v){v.preventDefault();v.stopImmediatePropagation?
v.stopImmediatePropagation():v.stopPropagation()},$e=function(v){Oc(v);Ye=uc;Ra=Lc;ha=!0;null!=va&&(pb=(new Date).getTime());null!=Ka&&Ka(v)},V=function(v){ha&&(Oc(v),ha=!1,null!=ec&&ec(v),null!=va&&(tc=(new Date).getTime(),Lb=tc-pb,300>Lb&&va(v)))},qb=function(v){Oc(v);Math.abs(uc-Ye)<Ze&&Math.abs(Lc-Ra)<Ze||(Ra=Ye=-9999,ha?null!=Cb&&Cb(v):null!=$b&&$b(v),null!=af&&Mf())};this.touchDown=function(v){ka=!0;if(1<v.targetTouches.length)return tb=!0,Yb&&(Zb=-1,T(v)),!1;E=v.changedTouches;Z=E[0];$e(Z)};
this.touchUp=function(v){0==v.targetTouches.length&&(tb=ka=!1);T(v);if(tb||md)return tb||(md=!1),!1;E=v.changedTouches;Z=E[0];V(Z)};this.touchMove=function(v){ka=!0;T(v);if(tb)return Yb&&(E=v.targetTouches,ie=(E[0].pageX+E[1].pageX)/2,Dd=(E[0].pageY+E[1].pageY)/2,md=!0,Nc=E[0].pageX-E[1].pageX,dc=E[0].pageY-E[1].pageY,Mc=Nc*Nc+dc*dc,Oc(v),Yb&&0<Zb&&30<Math.abs(Mc-Zb)&&Yb(0<Mc-Zb?1:-1),Zb=Mc),!1;E=v.changedTouches;Z=E[0];qb(Z)};this.pointUp=function(v){T(v);for(var ea=0;ea<ab.length;ea++)if(ab[ea].pointerId==
v.pointerId){ab.splice(ea,1);break}0==ab.length&&(ka=tb=!1);if(tb||md)return tb||(md=!1),!1;V(v);return!1};this.pointDown=function(v){T(v);ab.push(v);Zb=-1;ka=!0;1<ab.length?tb=!0:$e(v);return!1};this.pointMove=function(v){T(v);for(var ea=0;ea<ab.length;ea++)ab[ea].pointerId==v.pointerId&&(ab[ea]=v);if(tb||!md){if(tb)return ie=(ab[0].pageX+ab[1].pageX)/2,Dd=(ab[0].pageY+ab[1].pageY)/2,Oc(v),Yb&&(md=!0,Nc=ab[0].pageX-ab[1].pageX,dc=ab[0].pageY-ab[1].pageY,Mc=Nc*Nc+dc*dc,Yb&&0<Zb&&30<Math.abs(Mc-Zb)&&
Yb(0<Mc-Zb?1:-1),Zb=Mc),!1;qb(v);return!1}};this.mouseDown=function(v){ka||(T(v),$e(v))};this.clearDown=function(){ha=!1};this.mouseUp=function(v){ka||(T(v),V(v))};this.useWheel=function(v){h.addEventListener("wheel",this.mouseWheel,!0);Yb=v};this.mouseWheel=function(v){Oc(v);var ea=Math.max(-1,Math.min(1,-v.deltaY||-v.detail));T(v);Yb&&Yb(ea)};this.mouseClick=function(v){T(v);ha=!1};this.mouseMove=function(v){ka||(T(v),qb(v))};this.mouseDragged=function(v){ka||(T(v),Oc(v),null!=Cb&&Cb(v),null!=af&&
Mf())};var Mf=function(){clearTimeout(ua);ua=setTimeout(function(){af()},600)};var Ra=Ye=Lc=uc=0;var Ka=n;var ec=A;var $b=I;var Cb=C;var va=Za;var af=w;var ha=ka=!1;var ab=[];h.addEventListener("mousedown",this.mouseDown,!1);h.addEventListener("mouseup",this.mouseUp,!1);h.addEventListener("mousemove",this.mouseMove,!1);h.addEventListener("click",this.mouseClick,!1);h.addEventListener("touchstart",this.touchDown,!1);h.addEventListener("touchend",this.touchUp,!1);h.addEventListener("touchmove",this.touchMove,
!1);h.addEventListener("touchleave",this.touchUp,!1);h.addEventListener("touchcancel",this.touchUp,!1);h.addEventListener("contextmenu",function(v){v.preventDefault()},!1);h.style["touch-action"]="none";h.addEventListener("mouseout",function(v){ha||(Lc=uc=-1,null!=$b&&$b(v));ha=!1})};var HAniS=new function(){function h(b){var a,d;je=!0;if(b instanceof Array)for(f={},null!=mi&&(b=b.concat(mi)),a=0;a<b.length;a++){var c=b[a].trim();if(!(2>c.length)&&0!=c.indexOf("#")){var e=c.indexOf("=");if(!(1>e)){var k=c.substr(0,e).trim().toLowerCase();f[k]=c.substr(e+1).trim()}}}else f=b;Nf=!1;a=f.debug;null!=a&&("true"==a?(Og=window.open("","HAniSDebugInfo","scrollbars=yes,width=400,height=200"),Nf=!0,ea("HAniS Version 4.56")):Nf=!1);a=f.no_initial_focus;null!=a&&"false"!=a||J.focus();ac=
!0;D(f.set_className,"f")&&(ac=!1);ea("Is type of param an array = "+(b instanceof Array));a=f.divalign;null!=a&&(bf=a.trim(),J.align=bf);D(f.prevent_shortcuts,"t")&&(Of=!0);a=f.initial_message;null!=a&&(b=f.initial_message_style,null==b&&(b="background-color:red;top:10px;left:10px;height:100px;width:200px"),b="z-index:99;position:absolute;"+b,bc=x("div"),bc.setAttribute("style",b),bc.innerHTML=a,bc.addEventListener("click",function(p){bc.style.visibility="hidden";p.stopPropagation()},!1),bc.style.visibility=
"visible",Db.appendChild(bc),b=f.initial_message_timeout,null!=b&&("auto"==b?Pg=!0:(Pg=!1,b=parseInt(f.initial_message_timeout,10),2>b&&(b=2),setTimeout(function(){bc.style.visibility="hidden"},1E3*b))));ke=null;a=f.initial_enhancement;null!=a&&(ke=parseInt(a,10)-1);le=!1;Pf="X = ";Qf=" Y = ";a=f.coordinates;null!=a&&(C(a),le=!0,Pf="Lat = ",Qf=" Lon = ");c="green";e="white";k="12px Arial";var l=null,g=d=10,t=10;Qg=2;a=f.keyboard_propagate;null!=a&&D(a,"t")&&(Rf=!1);a=f.coordinates_display_style;null!=
a&&(b=a.split(","),c=b[0].trim(),e=b[1].trim(),k=b[2].trim(),3<b.length&&(Pf=b[3],Qf=b[4],Qg=parseInt(b[5],10),6<b.length&&(l=b[6].trim(),d=parseInt(b[7],10),g=parseInt(b[8],10),t=parseInt(b[9],10))));ni=new $b(c,e,k,l,d,g,t);Sf=Ed=null;null!=f.map_scale&&(Tf=fc=!0,b=f.map_scale.split(","),Ed=parseFloat(b[0]),Sf=1<b.length?parseFloat(b[1]):Ed);me=le?"km":" ";Uf=1;a=f.distance_unit;null!=a&&(me=a.trim(),D(me,"mi")&&(Uf=.621371192),D(me,"nm")&&(Uf=.539956803),D(me,"na")&&(Uf=.539956803));cf=null;a=
f.show_bearing;null!=a&&(cf=a.trim());a=f.divcan_style;null!=a&&a.trim();Rg="default";a=f.distance_cursor;null!=a&&(Rg=a.trim());Vf="default";a=f.location_cursor;null!=a&&(Vf=a.trim());Wf="default";a=f.probe_cursor;null!=a&&(Wf=a.trim());Sg="default";a=f.mark_cursor;null!=a&&(Sg=a.trim());D(f.active_slide,"t")&&(vc=!1,HAniS.toggleSliding());D(f.active_fade,"t")&&(nd=!1,HAniS.toggleFading());a=f.slidebar_style;null==a&&(a=f.fadebar_style);null!=a&&(b=a.split(","),Tg=b[0].trim(),Ug=parseInt(b[1],10),
Pc=parseInt(b[2],10),Eb=parseInt(b[3],10),wc=2,Vg=!1,5<=b.length&&(D(b[4],"r")&&(wc=0),D(b[4],"d")&&(wc=1),D(b[4],"t")&&(wc=2),D(b[4],"e")&&(wc=3),D(b[4],"n")&&(wc=4),-1!=b[4].indexOf("fill")&&(Vg=!0)),jb=0,6==b.length&&(jb=parseInt(b[5],10)));a=f.imagecan_style;null!=a&&(b=a.trim()+";position:absolute;top:0;left:0;",gc.setAttribute("style",b+"z-index:1;"),od.setAttribute("style",b+"z-index:12;"));c="blue";e="white";k="12px Arial";l=null;t=g=d=10;Wg=1;oi="white";a=f.distance_display_style;null!=a&&
(b=a.split(","),c=b[0].trim(),e=b[1].trim(),oi=5<=b.length?b[4].trim():e,k=b[2].trim(),Wg=parseInt(b[3],10),5<b.length&&(l=b[5].trim(),d=parseInt(b[6],10),g=parseInt(b[7],10),t=parseInt(b[8],10)));Mj=new $b(c,e,k,l,d,g,t);c="black";e="white";k="12px Arial";l=null;t=g=d=10;a=f.probe_display_style;null!=a&&(b=a.split(","),c=b[0].trim(),e=b[1].trim(),k=b[2].trim(),3<b.length&&(l=b[3].trim(),d=parseInt(b[4],10),g=parseInt(b[5],10),t=parseInt(b[6],10)));Nj=new $b(c,e,k,l,d,g,t);pi="Undefined";qi=!1;df=
0;Xg=!0;a=f.probe_hide;null!=a&&D(a,"f")&&(Xg=!1);a=f.probe_undefined;null!=a&&(b=a.split(","),pi=b[0].trim(),1<b.length&&(df=parseInt(b[1],10)+1),2<b.length&&(qi=!0));Yg=!1;f.probe_base_image&&(Yg=!0);a=f.active_probe;null!=a&&(Qc=!0);a=f.pause;null!=a&&(b=a.split(","),ri=parseInt(b[0],10),Fd=1<b.length?Xf=parseInt(b[1],10):Xf=0);a=f.auto_refresh;null!=a&&(Zg=6E4*parseInt(a,10),Gd=setInterval("HAniS.reloadFOF();",Zg),ef=!0);Yf=!1;si="#FFFFFF80";a=f.show_hotspots;null!=a&&(b=a.split(","),D(b[0],"t")&&
(Yf=!0),1<b.length&&(si=b[1]));$g=!1;D(f.center_hotspots,"t")&&($g=!0);ne=!1;D(f.enable_smoothing,"t")&&(ne=!0);ti="low";a=f.smoothing_quality;null!=a&&(ti=a);Zf=!0;D(f.check_image_size,"f")&&(Zf=!1);ui=!1;a=f.sprites;if(null!=a){b=a.split(",");ah=new Image;bh=[];ch=[];Rc=[];Sc=[];if("row"==b[1].trim().toLowerCase())for(g=e=c=0,a=2;a<b.length;)for("row"==b[a].trim().toLowerCase()&&(c=0,e+=g,g=0,a+=1),d=parseInt(b[a],10),a+=1,k=parseInt(b[a],10),a+=1,l=parseInt(b[a],10),l>g&&(g=l),a+=1,t=0;t<d;t++)bh.push(c),
ch.push(e),Rc.push(k),Sc.push(l),c+=k;else for(e=!1,a=1;a<b.length;)bh.push(parseInt(b[a],10)),a+=1,ch.push(parseInt(b[a],10)),a+=1,a>=b.length?(c=0,e=!0):c=parseInt(b[a],10),0>c?(e=!0,Rc.push(Math.abs(c)),a+=1,c=parseInt(b[a++],10),Sc.push(Math.abs(c))):e?(Rc.push(Rc[Rc.length-1]),Sc.push(Sc[Sc.length-1])):(Rc.push(parseInt(b[a],10)),a+=1,Sc.push(parseInt(b[a],10)),a+=1);ah.onload=function(){ui=!0};ah.src=b[0]}a=f.overlay_labels;null!=a&&(Tc=a.split(","));a=f.nonstatic_prefix;vi=null!=a?a.trim():
"?";dh=null;a=f.auto_enhance_background;null!=a&&(dh=parseInt(a,10)-1);Hd=null;a=f.auto_enhance;if(null!=a)for(c=f.overlay_probe_table,b=a.split(","),Hd=Array(b.length),a=0;a<b.length;a++)"x"==b[a].trim().toLowerCase()?Hd[a]=-1:Hd[a]=parseInt(b[a].trim(),10)-1,null==c&&(pd[a]=Hd[a]);Id=!1;hc=-1;a=f.overlay_enhance;null!=a&&(Id=!0,hc=parseInt(a,10)-1);xc=null;qd=!0;a=f.overlay_allow_hoverzones;if(null!=a)for(b=a.split(","),xc=Array(b.length),a=0;a<b.length;a++)if(xc[a]=!0,D(b[a],"n")||D(b[a],"f"))xc[a]=
!1;fa=ca=null;Jd=wi=!1;a=f.window_size;null!=a&&(b=a.split(","),"div"==b[0]?Jd=!0:(fa=2*Math.floor(parseInt(b[0],10)/2),ca=2*Math.floor(parseInt(b[1],10)/2),bb=0==jb?ca/2:0>jb?ca+jb:jb,za=fa/2,void 0!=yc&&yc(.5)),wi=!0);eh=[];a=f.framenumber_index_values;null!=a&&(eh=a.split(","));zc=[];a=f.use_for_all_frames;if(null!=a)for(b=a.split(","),a=0;a<b.length;a+=2)zc[parseInt(b[a],10)]=parseInt(b[a+1],10)-1;ff=-1;a=f.skip_missing;null!=a&&(ff=parseInt(a,10));xi="#00000000";a=f.skip_missing_color;null!=
a&&(xi=a);$f=null;a=f.overlay_spacer;if(null!=a)for(b=a.split(","),$f=Array(b.length),a=0;a<b.length;a++)$f[a]=parseInt(b[a],10);a=f.overlay_probe_table;if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)"x"==b[a].trim().toLowerCase()?pd[a]=-1:pd[a]=parseInt(b[a],10)-1;fh=[];a=f.overlay_ontop;if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)fh[parseInt(b[a],10)-1]=!0;Uc=null;a=f.overlay_order;null==a&&(a=f.overlay_zorder);if(null!=a)for(b=a.split(","),Uc=Array(b.length),a=0;a<b.length;a++)Uc[parseInt(b[a],
10)-1]=a;Vc=null;a=f.overlay_links;if(null!=a)for(b=a.split(","),Vc=Array(b.length),a=0;a<b.length;a++)Vc[a]=parseInt(b[a],10);gh=[];pa=null;a=f.overlay_slice;if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)gh[parseInt(b[a],10)-1]=!0;yi=!0;D(f.slice_smoothing,"f")&&(yi=!1);oe=null;a=f.overlay_clear;if(null!=a)for(b=a.split(","),oe=Array(b.length),a=0;a<b.length;a++)oe[a]=b[a].trim().toLowerCase();zi=!1;a=f.transparency;null!=a&&(b=a.split(","),1==b.length?Ai=Bi=Ci=parseInt(b[0],10):(Ai=parseInt(b[0],
10),Bi=parseInt(b[1],10),Ci=parseInt(b[2],10)),zi=!0);hh=!1;a=f.transparency_list;if(null!=a){b=a.split(",");Di=[];for(a=0;a<b.length;a++)Di[parseInt(b[a].trim(),10)-1]=!0;hh=!0}ag=null;a=f.overlay_transparent_amount;if(null!=a)for(b=a.split(","),ag=Array(b.length),a=0;a<b.length;a++)ag[a]=parseFloat(b[a])/100;rd=null;a=f.overlay_zoom;if(null!=Tc&&null!=a)for(b=a.split(","),rd=Array(b.length),a=0;a<b.length;a++)if(rd[a]=1,D(b[a],"n")||D(b[a],"f"))rd[a]=0;else if(D(b[a],"d")||D(b[a],"h"))rd[a]=-1;
Nb=null;Ei=[];a=f.overlay_preserve_list;if(null!=Tc&&null!=a)for(b=a.split(","),Nb=Array(b.length),a=0;a<b.length;a++){Nb[a]=!0;if(D(b[a],"n")||D(b[a],"f"))Nb[a]=!1;if(D(b[a],"a")||D(b[a],"A"))Ei[a]=!0}ia=null;if(null!=Tc&&null!=Nb)for(b=f.overlay_preserve.replace(/&/g,",&,").split(","),c=f.overlay_preserve_position,null!=c&&(c=c.split(",")),e=0,ia=Array(Nb.length),a=k=0;a<Nb.length;a++)if(Nb[a]){ia[a]=[];l=0;do{ia[a][l]=[];for(d=0;4>d;d++)ia[a][l][d]=parseInt(b[k].trim(),10),k+=1;ia[a][l][2]=ia[a][l][2]-
ia[a][l][0]+1;ia[a][l][3]=ia[a][l][3]-ia[a][l][1]+1;null!=c?(ia[a][l][4]=parseInt(c[e],10),ia[a][l][5]=parseInt(c[e+1],10),e+=2):(ia[a][l][4]=ia[a][l][0],ia[a][l][5]=ia[a][l][1]);ia[a][l][6]=ia[a][l][4]+ia[a][l][2]-1;ia[a][l][7]=ia[a][l][5]+ia[a][l][3]-1;k<b.length&&"&"==b[k].trim()?(k+=1,l+=1,d=!0):d=!1}while(d)}bg=0;Fi=" ";sd="white";gf="transparent";hf="14pt arial";Gi=!1;a=f.times_label_style;null!=a&&(b=a.split(","),sd=b[0].trim(),1<b.length&&(bg=Math.floor(60*parseFloat(b[1]))),1<b.length&&(bg=
"?"==b[1].trim()||"auto"==b[1].trim().toLowerCase()?-Math.floor((new Date).getTimezoneOffset()):Math.floor(60*parseFloat(b[1]))),2<b.length&&(Fi=b[2].trim()),3<b.length&&(gf=b[3].trim()),4<b.length&&(hf=b[4].trim()),5<b.length&&-1!=b[5].trim().indexOf("t")&&(Gi=!0));0==sd.indexOf("0x")&&(sd="#"+sd.substring(2));0==gf.indexOf("0x")&&(gf="#"+gf.substring(2));pe=parseInt(hf,10);Oj=new $b("black","white",hf,"black",20,5,5);Hi=!1;Hi=D(f.to_from_lock,"t")?!0:!1;a="black";d="white";g="14px arial";c=null;
l=k=e=10;Ii=Ji=" ";ih=qe=null;a=f.dirspd_display_style;null!=a&&(b=a.split(","),a=b[0].trim(),d=b[1].trim(),g=b[2].trim(),Ii=b[3],Ji=b[4],5<b.length&&(c=b[5].trim(),e=parseInt(b[6],10),k=parseInt(b[7],10),l=parseInt(b[8],10)),ih=new $b(a,d,g,c,e,k,l));c="black";e="white";k="14px arial";l=null;t=g=d=10;a=f.tipbox_display_style;null!=a&&(b=a.split(","),c=b[0].trim(),e=b[1].trim(),k=b[2].trim(),3<b.length&&(l=b[3].trim(),d=parseInt(b[4],10),g=parseInt(b[5],10),t=parseInt(b[6],10)));Ki=new $b(c,e,k,l,
d,g,t);re=null;Da=f.image_base;null!=Da?re=Da=Da.trim():Da=null!=f.image_only_base?f.image_only_base.trim():null;Li=Da;a=f.overlay_base;null!=a&&(ic=a.trim());cg=!0;D(f.zip_only,"f")&&(cg=!1);Kd=!1;a=f.zip_filename;null!=a&&(Kd=!0,jh=a.trim());je=!0;a=f.filenames;null==a&&(a=f.background_filenames);null!=a&&Pj(a);a=f.basename;null!=a&&(c=f.base_starting_number,e=0,k=1,null!=c&&(b=c.split(","),e=parseInt(b[0],10),1<b.length&&(k=parseInt(b[1],10))),y=f.num_frames,null==y&&(y=f.num_images),y=parseInt(y,
10),Qj(a,e,k));kh=!0;b=f.zip_static;if(D(b,"f")||D(b,"n"))kh=!1;lh=!0;b=f.background_static;if(D(b,"f")||D(b,"n"))lh=!1;a=f.overlay_filenames;null!=a&&Rj(a);ub=null;a=f.image_preserve;if(null!=a)for(b=a.split(","),ub=[],a=0;a<b.length;a++)ub[a]=parseInt(b[a].trim(),10),1<a%4&&(ub[a]=ub[a]-ub[a-2]+1);Mi=!1;D(f.keep_enhancement,"t")&&(Mi=!0);Ni=!0;D(f.keep_zoom,"f")&&(Ni=!1);se=mh=0;Oi=!1;a=f.hide_bottom;null!=a&&(b=a.split(","),mh=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Oi=!0));te=nh=0;
Pi=!1;a=f.hide_top;null!=a&&(b=a.split(","),nh=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Pi=!0));ue=oh=0;Qi=!1;a=f.hide_left;null!=a&&(b=a.split(","),oh=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Qi=!0));ve=ph=0;Ri=!1;a=f.hide_right;null!=a&&(b=a.split(","),ph=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Ri=!0));Si=!1;D(f.hide_background,"t")&&(Si=!0);Ti="<div>";Ui=300;Vi=500;a=f.popup_style;null!=a&&(Ti='<div style="'+a+'">');a=f.popup_window_size;null!=a&&(b=a.split(","),
Vi=b[0],Ui=b[1]);Wi=!1;a=f.wheel_frames;null!=a&&(Wi=!0,Ia.useWheel(HAniS.wheel));dg=Sa=!1;D(f.active_zoom,"t")&&(null==Ta&&(Sa=!0),Ia.useWheel(HAniS.wheel));qh=!1;D(f.cycle_zoom,"t")&&(qh=!0);a=f.initial_zoom;null!=a&&(b=a.split(","),td="auto"!=b[0].toLowerCase()?parseFloat(b[0]):"auto",1<b.length?(jf=parseInt(b[1],10),Xi=parseInt(b[2],10)):jf=-1,Yi=!0);we=1;xe=!1;Ua=null;a=f.zoom_scale;if(null!=a)if(b=a.split(","),1===b.length)D(a,"hi_res")?(xe=!0,we=0):we=parseFloat(a);else{Ua=Array(b.length);
for(a=0;a<b.length;a++)Ua[a]=parseFloat(b[a]);xe=!0}Ld=9999999;a=f.maximum_zoom;null!=a&&(Ld=parseFloat(a));eg=!0;D(f.use_progress_bar,"f")&&(eg=!1);a=f.dwell;null!=a&&(b=a.split(","),mb=parseInt(b[0].trim(),10),1<b.length&&(Wc=parseInt(b[1].trim(),10),10>Wc&&(Wc=10),Md=parseInt(b[2].trim(),10),rh=parseInt(b[3].trim(),10)));a=f.rate;null!=a&&(b=a.split(","),mb=Math.round(1E4/parseFloat(b[0].trim())),1<b.length&&(Wc=Math.round(1E4/parseFloat(b[2].trim())),10>Wc&&(Wc=10),Md=Math.round(1E4/parseFloat(b[1].trim()))));
a=f.frame_times_template;null!=a&&(b=a.split(","));ye=27;a=f.mp4_quantization;null!=a&&(ye=parseInt(a,10),10>ye||51<ye)&&(ye=27);jc=null;a=f.times;if(null!=a){b=a.split(",");jc=Array(b.length);for(a=0;a<b.length;a++)jc[a]=parseInt(b[a].trim(),10);E(jc)}a=f.extrap_times_filename;if(null!=a){jc=[];var B=new XMLHttpRequest;B.open("get",a,!0);B.onload=function(){for(var p=B.responseText.split("\n"),U=0;U<p.length;U++){var F=p[U].split(" ");if(3==F.length){F[2].trim();var S=parseInt(F[0],10)-1;jc[S]=100*
parseInt(F[2].substring(0,2),10)+parseInt(F[2].substring(3,5),10)+parseInt(F[2].substring(6,8),10)/30}}E(jc)};B.send()}kf=null;a=f.extrap_times_template;null!=a&&(kf=RegExp(a));Zi=["Click on target's initial position","Click on target's final position","Move pointer around or click here to select target"];$i=10;D(f.extrap_prompts_position,"bot")&&($i=9999);a=f.extrap_prompts;null!=a&&(Zi=a.split(","));fg=["Click on first point to mark","Save points","Remove last point"];a=f.mark_prompts;null!=a&&
(fg=a.split(","));gg=!0;D(f.mark_close,"f")&&(gg=!1);sh="12pt Arial";aj="white";a=f.mark_prompts_style;null!=a&&(b=a.split(","),sh=b[0].trim(),1<b.length&&(aj=b[1].trim()));bj=f.controls;ea("controls = "+f.controls);ea("bottom_controls = "+f.bottom_controls);Nd=hg=Xc=Yc=kc=lc=ig=Ac=null;null!=bj&&Yb(bj,!0);cj=f.bottom_controls;null!=cj&&Yb(cj,!1);Od=!1;a=f.probe_table;null!=a&&I(a);b=f.enhance_filename;null==b&&(b=f.enhance_table);if(null!=b){ea("Reading enhancement table...");Od=!1;B=new XMLHttpRequest;
mc=[];Pd=[];jg=[];Qd=[];Zc=[];var m,q,M;Ob=[];Pb=[];Qb=[];lf=[];N=-1;dj=!0;var G=!1,aa,Fa,wa,W,u,Ea,K,Ja,cb,la,Va,La,nb;B.onload=function(){for(var p=this.responseText.split("\n"),U=0;U<p.length;U++)if(!(2>p[U].length)){var F=p[U].replace(/\s+/g," ").trim(),S=F.indexOf("#");if(0!=S)if(0<S&&(F=F.substring(0,S)),S=F.split(","),0==S[0].indexOf("*"))N++,mc[N]=Array(256),Qd[N]=Array(256),Pd[N]=Array(256),Zc[N]=Array(256),Ob[N]=Array(256),Pb[N]=Array(256),Qb[N]=Array(256),lf[N]=Array(256),mc[N]=Array(256),
jg[N]=1<S.length?S[1].trim():"None",m=" ",q="Value =",M=1,F=x("option"),F.innerHTML=S[0].substring(1),F.value=N,null!=kb&&kb.add(F);else{var qa=F.indexOf("value");0>qa&&(qa=F.indexOf("probe"));G=!1;la=Va=0;0<qa&&(S=F.substring(qa+1),F=F.substring(0,qa),qa=S.indexOf("="),S=S.substring(qa+1),S=S.split(","),1==S.length?(q=S[0].trim(),M=-1,G=!1):(la=parseFloat(S[0].trim()),Va=parseFloat(S[1].trim()),2<S.length&&(M=parseInt(S[2],10)),3<S.length&&(m=Sj(S[3].trim())),4<S.length&&(q=S[4].trim()),G=!0));F=
F.split(" ");aa=parseInt(F[0].trim(),10);Fa=parseInt(F[1].trim(),10);wa=Fa-aa;W=parseFloat(F[2].trim());u=parseFloat(F[3].trim());Ea=parseFloat(F[4].trim());K=parseFloat(F[5].trim());Ja=parseFloat(F[6].trim());cb=parseFloat(F[7].trim());La=nb=255;9<F.length&&(La=parseFloat(F[8].trim()),nb=parseFloat(F[9].trim()));for(F=aa;F<=Fa;F++)0===wa?(Ob[N][aa]=W,Pb[N][aa]=Ea,Qb[N][aa]=Ja,lf[N][aa]=La):(Ob[N][F]=Math.round(W+(u-W)*(F-aa)/wa),Pb[N][F]=Math.round(Ea+(K-Ea)*(F-aa)/wa),Qb[N][F]=Math.round(Ja+(cb-
Ja)*(F-aa)/wa),lf[N][F]=Math.round(La+(nb-La)*(F-aa)/wa)),Qd[N][F]=q,Pd[N][F]=m,Zc[N][F]=M,G&&(mc[N][F]=0===wa?la:la+(Va-la)*(F-aa)/wa)}}-1!=hc&&O[hc].checked&&(kb.disabled=!1);Od=!0;n()};B.open("get",b,!0);B.send()}else n()}function n(){var b=f.sprite_filenames;if(null!=b){var a=b.split(",");th=0;Ma=[];b=f.sprite_images_offset;Rd=-1;null!=b&&(Rd=parseInt(b,10)-1);for(b=0;b<a.length;b++){Ma[b]=new Image;Ma[b].gotit=!1;Ma[b].inx=b;Ma[b].fromfile=!0;var d="/";0<a[b].indexOf("?")&&(d="?");Ma[b].zoomme=
0<a[b].indexOf(d+"zoom");Ma[b].anim=0<a[b].indexOf(d+"animate");d=a[b].indexOf(d);0<d&&(a[b]=a[b].substring(0,d));Ma[b].onload=function(){Ma[this.inx].gotit=!0;th++;th==a.length&&A()};Ma[b].src=a[b].trim()}}else A()}function A(){for(var b=Object.keys(f),a=0;a<b.length;a++)D(b[a],"hotspot")&&Lc("hotspot="+f[b[a]]);je?HAniS.getFOF():(ud=!0,Mb())}function I(b){var a=new XMLHttpRequest;mc=[];jg=[];Pd=[];var d=" ";Qd=[];var c="Value=";Zc=[];var e=1;Sd=[];uh=[];Ob=[];Pb=[];Qb=[];var k,l=-1;N=-1;var g=0;
a.onload=function(){for(var t=this.responseText.split("\n"),B=0;B<t.length;B++)if(!(2>t[B].length)){var m=t[B].replace(/\s+/g," ").trim().split(","),q=m[0].split(" ");if(0==q[0].indexOf("*"))N++,mc[N]=[],Qd[N]=[],Pd[N]=[],Zc[N]=[],Ob[N]=[],Pb[N]=[],Qb[N]=[],uh[N]=[],Sd[N]=[],l=-1,jg[N]=1<m.length?m[1].trim():"None",g=1;else if(0!=g){l++;var M=Array(3);mc[N][l]=parseFloat(q[0]);Ob[N][l]=parseInt(q[1].trim(),10);Pb[N][l]=parseInt(q[2].trim(),10);Qb[N][l]=parseInt(q[3].trim(),10);0!=l&&(M[0]=Ob[N][l]-
Ob[N][l-1],M[1]=Pb[N][l]-Pb[N][l-1],M[2]=Qb[N][l]-Qb[N][l-1],k=0,Math.abs(M[1])>Math.abs(M[k])&&(k=1),Math.abs(M[2])>Math.abs(M[k])&&(k=2),uh[N][l-1]=k,Sd[N][l-1]=M,0==Sd[N][l-1][k]&&(Sd[N][l-1][k]=1));1<m.length&&(0==m[1].trim().indexOf('"')?(e=-1,m=m[1].trim(),c=m.substr(1,m.length-2),d=""):(e=parseInt(m[1],10),2<m.length&&(d=Sj(m[2].trim())),3<m.length&&(c=m[3].trim())));Qd[N][l]=c;Zc[N][l]=e;Pd[N][l]=d}}Od=!0};a.open("get",b,!0);a.send()}function C(b){b=b.split(",");var a=b[0].trim();"PS"===a?
($c=new mk,$c.init(b)):"CE"==a?($c=new nk,$c.init(b)):"LCC"==a?($c=new ok,$c.init(b)):($c=null,vh=parseFloat(b[0]),wh=parseFloat(b[1]),Tj=parseFloat(b[2]),xh=parseFloat(b[3]),0<wh&&0>xh&&(xh+=360));null==f.coordinates_display_style&&(Pf="Lat = ",Qf=" Lon = ");le=!0}function Za(b){var a=new XMLHttpRequest;a.onload=function(){h(this.responseText.split("\n"))};a.open("get",b+"?"+Math.round(1E5*Math.random()),!0);a.send()}function w(b){var a;if(null!=oe){for(a=0;a<oe.length;a++)-1!=oe[a].indexOf(b)&&
(O[a].checked=!1);for(a=0;a<oe.length;a++)uc(a)}}function E(b){yh=Array(b.length);for(var a=0;a<b.length;a++){var d=60*Math.floor(b[a]/100)+Math.floor(b[a])%100;0===a&&(ad=d);var c=d-ad;0>c&&(c=d+1440-ad);yh[a]=c;ea("times s="+d+"  min="+yh[a])}ad+=bg;1440<=ad&&(ad-=1440);0>ad&&(ad+=1440);ea("Starting minute = "+ad)}function Z(b,a){if(0!=b&&!Td)for(var d=0;d<b;d++)0==O[vb[d].overlay].isGhost&&(O[vb[d].overlay].parentNode.style.visibility=a)}function ka(){var b,a,d,c,e;if(zh){var k=new XMLHttpRequest;
var l=0;na=[];k.onload=function(){var g=this.responseText.split("\n");ea("Processing FoF-substitute: "+ej);for(d=0;d<g.length;d++)if(!(2>g[d].length||0>g[d].indexOf(Uj))&&(na[l]=[],e=g[d].indexOf("overlay"),0<=e)){b=g[d].substring(e);e=b.indexOf("=");0>e&&ea("!! Cannot find a = sign in "+b);a=b.substring(e+1);b=a.trim();a=b.split(",");xa=Math.max(xa,a.length);ea("numOverlays reset in fof_substitute to "+xa);for(c=0;c<a.length;c++)na[l][c]=a[c].trim(),null!=mf&&Ah[c]?na[l][c]=(mf+na[l][c]).trim():
null!=ic?na[l][c]=(ic+na[l][c]).trim():null!=Da&&(na[l][c]=(Da+na[l][c]).trim());l+=1}ea("Number of frames "+y+"... number of fof_sub frames = "+l);pb()};k.open("get",ej+"?"+Math.round(1E5*Math.random()),!0);k.send()}else pb()}function pb(){0!=nc?Z(nc,"visible"):0!=fj&&Z(fj,"hidden");ud=!0;Mb()}function tc(b,a){ze||(gc.height=a,gc.width=b,od.height=a,od.width=b,nf.height=a,nf.width=b,Ae.height=a,Ae.width=b,of=Ae.getContext("2d"),fa=2*Math.floor(b/2),ca=2*Math.floor(a/2),bb=0==jb?ca/2:0>jb?ca+jb:jb,
za=fa/2,void 0!=yc&&yc(.5),Jd&&(b=Be*ca/fa,a=Be,b<Ud&&(a=Ud*fa/ca,b=Ud),Na=a,Oa=b),kg=fa/2-100,lg=ca/2-10,X=Na/fa,Y=Oa/ca,db=Math.floor(Na/ba),eb=Math.floor(Oa/da),Ce=De=0,Jd&&(De=Math.round((Na-Be)/2),Ce=Math.round((Oa-Ud)/2)),Db.style.height=ca+"px",Db.style.width=fa+"px",vd.style.height=ca+"px",vd.style.width=fa+"px",pf.style.height=ca+"px",pf.style.width=fa+"px",Mf(y,!1),gj&&(gj=!1,null!=qf&&qf()))}function Lb(){for(var b=0,a={},d=0;d<y;a={$jscomp$loop$prop$ii$2:a.$jscomp$loop$prop$ii$2},d++){a.$jscomp$loop$prop$ii$2=
d;var c=null==Da?fb[d]:fb[d].substring(fb[d].lastIndexOf("/")+1);(c=hj.file(c))?c.async("arraybuffer").then(function(e){return function(k){k=new Blob([k]);wd[e.$jscomp$loop$prop$ii$2]=URL.createObjectURL(k);b++;b>=y&&$a()}}(a),function(e){return function(){wd[e.$jscomp$loop$prop$ii$2]=null;b++;b>=y&&$a()}}(a)):(wd[a.$jscomp$loop$prop$ii$2]=null,b++,b>=y&&$a())}}function $a(){var b=0;if(0==xa)Xb();else for(var a=0;a<y;a++){xd[a]=[];for(var d={},c=0;c<xa;d={$jscomp$loop$prop$ii$6:d.$jscomp$loop$prop$ii$6,
$jscomp$loop$prop$jj$7:d.$jscomp$loop$prop$jj$7},c++){d.$jscomp$loop$prop$ii$6=a;d.$jscomp$loop$prop$jj$7=c;var e=null==ic&&null==Da?na[a][c]:na[a][c].substring(na[a][c].lastIndexOf("/")+1);(e=hj.file(e))?e.async("arraybuffer").then(function(k){return function(l){l=new Blob([l]);xd[k.$jscomp$loop$prop$ii$6][k.$jscomp$loop$prop$jj$7]=URL.createObjectURL(l);b++;b>=y*xa&&Xb()}}(d),function(k){return function(){xd[k.$jscomp$loop$prop$ii$6][k.$jscomp$loop$prop$jj$7]=null;b++;b>=y*xa&&Xb()}}(d)):(xd[a][c]=
null,b++,b>=y*xa&&Xb())}}}function Mb(){if(Kd){var b=new XMLHttpRequest,a=null==re?jh:re+jh;kh||(a=a+"?"+Math.round(1E5*Math.random()));b.open("GET",a,!0);b.responseType="arraybuffer";wd=[];xd=[];b.addEventListener("progress",function(d){d.lengthComputable&&ab("Loading ZIP file",d.total,d.loaded)});b.onload=function(d){(new JSZip).loadAsync(this.response).then(function(c){hj=c;Lb()},function(){ea("Unable to read ZIP file: "+jh)})};b.send()}else Xb()}function Xb(){var b,a,d;void 0!=mg&&mg(!1);var c=
vi+Math.round(1E4*Math.random()),e=[];e[0]=cc;null!=oc&&(oc.disabled=!0);null!=Bc&&(Bc.disabled=!0);for(b=1;b<y;b++)e[b]=b<=cc?b-1:b;wb=Array(y);bd=xb=0;ij=eg;Bh&&(rb.max=y);ze&&(Ee||Id)&&(cd=[],Fb=[],Vd=[],Ch=[],ng=[]);null!=kb&&(Mi?null==ke&&(ke=kb.value):kb.selectedIndex=0);for(var k=0;k<y;k++){b=e[k];ze&&(Ee||Id)&&(cd[b]=x("canvas"),Fb[b]=x("canvas"));wb[b]=new Image;wb[b].gotit=!1;wb[b].frameNum=b;wb[b].onerror=function(){xb++;v()};wb[b].onload=function(){ze&&(Oa=this.height,Na=this.width,Ud=
Oa,Be=Na,ze=!1,wi?Jd?HAniS.setWindowSize(J.offsetWidth,J.offsetHeight):tc(fa,ca):tc(Na,Oa),eb=Oa,db=Na,Yi&&("auto"==td&&(td=(X+Y)/2,jf=-1),eb/=td,db/=td,0>jf&&(jf=Na/2,Xi=Oa/2),ra=Math.round(jf-Na/2/td),sa=Math.round(Xi-Oa/2/td),ba=da=td,1!=td&&(Sa=!1,HAniS.toggleZooming()),se=mh,te=nh,ve=ph,ue=oh,Dd()));Kd&&null!=wd[this.frameNum]&&URL.revokeObjectURL(wd[this.frameNum]);if(0<og&&!yd){Dh.height=Oa;Dh.width=Na;rf=Dh.getContext("2d");rf.clearRect(0,0,fa,ca);for(var g=0;g<Gb.length;g++){for(var t=Gb[g].ctx.getImageData(0,
0,Gb[g].width,Gb[g].height).data,B=rf.getImageData(Gb[g].xmin,Gb[g].ymin,Gb[g].width,Gb[g].height),m=3;m<t.length;m+=4)0!=t[m]&&(B.data[m]=g+1);rf.putImageData(B,Gb[g].xmin,Gb[g].ymin)}Sa||(Hb=!0);ba==pg&&(Hb=!0);yd=!0}if(ud){ud=!1;z=gc.getContext("2d");z.imageSmoothingEnabled=ne;z.imageSmoothingQuality=ti;z.fillStyle="blue";z.font="bold 20px Arial";r=od.getContext("2d");r.imageSmoothingEnabled=ne;yb=Array(y);Mf(y,!0);qg&&!Wa?(Ra(Ka(cc)),Fd=Xf):Ra(Ka(H));if(0<xa)for(ja=Array(y),m=0;m<y;m++)for(d=
e[m],ja[d]=Array(xa),a=0;a<xa;a++)if(void 0!=zc[a+1]&&zc[a+1]>=y&&(zc[a+1]=y-1),void 0==zc[a+1]||zc[a+1]==d)ja[d][a]=new Image,ja[d][a].gotit=!1,ja[d][a].frameNum=d,ja[d][a].overlayNum=a,ja[d][a].onerror=function(){xb++;v()},ja[d][a].onload=function(){this.gotit=!0;var q=this.frameNum;xb++;v();!Zf||null!=pa&&gh[this.overlayNum]||this.height==Ud&&this.width==Be?this.overlayNum==ff-1&&(yb[this.frameNum]=0):(this.gotit=!1,ea("Bad image size:"+this.src));if(Id&&this.gotit&&this.overlayNum==hc)cd[q].height=
this.height,cd[q].width=this.width,sf=cd[q].getContext("2d"),sf.drawImage(this,0,0),Ch[q]=sf.getImageData(0,0,this.width,this.height).data,Fb[q].height=this.height,Fb[q].width=this.width,Vd[q]=Fb[q].getContext("2d"),Vd[q].drawImage(this,0,0),ng[q]=Vd[q].getImageData(0,0,this.width,this.height),ja[q][this.overlayNum]=null,ja[q][this.overlayNum]=Fb[q],ja[q][this.overlayNum].gotit=!0;else if(this.gotit&&O[this.overlayNum].hotspotIndex){var M=x("canvas");M.height=this.height;M.width=this.width;var G=
M.getContext("2d");G.drawImage(this,0,0);var aa=G.getImageData(0,0,this.width,this.height).data,Fa=aa.length;var wa=this.overlayNum;var W;for(W=0;W<Fa;W+=4)if(0!=aa[W]){0==Rb&&(Sb=[]);var u=aa[W];var Ea=Math.floor(W/4/M.width);G=Math.floor(W/4%M.width);Sb[Rb]=new Zb(G,Ea,"spritefn",u,"pan",null,null,wa,q,null,null);Rb++}}else if(this.gotit&&zi&&(!hh||hh&&Di[this.overlayNum])){M=x("canvas");M.height=this.height;M.width=this.width;G=M.getContext("2d");G.drawImage(this,0,0);Ea=G.getImageData(0,0,this.width,
this.height);aa=Ea.data;Fa=aa.length;for(W=0;W<Fa;W+=4)aa[W]===Ai&&aa[W+1]===Bi&&aa[W+2]===Ci&&(aa[W+3]=0);G.putImageData(Ea,0,0);ja[q][this.overlayNum]=null;ja[q][this.overlayNum]=M;ja[q][this.overlayNum].gotit=!0}this.gotit&&fh[this.overlayNum]?(Eh.clearRect(0,0,fa,ca),Eh.drawImage(ja[q][this.overlayNum],0,0,fa,ca)):this.gotit&&gh[this.overlayNum]&&null!=pa&&(M=x("canvas"),M.height=Oa,M.width=Na,8>pa.length&&(pa[4]=0,pa[5]=0,pa[6]=Na,pa[7]=Oa),G=M.getContext("2d"),G.imageSmoothingEnabled=yi,G.drawImage(this,
pa[0],pa[1],pa[2],pa[3],pa[4],pa[5],pa[6],pa[7]),ja[q][this.overlayNum]=null,ja[q][this.overlayNum]=M,ja[q][this.overlayNum].gotit=!0,null!=Nb&&Nb[this.overlayNum]&&(ja[q][this.overlayNum].origImage=this));Kd&&null!=xd[q][this.overlayNum]&&URL.revokeObjectURL(xd[q][this.overlayNum]);if(void 0!=zc[this.overlayNum+1]&&zc[this.overlayNum+1]==q)for(M=0;M<y;M++)M!=q&&(ja[M][this.overlayNum]=ja[q][this.overlayNum],xb++,v())},g=na[d][a],void 0==tf||tf[a]||(g+=c),ja[d][a].src=Kd&&(cg||xd[d][a])?xd[d][a]:
g,bd++;if(null!=Wd)for(dd=[],a=0;a<Wd.length;a++)dd[a]=new Image,dd[a].gotit=!1,dd[a].onerror=function(q){xb++;v()},dd[a].onload=function(q){q.currentTarget.gotit=!0;xb++;v()},dd[a].src=Wd[a],bd++;if(null!=zb&&0<zb.length)for(gb=[],a=0;a<zb.length;a++)if(void 0!=zb[a])for(gb[a]=[],d=0;d<zb[a].length;d++)for(gb[a][d]=[],m=0;m<y;m++)Vj(zb[a][d],"/")?(g=na[m][a].lastIndexOf("/"),g=na[m][a].substring(0,g+1)+zb[a][d]+na[m][a].substring(g+1),gb[a][d][m]=new Image,gb[a][d][m].gotit=!1,gb[a][d][m].onerror=
function(q){xb++;v()},gb[a][d][m].onload=function(q){q.currentTarget.gotit=!0;xb++;v()},gb[a][d][m].src=g,bd++):0===m?(gb[a][d][0]=new Image,gb[a][d][0].gotit=!1,gb[a][d][0].onerror=function(q){xb++;v()},gb[a][d][0].onload=function(q){q.currentTarget.gotit=!0;xb++;v()},gb[a][d][0].src=zb[a][d],bd++):gb[a][d][m]=gb[a][d][0]}!Zf&&0!=this.height&&0!=this.width||this.height==Ud&&this.width==Be?(this.gotit=!0,0==ff&&(yb[this.frameNum]=0)):(this.gotit=!1,ea("Image has invalid size:"+this.src));Ee&&this.gotit&&
(m=this.frameNum,cd[m].height=this.height,cd[m].width=this.width,sf=cd[m].getContext("2d"),sf.drawImage(this,0,0),Ch[m]=sf.getImageData(0,0,this.width,this.height).data,Fb[m].height=this.height,Fb[m].width=this.width,Vd[m]=Fb[m].getContext("2d"),Vd[m].drawImage(this,0,0),ng[m]=Vd[m].getImageData(0,0,this.width,this.height),wb[m]=null,wb[m]=Fb[m],wb[m].gotit=!0);xb++;v();Ni||HAniS.resetZoom(0);Xd=!0;Wj||(Wj=!0,hb=!1,Xj());T(Wa);this.frameNum==cc&&1==this.gotit&&1==rg&&(Ra(cc),ha())};var l=fb[b];void 0!=
zc[0]&&(l=zc[0],l>=y&&(l=y-1),l=fb[l]);lh||(l+=c);wb[b].src=Kd&&(cg||wd[b])?wd[b]:l;bd++}Tb=Cc=!1;va()}function ua(b,a,d,c,e,k){b.label_on=d;b.label_off=c;ac&&(b.className=k);d=null;c=f[a+"_labels"];null==c&&(c=f[a+"_label"]);null!=c&&(c=c.split(","),b.label_on=c[0].trim(),1<c.length&&(b.label_off=c[1].trim()),2<c.length&&(d="width:"+c[2].trim()+"px;"));null!=e&&(b.title=e);b.innerHTML=b.label_on;e=a=c=f[a+"_style"];null!=c&&(c=c.split("&"),1<c.length&&(a=c[0],e=c[1]));b.style_on=(null!=d?d:"")+zd+
a;b.style_off=(null!=d?d:"")+zd+e;null!=b.style_on&&1<b.style_on.length?b.setAttribute("style",b.style_on):(b.style_on=null,b.style_off=null)}function Yb(b,a){zd=f.buttons_style;null==zd&&(zd="");var d=null,c=null;d=a?f.controls_tooltip:f.bottom_controls_tooltip;var e=b.split(",");if(null!=d){var k=d.split(",");k.length!=e.length&&(ea("!!! Number of tooltips must equal number of controls!"),k=d=null)}var l={};for(b=0;b<e.length;l={$jscomp$loop$prop$sfbounds$11:l.$jscomp$loop$prop$sfbounds$11},b++){var g=
null!=d?k[b]:null;var t=e[b].trim();c=t.indexOf("/");if(0===c||0===b){0===c&&(t=t.substring(1));P=x("div");P.align=bf;var B=f.controls_style;null!=B?P.setAttribute("style",B):P.setAttribute("style","position:relative;padding:2px;width:100%;");a?(J.insertBefore(P,Db),sg=P,sg.id=uf+"-top-controls"):(B=f.bottom_controls_style,null!=B&&P.setAttribute("style",B),J.appendChild(P),tg=P,tg.id=uf+"-bottom-controls")}"enhance"==t.trim()&&(kb=x("select"),c=f.enhance_style,null!=c&&kb.setAttribute("style",c),
null!=g&&(kb.title=g),c=x("option"),c.innerHTML=void 0==f.enhance_prompt?"Pick Enhancement":f.enhance_prompt,c.value=-1,kb.add(c),kb.addEventListener("change",HAniS.doEnhance,!1),Ee=!Id,kb.disabled=Ee?!1:!0,P.appendChild(kb));"custom"==t&&(ig=x("button"),ua(ig,"custom","On","Off",g,"custom"),P.appendChild(ig));"mp4"==t&&(Bc=x("button"),ua(Bc,"mp4","Make MP4","Stop",g,"mp4"),Bc.addEventListener("click",HAniS.makeMP4,!1),P.appendChild(Bc));"anigif"==t&&(oc=x("button"),ua(oc,"anigif","Make GIF","Stop",
g,"anigif"),oc.addEventListener("click",HAniS.makeAniGIF,!1),P.appendChild(oc));"startstop"==t&&(Ac=x("button"),ua(Ac,"startstop","Start","Stop",g,"startstop start"),Ac.addEventListener("click",HAniS.toggleIsLooping,!1),P.appendChild(Ac));"looprock"==t&&(vf=x("button"),ua(vf,"looprock","Rock","Loop",g,"looprock rock"),wf=1,vf.addEventListener("click",HAniS.toggleLoopRock,!1),P.appendChild(vf),D(f.start_rocking,"t")&&HAniS.toggleLoopRock());"loophalt"==t&&(xf=x("button"),ua(xf,"loophalt","Halt","Loop",
g,"loophalt halt"),pc=!1,xf.addEventListener("click",HAniS.toggleLoopHalt,!1),P.appendChild(xf));"extrap"==t&&(ed=x("button"),ua(ed,"extrap","Enable Extrap","Disable Extrap",g,"extrap"),ed.addEventListener("click",HAniS.toggleExtrap,!1),P.appendChild(ed));D(t,"location")&&(Fe=x("button"),ua(Fe,"location","Show Loc","Hide Loc",g,"location"),0<t.indexOf("/on")?(V(Fe,!1,"location off"),Ge=!0,sb.push(J.style.cursor),J.style.cursor=Vf):(Ge=!1,J.style.cursor=sb.pop()),Fe.addEventListener("click",function(){(Ge=
!Ge)?(V(Fe,!1,"location off"),sb.push(J.style.cursor),J.style.cursor=Vf):(V(Fe,!0,"location on"),J.style.cursor=sb.pop());va()},!1),P.appendChild(Fe));if("distance"==t||"distance/hold"==t)Pa=x("button"),ua(Pa,"distance","Show dist","Hide dist",g,"distance"),Yd=fc=Tf=!1,"distance/hold"==t&&(Yd=!0),Pa.addEventListener("click",function(){(fc=!fc)?(V(Pa,!1,"distance off"),sb.push(J.style.cursor),J.style.cursor=Rg,Yd&&(dg=Sa,Sa=!1,null!=Ta&&(Ta.disabled=!0))):(V(Pa,!0,"distance on"),J.style.cursor=sb.pop(),
Yd&&(Tb=!1,va(),Sa=dg,null!=Ta&&(Ta.disabled=!1)))},!1),P.appendChild(Pa);D(t,"probe")&&(He=x("button"),ua(He,"probe","Show probe","Hide probe",g,"probe"),0<t.indexOf("/on")?(V(He,!1,"probe off"),Qc=!0,sb.push(J.style.cursor),J.style.cursor=Wf):(Qc=!1,J.style.cursor=sb.pop()),He.addEventListener("click",function(){(Qc=!Qc)?(V(He,!1,"probe off"),sb.push(J.style.cursor),J.style.cursor=Wf):(V(He,!0,"probe on"),J.style.cursor=sb.pop())},!1),P.appendChild(He));"mark"==t&&(Zd=x("button"),ua(Zd,"mark","Mark",
"Stop Mark",g,"mark"),yf=!0,Zd.addEventListener("click",function(){qc=!qc;Xa=[];qc?(Ie=0,V(Zd,!1,"mark off"),null!=Ta&&(Ta.disabled=!0),null!=Pa&&(Pa.disabled=!0),sb.push(J.style.cursor),J.style.cursor=Sg):(V(Zd,!0,"mark on"),null==Ta||Tb||Yd||(Ta.disabled=!1),null!=Pa&&(Pa.disabled=!1),Ie=-1,J.style.cursor=sb.pop());va()},!1),Yj=new $b("black","white",sh,"black",20,5,5),jj=new $b("black","white",sh,"black",20,5,5),P.appendChild(Zd));"refresh"==t&&(hg=x("button"),ua(hg,"refresh","Refresh",null,g,
"refresh"),hg.addEventListener("click",HAniS.reloadFOF,!1),P.appendChild(hg));"restore"==t&&(Fh=x("button"),ua(Fh,"restore","Restore",null,g,"restore"),Fh.addEventListener("click",function(p){qd=!0;for(p=0;p<O.length;p++)O[p].checked=O[p].restorableState,null!=xc&&!xc[p]&&O[p].checked&&(qd=!1);for(p=0;p<O.length;p++)uc(p)},!1),P.appendChild(Fh));"setframe"==t&&(l.$jscomp$loop$prop$sfbounds$11=function(){var p=parseInt(rb.value,10)-1;if(ug||Gh){for(var U=0;U<y;U++)qb(U,0);vg=0}else if(p!=kj&&Hh){if(0==
vg){for(U=0;U<y;U++)U>p?qb(U,0):qb(U,-1);vg=1}else{for(U=p+1;U<y;U++)qb(U,-1);vg=0;T(!0)}kj=p}},rb=x("input"),ac&&(rb.className="setframe"),rb.type="range",rb.min=1,rb.max=100,rb.value=1,wg="Frame #*",null!=g&&(rb.title=g),B=f.setframe_label,null!=B&&(wg=B),zf=x("span"),zf.innerHTML=wg.replace("*",1),c="display:block;vertical-align:middle;"+f.setframe_style,rb.setAttribute("style",c),c=x("span"),c.setAttribute("style","display:inline-block;vertical-align:top;"),zf.setAttribute("style","display:block;vertical-align:middle;"+
f.setframe_label_style),c.appendChild(zf),c.appendChild(rb),P.appendChild(c),P.addEventListener("touchmove",function(p){p.stopPropagation()},!1),P.addEventListener("mousemove",function(p){p.stopPropagation()},!1),rb.addEventListener("input",function(p){p.preventDefault();p.stopPropagation();T(!1);p=parseInt(rb.value,10)-1;0<=yb[p]&&(Ra(p),zf.innerHTML=wg.replace("*",H+1));ha()},!1),vg=0,kj=-1,rb.addEventListener("pointerup",function(p){return function(U){U.stopPropagation();p.$jscomp$loop$prop$sfbounds$11()}}(l),
!1),rb.addEventListener("mouseup",function(p){return function(U){U.stopPropagation();p.$jscomp$loop$prop$sfbounds$11()}}(l),!1),rb.addEventListener("change",function(p){return function(U){U.stopPropagation();p.$jscomp$loop$prop$sfbounds$11()}}(l),!1),Bh=!0);"framelabel"==t&&(Ab=x("button"),ac&&(Ab.className="framelabel"),Ab.innerHTML="",null!=g&&(Ab.title=g),Ub=null,B=f.frame_labels,null!=B&&(Ub=B.split(","),Ab.innerHTML=Ub[0]),c=zd+f.framelabel_style,null!=c&&Ab.setAttribute("style",c),c=f.framelabel_position,
null!=c&&(c=c.split(","),Ab.style.position="absolute",Ab.style.left=J.offsetLeft+parseInt(c[0],10)+"px",Ab.style.top=J.offsetTop+parseInt(c[1],10)+"px"),P.appendChild(Ab));if("autorefresh"==t||"autorefresh/off"==t)null!=Gd&&clearInterval(Gd),Nd=x("button"),ua(Nd,"autorefresh","Disable Auto Refresh","Enable Auto Refresh",g,"autorefresh"),Nd.addEventListener("click",HAniS.toggleAutoRefresh,!1),ef=!1,P.appendChild(Nd),"autorefresh"==t?HAniS.toggleAutoRefresh():V(Nd,!1,"autotoggle off");"backward"==t&&
(kc=x("button"),ua(kc,"backward","<","<",g,"step back"),kc.addEventListener("click",function(){T(!1);ec(-1);ha()},!1),P.appendChild(kc));"forward"==t&&(lc=x("button"),ua(lc,"forward",">",">",g,"step forward"),lc.addEventListener("click",function(){T(!1);ec(1);ha()},!1),P.appendChild(lc));if("step"==t){c=f.step_labels;var m=null!=c?c.split(","):["<",">"];kc=x("button");ac&&(kc.className="step back");kc.innerHTML=m[0];kc.addEventListener("click",function(){T(!1);ec(-1);ha()},!1);c=zd+f.step_style;null!=
c&&kc.setAttribute("style",c);null!=g&&(kc.title=g);P.appendChild(kc);lc=x("button");ac&&(lc.className="step forward");lc.innerHTML=m[1];lc.addEventListener("click",function(){T(!1);ec(1);ha()},!1);null!=c&&lc.setAttribute("style",c);null!=g&&(lc.title=g);P.appendChild(lc)}"first"==t&&(Dc=x("button"),ua(Dc,"first","|<","|<",g,"firstlast first"),Dc.addEventListener("click",function(){T(!1);Ra(Ka(0));ha()},!1),P.appendChild(Dc));"last"==t&&(Ec=x("button"),ua(Ec,"last",">|",">|",g,"firstlast last"),
Ec.addEventListener("click",function(){T(!1);Ra(Ka(y-1));ha()},!1),P.appendChild(Ec));"firstlast"==t&&(c=f.firstlast_labels,m=null!=c?c.split(","):["<<",">>"],Dc=x("button"),ac&&(Dc.className="firstlast"),Dc.innerHTML=m[0],Dc.addEventListener("click",function(){T(!1);Ra(Ka(0));ha()},!1),c=zd+f.firstlast_style,null!=c&&Dc.setAttribute("style",c),null!=g&&(Dc.title=g),P.appendChild(Dc),Ec=x("button"),ac&&(Ec.className="firstlast"),Ec.innerHTML=m[1],Ec.addEventListener("click",function(){T(!1);Ra(Ka(y-
1));ha()},!1),null!=c&&Ec.setAttribute("style",c),null!=g&&(Ec.title=g),P.appendChild(Ec));"setspeed"==t?(Fc=x("input"),ac&&(Fc.className="setspeed"),Fc.type="range",Fc.min=Wc,Fc.max=Md,Fc.value=Md-mb,null!=g&&(Fc.title=g),c="vertical-align:middle;"+f.setspeed_style,Fc.setAttribute("style",c),Fc.addEventListener("input",function(p){mb=Md-parseInt(Fc.value,10)+30;void 0!=Je&&Je(mb);T(!0);ha()},!1),P.appendChild(Fc)):"speed"==t&&(c=f.speed_labels,m=null!=c?c.split(","):["-","+"],Xc=x("button"),ac&&
(Xc.className="speed slower"),Xc.innerHTML=m[0],Xc.addEventListener("click",function(){mb+=rh;Yc.disabled=!1;mb>Md&&(mb=Md,Xc.disabled=!0);void 0!=Je&&Je(mb)},!1),c=zd+f.speed_style,null!=c&&Xc.setAttribute("style",c),null!=g&&(Xc.title=g),P.appendChild(Xc),Yc=x("button"),ac&&(Yc.className="speed faster"),Yc.innerHTML=m[1],Yc.addEventListener("click",function(){mb-=rh;Xc.disabled=!1;mb<Wc&&(mb=Wc,Yc.disabled=!0);void 0!=Je&&Je(mb)},!1),null!=c&&Yc.setAttribute("style",c),null!=g&&(Yc.title=g),P.appendChild(Yc));
"slide"==t&&(Af=x("button"),ua(Af,"slide","Slide","Un-slide",g,"slide off"),Af.addEventListener("click",HAniS.toggleSliding,!1),P.appendChild(Af),Ke=vc=!1);"fade"==t&&(Bf=x("button"),ua(Bf,"fade","Fade","Un-Fade",g,"fade off"),Bf.addEventListener("click",HAniS.toggleFading,!1),P.appendChild(Bf),Le=nd=!1);"zoom"==t&&(Ta=x("button"),ua(Ta,"zoom","Zoom","Un-zoom",g,"zoom off"),Ta.addEventListener("click",HAniS.toggleZooming,!1),P.appendChild(Ta),Sa=!1);if("annotate"==t){Cf=x("button");ua(Cf,"annotate",
"Annotate","Finished",g,"annotate");Qa=x("div");Qa.setAttribute("style","position:absolute;box-sizing:content-box;height:120px;width:180px;top:20px;left:20px;z-index:15;visibility:hidden;background-color:lightgray;border-width:6px;border-style:solid;border-color:magenta;border-radius:25px;padding:10px;font:normal normal normal 16px Arial;color:black;");Qa.title="Drag this box around.  Select attributes, then go onto the image and click & drag";$d=ae=20;xg=Gc=!1;lj=3;mj=11;be=Df=0;L=[];Qa.style["touch-action"]=
"none";var q=function(p){ae=p.clientX-be;$d=p.clientY-Df;Qa.style.top=$d+"px";Qa.style.left=ae+"px"};Qa.addEventListener("mousedown",function(p){if(0!=p.clientX||0!=p.clientY)xg=!0,be=p.clientX-ae,Df=p.clientY-$d},!1);Qa.addEventListener("mouseup",function(p){xg=!1},!1);Qa.addEventListener("mouseout",function(p){xg&&q(p)},!1);Qa.addEventListener("mousemove",function(p){xg&&q(p)},!1);window.PointerEvent?(Qa.addEventListener("pointerdown",function(p){"mouse"!=p.pointerType&&(be=p.clientX-ae,Df=p.clientY-
$d)},!1),Qa.addEventListener("pointermove",function(p){"mouse"!=p.pointerType&&(0==be&&(be=p.clientX,Df=p.clientY),q(p))},!1)):Qa.addEventListener("touchmove",function(p){p=p.changedTouches[0];0==be&&(be=p.clientX,Df=p.clientY);q(p)},!1);Cf.addEventListener("click",function(){if(Gc=!Gc){L=[];ae=J.offsetLeft;$d=J.offsetTop;var p=f.annotate_position;null!=p&&(p=p.split(","),ae+=parseInt(p[0],10),$d+=parseInt(p[1],10));Qa.style.top=$d+"px";Qa.style.left=ae+"px";Qa.style.visibility="visible";V(Cf,!1,
"annotate off");Zj=Sa;Sa=!1;null!=Ta&&(Ta.disabled=!0);null!=Pa&&(Pa.disabled=!0)}else Qa.style.visibility="hidden",V(Cf,!0,"annotate on"),Sa=Zj,null==Ta||Tb||Yd||(Ta.disabled=!1),null!=Pa&&(Pa.disabled=!1);va()},!0);Ef=nj("Color Black White Red Green Blue Yellow Orange Cyan Magenta".split(" "),"black black white red green blue yellow orange cyan magenta".split(" "),function(p){});Ad=nj("Width 1 2 3 4 5 6 7 8 10 12 14 16 18 20 24 28 32 36 38".split(" "),[1,1,2,3,4,5,6,7,8,10,12,14,16,18,20,24,28,
32,36,38],function(p){6==Ff.selectedIndex?mj=Ad.selectedIndex:lj=Ad.selectedIndex});Ad.title="Select width or font size";Ff=nj("Type Arrow Circle Box Polygon Draw Text Line".split(" "),[-1,0,1,2,3,4,5,6],function(p){6==Ff.selectedIndex?(Hc.focus(),Hc.select(),Ad.selectedIndex=mj):Ad.selectedIndex=lj;0==Ef.selectedIndex&&(Ef.selectedIndex=2)});c=x("button");c.style.width="70px";c.style.margin="5px";c.innerHTML="Erase";c.title="Erase last item";c.addEventListener("click",function(){0<L.length&&(L.pop(),
va())},!1);Hc=x("input");Hc.type="text";Hc.style.width="150px";Hc.style.margin="5px";Hc.title="Enter your text here, then click where you want it";Hc.value="Text input";m=f.annotate_defaults;null!=m&&(m=m.split(","),Ff.selectedIndex=parseInt(m[0],10),1<m.length&&(Ef.selectedIndex=parseInt(m[1],10)),2<m.length&&(Ad.selectedIndex=parseInt(m[2],10)),3<m.length&&(Hc.value=m[3].trim()));m=x("div");m.innerHTML="Annotation Tools";var M=x("div");M.appendChild(Ff);M.appendChild(Ef);var G=x("div");G.appendChild(Ad);
G.appendChild(c);c=x("div");c.appendChild(Hc);Qa.appendChild(m);Qa.appendChild(M);Qa.appendChild(G);Qa.appendChild(c);P.appendChild(Cf);J.appendChild(Qa)}"saveall"==t&&(Ih=x("button"),ua(Ih,"saveall","SaveAll","SaveAll",g,"saveall"),oj=f.saveall_prompt,fd=f.saveall_filename,pj=!1,D(f.saveall_toggle,"t")&&(pj=!0),c=f.saveall_list,qj=null==c?["0"]:c.split(","),Ih.addEventListener("click",function(){for(var p=0;p<qj.length;p++)for(var U=parseInt(qj[p],10),F=0,S=0;S<fb.length;S++)pj&&0>yb[S]||(setTimeout(function(qa,
ib){0===ib&&null!=oj&&(fd=window.prompt(oj,fd),null!=fd&&1>fd.length&&(fd=null));ib=null==fd?"":-1!=fd.indexOf("#")?fd.replace("#",qa.toString()):fd+qa;var Aa=document.createElement("a");Aa.href=0==U?fb[qa]:na[qa][U-1];Aa.download=ib;Aa.click()},1E3*F,S,F),F+=1)},!1),P.appendChild(Ih));rj=f.capture_prompt;Jh=f.capture_filename;null==Jh&&(Jh="haimage.png");"capture"==t&&(Kh=x("button"),ua(Kh,"capture","Capture","Capture",g,"capture"),Kh.addEventListener("click",function(){HAniS.doCapture()},!1),P.appendChild(Kh));
"show"==t&&(Lh=x("button"),ua(Lh,"show","Show","Show",g,"show"),Mh=f.show_prompt,ak=f.show_image_file,null==Mh&&(Mh="Right-click to save or copy the image<br> <font size='-1'>(to save in some browsers, you may need to first 'Open in New Tab')</font> <p>"),Lh.addEventListener("click",function(){if(ak)window.open(fb[H]);else{var p=gc.toDataURL("image/png;base64;");var U=window.open();U.document.write(Mh+"<img src="+p+"></img>")}},!1),P.appendChild(Lh));"toggle"==t&&(yb=[],c=f.toggle_size,null!=c?(c=
c.split(","),Me=parseInt(c[0],10),yg=parseInt(c[1],10),zg=parseInt(c[2],10)):(yg=Me=10,zg=3),sj="red",tj="blue",uj="orange",vj=!1,D(f.toggle_layout_width,"t")&&(vj=!0),c=f.toggle_colors,null!=c&&(c=c.split(","),tj=c[0].trim(),sj=c[1].trim(),uj=c[2].trim()),rc=x("div"),rc.setAttribute("style","position:relative;border:0px;margin:0px;padding:0px;-webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none; -webkit-tap-heightlight-color:transparent;"),rc.style.backgroundColor=
P.style.backgroundColor,rc.align=bf,Nh=new PEvs(rc,HAniS.togdown,HAniS.togup,null,HAniS.togdown,null,null),Nh.setHysteresis(0),ce=x("canvas"),ce.height=2*yg,Oh=ce.getContext("2d"),rc.appendChild(ce),a?J.insertBefore(rc,Db):J.appendChild(rc),c=f.toggle_onoff,Ag=null,null!=c&&(Ag=c.split(",")),Ph=!0,null!=g&&(rc.title=g));if("overlay"==t||D(t,"menu")){0==lb&&(O=[]);m=f.overlay_tooltip;c=null;null!=m&&(c=m.split(","));m=f.overlay_radio;M=null;null!=m&&(M=m.split(","));var aa=f.overlay_menu_links;G=null;
null!=aa&&(G=aa.split(","));var Fa=f.overlay_labels_color;aa=null;null!=Fa&&(aa=Fa.split(","));var wa=f.overlay_smoothing;Fa=null;null!=wa&&(Fa=wa.split(","));Bg=[];var W=wa=Td=!1;D(t,"menu")&&(Td=!0,0<t.indexOf("/on")&&(wa=!0),0<t.indexOf("/always")&&(W=!0));0==lb&&(tf=[]);var u=f.overlay_caching;t=null;null==u&&(u=f.overlay_static);null!=u&&(t=u.split(","));var Ea=!0;null!=f.overlay_nonewdiv&&(Ea=!1);lb++;for(u=0;u<Tc.length;u++){var K=Tc[u].trim();Bg[u]=ne;null!=Fa&&(D(Fa[u],"t")||D(Fa[u],"y")?
Bg[u]=!0:Bg[u]=!1);if(0==u||0==K.indexOf("/")){0==K.indexOf("/")&&(K=K.substr(1));if(Td){Vb[lb]=x("div");Vb[lb].dropalways=W;var Ja="menu"+lb+"_labels_style";Vb[lb].setAttribute("style","text-align:left;display:block;position:absolute;border-style:solid;border-width:2px;background:#ffffff;z-index:99;visibility:"+(wa||W?"visible":"hidden")+";"+(void 0==f[Ja]?f.overlay_labels_style:f[Ja]));Qh++}else Ea?(Ic=x("div"),Qh++,Ic.align="center",a?J.insertBefore(Ic,Db):J.appendChild(Ic)):(Ic=x("span"),P.appendChild(Ic));
B=f.overlay_labels_style;Td||null==B||Ic.setAttribute("style",B)}if(null==G||null!=G&&G[u]==lb){Ja=!1;-1!=K.indexOf("<a href=")&&(Ja=!0);var cb=!1,la=!1,Va=!1,La=!1;B=K.length;Ja||(0<K.indexOf("/on")&&K.indexOf("/on")==B-3&&(cb=!0),0<K.indexOf("/always")&&K.indexOf("/always")==B-7&&(la=cb=!0),0<K.indexOf("/hidden")&&(Va=!0),0<K.indexOf("/hotspots")&&(La=!0),-1!=K.indexOf("/")&&(K=K.substr(0,K.indexOf("/"))));null!=t?D(t[u],"y")||D(t[u],"t")?tf[u]=!0:tf[u]=!1:tf[u]=!0;O[u]=x("input");O[u].type="checkbox";
O[u].value=K;O[u].id=uf+K;O[u].showMe=!(la&Va)&!La;var nb="vertical-align:middle;";B=f.checkbox_style;null!=B&&(nb+=B);O[u].setAttribute("style",nb);O[u].checked=cb;O[u].restorableState=cb;O[u].name=0;O[u].hotspotIndex=La;null!=kb&&u==hc&&O[u].checked&&(kb.disabled=!1);null!=xc&&!xc[u]&&cb&&(qd=!1);O[u].addEventListener("click",HAniS.overClick,!1);null!=m&&(B=M[u].indexOf("/"),-1!=B&&(O[u].name=M[u].substr(B+1).trim()),D(M[u],"t")&&(O[u].type="radio",-1==B&&(O[u].name="all")));O[u].isGhost=!0;la||
Va||(null!=c&&(O[u].title=c[u]),la=x("label"),la.htmlFor=uf+K,null!=c&&(la.title=c[u]),la.innerHTML=K,la.name=O[u].name,K="vertical-align:middle;",null!=aa&&(K=K+"color:"+aa[u]+";"),la.setAttribute("style",K),K=x("span"),Ja||K.appendChild(O[u]),K.appendChild(la),Td?(K.setAttribute("style","display:block;margin-right:5px;"),Vb[lb].appendChild(K)):(Ja="10",null!=$f&&(Ja=10+$f[u]),K.setAttribute("style","margin-left:"+Ja+"px;"),Ic.appendChild(K)),O[u].isGhost=!1)}}Td&&(de[lb]=x("button"),ua(de[lb],"menu"+
lb,"Show Overlay Menu","Hide Menu",g,"menu off"),de[lb].menuInx=lb,de[lb].addEventListener("click",function(p){if("hidden"===Vb[this.menuInx].style.visibility){for(p=1;p<Vb.length;p++)Vb[p].dropalways||"visible"!=Vb[p].style.visibility||(Vb[de[p].menuInx].style.visibility="hidden",V(de[p],!0,"menu off"));Vb[this.menuInx].style.visibility="visible";V(this,!1,"menu on")}else Vb[this.menuInx].style.visibility="hidden",V(this,!0,"menu off")},!1),Vb[lb].dropalways||P.appendChild(de[lb]),J.insertBefore(Vb[lb],
Db));if(null==Vc)for(Vc=Array(Tc.length),u=0;u<Tc.length;u++)Vc[u]=0;else for(u=0;u<Tc.length;u++)null!=O[u]&&uc(u)}}Wa=!0;qg=null;rg=!1;B=f.start_looping;null!=B&&(c=B.split(","),D(c[0],"f")&&(Wa=!1),1<c.length&&(cc=parseInt(c[1],10)-1,rg=!0,isNaN(cc)&&(cc=0),H=cc),2<c.length&&(D(c[2],"t")&&(qg=!0),D(c[2],"f")&&(qg=!1)));T(Wa)}function uc(b){var a;if(0>Vc[b]){var d=!1;for(a=0;a<Tc.length;a++)Vc[a]!=-Vc[b]||d||(d=O[a].checked);O[b].checked=d}}function Lc(b){0==Rb&&(Sb=[]);b=b.substr(b.indexOf("=")+
1).trim().split(",");var a=b[4].trim(),d=b[4].indexOf("/"),c=b[4].indexOf("?"),e=-1,k=-1;-1!=d&&(e=parseInt(b[4].substring(d+1),10)-1,a=a.substring(0,d));-1!=c&&(k=parseInt(b[4].substring(c+1),10)-1,c<d||-1==d)&&(a=a.substring(0,c));Sb[Rb]=new Zb(parseInt(b[0].trim(),10),parseInt(b[1].trim(),10),b[2].trim(),b[3].trim(),a.toLowerCase(),b[5].trim().toLowerCase(),b[6].trim(),e,k,8<=b.length?b[7].trim():null,9==b.length?b[8].trim():null);Rb+=1}function Ye(b){0==og&&(Gb=[],Ya=null);var a=b.substr(b.indexOf("=")+
1).trim().split("(");b=a[0].split(",");var d=b[0].trim();0==d.indexOf("0x")&&(d="#"+d.substring(2));Gb[og]=new md(d,b[1].trim(),b[2].trim(),b[3].trim(),a[1].trim());og+=1}function tb(b){0==nc&&(vb=[]);b=b.substr(b.indexOf("=")+1).trim().split(",");vb[nc]=new Mc(parseInt(b[0],10)-1,parseInt(b[1],16),b[2].trim(),b[3].trim(),5==b.length?b[4].trim():"Click for details");nc+=1}function md(b,a,d,c,e){this.color=b;this.alpha=1;7<this.color.length&&(this.alpha=parseInt(this.color.substring(7),16)/255,this.color=
this.color.substring(0,7),.1>this.alpha&&(this.alpha=.1));this.action=a;this.value=d;this.tip=c;this.poly=e;b=e.split(",");this.xy=[];this.ymin=this.xmin=9999;for(a=this.ymax=this.xmax=0;a<b.length;a++)this.xy[a]=parseInt(b[a].trim(),10),0==a%2?(this.xy[a]<this.xmin&&(this.xmin=this.xy[a]),this.xy[a]>this.xmax&&(this.xmax=this.xy[a])):(this.xy[a]<this.ymin&&(this.ymin=this.xy[a]),this.xy[a]>this.ymax&&(this.ymax=this.xy[a]));this.height=this.ymax-this.ymin+1;this.width=this.xmax-this.xmin+1;this.can=
x("canvas");this.can.height=this.height;this.can.width=this.width;this.ctx=this.can.getContext("2d");this.ctx.imageSmoothingEnabled=!1;this.ctx.fillStyle=this.color;this.ctx.globalAlpha=this.alpha;this.ctx.beginPath();this.ctx.moveTo(this.xy[0]-this.xmin,this.xy[1]-this.ymin);for(a=2;a<this.xy.length;a+=2)this.ctx.lineTo(this.xy[a]-this.xmin,this.xy[a+1]-this.ymin);this.ctx.closePath();this.ctx.fill()}function Mc(b,a,d,c,e){this.overlay=b;this.color=a;this.action=d;this.value=c;this.tip=e}function Zb(b,
a,d,c,e,k,l,g,t,B,m){this.x0=b;this.y0=a;this.icon=null;this.isIcon=!1;if("icon"==d)this.icon=new Image,this.icon.hotspot=this,Rh=!0,this.icon.onload=function(q){this.gotit=!0;this.hotspot.x1=this.hotspot.x0+this.width;this.hotspot.y1=this.hotspot.y0+this.height;this.hotspot.width=this.width;this.hotspot.height=this.height;this.hotspot.w2=this.width/2;this.hotspot.h2=this.height/2;this.hotspot.isIcon=!0;this.hotspot.origX=0;this.hotspot.origY=0},this.y1=this.x1=-1,this.zoomme=this.fromfile=this.anim=
!1,this.icon.gotit=!1,this.icon.src=c.trim();else if("sprite"==d||"spritefn"===d){this.x0=b;this.y0=a;this.inx=parseInt(c,10)-1;Gf=!1;ui?null!=Ma&&(-1!=Rd?this.inx>=Rd&&this.inx<=Rd+Ma.length&&(Gf=!0):"spritefn"===d&&(Gf=!0)):Gf=!0;if(Gf){-1!=Rd&&(this.inx-=Rd);if(this.inx>=Ma.length)return null;this.x1=Ma[this.inx].width+b;this.y1=Ma[this.inx].height+a;this.width=Ma[this.inx].width;this.height=Ma[this.inx].height;this.w2=this.width/2;this.h2=this.height/2;this.origY=this.origX=0;this.icon=Ma[this.inx].cloneNode();
this.anim=Ma[this.inx].anim;this.fromfile=Ma[this.inx].fromfile;this.zoomme=Ma[this.inx].zoomme;this.anim&&(this.icon.setAttribute("style","position:absolute;top:0px;left:0px;visibility:hidden;"),vd.appendChild(this.icon))}else this.x1=Rc[this.inx]+b,this.y1=Sc[this.inx]+a,this.width=Rc[this.inx],this.height=Sc[this.inx],this.w2=Rc[this.inx]/2,this.h2=Sc[this.inx]/2,this.origX=bh[this.inx],this.origY=ch[this.inx],this.icon=ah,this.zoomme=this.fromfile=this.anim=!1;Rh=this.isIcon=!0;this.icon.gotit=
!0}else this.width=parseInt(d,10),this.height=parseInt(c,10),this.w2=this.width/2,this.h2=this.height/2,$g&&(this.x0=b-this.w2,this.y0=a-this.h2),this.x1=this.width+this.x0,this.y1=this.height+this.y0;this.pan=e;this.isPan=!1;"pan"===this.pan&&(this.isPan=!0);this.action=k;this.value=l;this.overlay=g;this.frame=t;this.tip=B;this.target=m}function Nc(){if(Ne&&!xe){Ba=-1;for(var b=0;b<Ua.length;b++)ba>=Ua[b]&&(Ba=b)}}function dc(){null!=$c?ob=$c.toLatLon(Ga-De,Ha-Ce):null!=vh?(ob[0]=vh+(Tj-vh)*(Ha-
Ce)/Ud,ob[1]=wh+(xh-wh)*(Ga-De)/Be):(ob[0]=Math.round(Ga-De),ob[1]=Math.round(Ha-Ce))}function ie(b,a){"popup"==b.action?(null!=Sh&&Sh.close(),Sh=window.open("","HAniSPopup","scrollbars=yes,width="+Vi+",height="+Ui),Sh.document.write(Ti+b.value+"</div>")):"link"==b.action?(a=b.value,dc(),a=a.replace("%LATITUDE%",ob[0].toFixed(4)),a=a.replace("%LONGITUDE%",ob[1].toFixed(4)),a=a.replace("%FRAMENUMBER%",H+1),a=a.replace("%FRAMENUMBERINDEX%",eh[H]),window.open(a,b.target?b.target:"_blank","")):"fof"==
b.action&&(Da=Li,HAniS.resetZoom(0),HAniS.newFOF(b.value,!0),w(a))}function Dd(){if(!Jd){var b=Qi?ue/ba:0;ra+b<ue&&(ra=ue-b);b=Ri?ve/ba:0;ra+db-b>Na-ve&&(ra=Na-db+b-ve);b=Pi?te/da:0;sa+b<te&&(sa=te-b);b=Oi?se/da:0;sa+eb-b>Oa-se&&(sa=Oa-eb-se+b);sa=Math.round(sa);ra=Math.round(ra)}}function Ze(b){var a=!1;b?xe?(Ba--,0>Ba?a=!0:(ba=Ua[Ba],da=Ua[Ba])):(ba-=.1*we/X,da-=.1*we/Y):xe?(Ba++,Ba>=Ua.length?(Ba--,qh&&(a=!0)):(ba=Ua[Ba],da=Ua[Ba])):(!qh||ba!==Ld&&da!==Ld||(a=!0),ba+=.1*we/X,da+=.1*we/Y,ba>Ld&&
(ba=Ld),da>Ld&&(da=Ld));a||ba<=pg||da<=Cg?(ba=pg,da=Cg,Ba=-1,Ga=R,Ha=Q,sa=ra=0,eb=Oa,db=Na,ue=ve=te=se=0,yd&&(Hb=!0)):(se=mh,te=nh,ve=ph,ue=oh,ra=Ga-R/ba,sa=Ha-Q/da,eb=Math.floor(Oa/da),db=Math.floor(Na/ba),Dd(),yd&&(Hb=!1));Nc();void 0!=Oe&&Oe(["zoom",ba,da,Ga,Ha,R,Q,ra,sa,db,eb])}function Oc(){Dg=0;Jc=Array(2);sc=Array(2);Pe=Array(2);Ib=0;qe=null;Ra(Ka(0))}function T(b){hb=!b;HAniS.toggleIsLooping()}function $e(b,a,d,c,e,k,l,g){Ae.height=e;Ae.width=c;of.clearRect(0,0,c,e);of.imageSmoothingEnabled=
ne;z.imageSmoothingEnabled=ne;of.drawImage(b,a,d,c,e,0,0,c,e);wj=of.getImageData(0,0,c,e);ee=wj.data;Th=Ob[g];Uh=Pb[g];Vh=Qb[g];Wh=lf[g];bk=4*c*e;for(gd=0;gd<bk;gd+=4)Wb=ee[gd],Wb===ee[gd+1]&&Wb===ee[gd+2]&&(ee[gd]=Th[Wb],ee[gd+1]=Uh[Wb],ee[gd+2]=Vh[Wb],ee[gd+3]=Wh[Wb]);of.putImageData(wj,0,0);z.drawImage(Ae,k,l,fa,ca)}function V(b,a,d){null!=b&&(a?(null!=b.style_on&&b.setAttribute("style",b.style_on),b.innerHTML=b.label_on):(null!=b.style_off&&b.setAttribute("style",b.style_off),b.innerHTML=b.label_off),
ac&&(b.className=d))}function qb(b,a){if(!(b>=y)&&(-2==yb[b]&&(a=-2),yb[b]=a,Bh&&1==a&&(rb.value=b+1,zf.innerHTML=wg.replace("*",b+1)),Ph)){b=xj+b*(Me+zg);var d=uj;0==a?d=tj:-1==a?d=sj:-2==a&&(d=xi);Oh.fillStyle=d;Oh.fillRect(b,yg/2,Me,yg)}}function Mf(b,a){Ph&&(ce.width=vj?parseInt(J.style.width,10):fa,Oh.clearRect(0,0,ce.width,ce.height),xj=ce.width/2-b*(Me+zg)/2);for(var d=0;d<b;d++)a?-1!=ff?qb(d,-2):null!=Ag&&"n"==Ag[d].toLowerCase().trim()?qb(d,-1):qb(d,0):qb(d,yb[d])}function Ra(b){qb(H,0);
H=b;qb(H,1);null!=Ab&&null!=Ub&&null!=Ub[H]&&(Ab.innerHTML=Ub[H]);void 0!=Eg&&Eg(H)}function Ka(b){b>=y&&(b=y-1);if(0<=yb[b])return b;var a=-1,d=b;0==d&&(a=1);for(var c=0;c<y-1;c++)if(d+=a,0<=yb[d])return d;return b}function ec(b){qb(H,0);var a=b;do 0<a?(a=Ka(y-1),H+=1,H>a&&(Hf&&hb?(H=a,b=-b,pc&&T(!1)):pc?(H=a,T(!1)):H=Ka(0))):(a=Ka(0),--H,H<a&&(Hf&&hb?(H=a,b=-b,pc&&T(!1)):pc?(H=a,T(!1)):H=Ka(y-1))),a=b;while(0>yb[H]);pc=Fg;void 0!=Eg&&Eg(H);wf=a;qb(H,1);null!=Ab&&null!=Ub&&null!=Ub[H]&&(Ab.innerHTML=
Ub[H])}function $b(b,a,d,c,e,k,l){this.bg=b;null!=b&&0==this.bg.indexOf("0x")&&(this.bg="#"+this.bg.substring(2));this.fg=a;null!=a&&0==this.fg.indexOf("0x")&&(this.fg="#"+this.fg.substring(2));this.font=d;this.fontHeight=Math.round(1.1*parseInt(d,10));this.scolor=c;null!=c&&0==this.scolor.indexOf("0x")&&(this.scolor="#"+this.scolor.substring(2));this.sblur=e;this.sxoff=k;this.syoff=l}function Cb(b,a,d,c,e){r.globalAlpha=1;r.font=b.font;var k=b.fontHeight;d=d-k-6;var l=r.measureText(c).width;1==e&&
(a-=l);0==e&&(a-=l/2);5>a&&(a=5);5>d&&(d=5);d+k+3>ca&&(d=ca-k-6);a+3+l>fa&&(a=fa-l-6);r.save();r.beginPath();r.fillStyle=b.bg;null!=b.scolor&&(r.shadowColor=b.scolor,r.shadowBlur=b.sblur,r.shadowOffsetX=b.sxoff,r.shadowOffsetY=b.syoff);Gg=a-3;Xh=d;yj=l+6;Yh=k+6;r.fillRect(Gg,Xh,yj,Yh);r.closePath();r.restore();r.textBaseline="bottom";r.fillStyle=b.fg;r.fillText(c,a,d+k+3)}function va(){r.clearRect(0,0,fa,ca);Zh=!1;if(Bb){r.beginPath();r.lineWidth=2;r.strokeStyle="white";var b=Ib;1<b&&(b=2);for(var a=
0;a<b;a++)1<Ib&&(r.moveTo(Jc[0]/X,sc[0]/Y),r.lineTo(Jc[1]/X,sc[1]/Y)),r.moveTo(Jc[a]/X-15,sc[a]/Y),r.lineTo(Jc[a]/X+15,sc[a]/Y),r.moveTo(Jc[a]/X,sc[a]/Y-15),r.lineTo(Jc[a]/X,sc[a]/Y+15);r.closePath();r.stroke();if(3==Ib){var d=oa,c=ma;r.moveTo(d,c);r.fillStyle=sd;r.fillRect(d-2,c-2,5,5);b=Qe;a=Math.round(d+Hg/X*If*(Qe-Pe[1]));for(var e=Math.round(c+Jf/Y*If*(Qe-Pe[1])),k=0;300>k;k++){r.beginPath();r.lineWidth=1;r.strokeStyle=sd;r.moveTo(d,c);r.lineTo(a,e);r.stroke();r.beginPath();r.lineWidth=3;r.rect(a-
2,e-2,5,5);r.stroke();if(3>a||a+3>fa||3>e||e+3>ca)break;c=ad+b;c=100*Math.floor(c/60)+c%60;c%=2400;Gi?(d="AM",1200<=c?(1300<=c&&(c-=1200),d="PM"):100>c&&(c+=1200),d=Math.floor(c/100)+":"+Math.floor(Math.floor(c%100)/10)+Math.floor(c%10)+" "+d):(d=c+" ",1E3>c&&(d="0"+c),100>c&&(d="00"+c),10>c&&(d="000"+c));c=0;Math.abs($h)<pe+5&&(c=45*Kc);var l=e;0>zj*$h&&0==c&&(l=e+pe);r.font=hf;d=d+" "+Fi;var g=r.measureText(d).width;r.fillStyle=gf;0===c?(r.fillRect(a+2,l-pe-2+c,g+4,pe+3),r.fillStyle=sd,r.textBaseline=
"bottom",r.fillText(d,a+5,l)):(r.save(),r.translate(a+5,e),r.rotate(c),r.fillRect(2,-2,g+4,pe+3),r.fillStyle=sd,r.textBaseline="bottom",r.fillText(d,5,pe),r.restore());d=a;c=e;a=Math.round(d+If*zj);e=Math.round(c+If*$h);b+=Ca}}null!=qe&&Cb(ih,ck,dk,qe,0);yf&&(Cb(Oj,9999,$i,Zi[Dg],0),Aj=Gg,Bj=Xh,Cj=Xh+Yh)}if(qc){Tb=!1;yf&&(0==Ie?Cb(jj,9999,10,fg[0],0):(Cb(Yj,10,10,fg[1],0),ek=Gg+yj,Cb(jj,9999,10,fg[2],0)),fk=Gg,gk=Yh);r.beginPath();r.lineWidth=2;r.strokeStyle=aj;for(b=0;b<Xa.length;b+=2)0==b?r.moveTo(Xa[b]/
X,Xa[b+1]/Y):r.lineTo(Xa[b]/X,Xa[b+1]/Y);gg&4<Xa.length&&r.lineTo(Xa[0]/X,Xa[1]/Y);r.stroke();for(b=0;b<Xa.length;b+=2)r.beginPath(),r.rect(Xa[b]/X-2,Xa[b+1]/Y-2,5,5),r.stroke()}if(Gc)for(Tb=!1,b=0;b<L.length;b++){d=L[b].type;r.beginPath();r.strokeStyle=L[b].color;r.lineWidth=L[b].width;if("0"==d||"6"==d)a=Math.atan2(L[b].xe-L[b].x,L[b].ye-L[b].y),e=L[b].x+L[b].width*Math.sin(a),k=L[b].y+L[b].width*Math.cos(a),r.beginPath(),r.moveTo(e,k),r.lineTo(L[b].xe,L[b].ye),"0"==d&&(d=12+L[b].width/5,c=30*Kc,
r.moveTo(e+d*Math.sin(a-c),k+d*Math.cos(a-c)),r.lineTo(e,k),r.lineTo(e+d*Math.sin(a+c),k+d*Math.cos(a+c)));else if("1"==d)r.arc(L[b].x,L[b].y,L[b].size,0,2*Math.PI);else if("2"==d)r.rect(L[b].x-L[b].size,L[b].y-L[b].size,2*L[b].size,2*L[b].size);else if("3"==d){r.moveTo(L[b].xp[0],L[b].yp[0]);for(e=1;e<L[b].xp.length;e++)r.lineTo(L[b].xp[e],L[b].yp[e]);r.lineTo(L[b].xp[0],L[b].yp[0])}else if("4"==d)for(r.moveTo(L[b].xp[0],L[b].yp[0]),e=1;e<L[b].xp.length;e++)r.lineTo(L[b].xp[e],L[b].yp[e]);else"5"==
d&&(r.fillStyle=L[b].color,r.font=L[b].width+"pt arial",a=r.measureText(L[b].text).width,r.fillText(L[b].text,L[b].x-a/2,L[b].y+L[b].width/2));r.stroke()}Tb&&(oa=Ia.getX(),R=oa*X,Ga=ra+R/ba,ma=Ia.getY(),Q=ma*Y,Ha=sa+Q/da,r.beginPath(),r.strokeStyle=oi,r.lineWidth=3,r.moveTo(ai/X,bi/Y),r.lineTo(Ig/X,Jg/Y),r.stroke(),r.closePath(),Re&&(dc(),Dj=ob[0],Ej=ob[1]),le?(fe=Kc*Se[0],ge=Kc*Dj,Kf=Kc*Se[1],Lf=Kc*Ej,ci=Math.pow(Math.sin((ge-fe)/2),2)+Math.cos(fe)*Math.cos(ge)*Math.pow(Math.sin((Lf-Kf)/2),2),ci=
12742.02*Uf*Math.asin(Math.min(1,Math.sqrt(ci))),b=" "+ci.toFixed(Wg)+" "+me+" ",cf&&(a=D(cf,"t")?(Math.atan2(Math.sin(Lf-Kf)*Math.cos(ge),Math.cos(fe)*Math.sin(ge)-Math.sin(fe)*Math.cos(ge)*Math.cos(Lf-Kf))/Kc+360)%360:(Math.atan2(Math.sin(Kf-Lf)*Math.cos(fe),Math.cos(ge)*Math.sin(fe)-Math.sin(ge)*Math.cos(fe)*Math.cos(Kf-Lf))/Kc+360)%360,b=b+" ("+a.toFixed(0)+"\u00b0)")):(a=Ed*(Se[0]-Dj),e=Sf*(Se[1]-Ej),b=" "+Math.sqrt(a*a+e*e).toFixed(Wg)+" "+me+" ",cf&&(a=Math.atan2(-a,e)/Kc,0>a&&(a+=360),D(cf,
"f")&&(a+=180),360<a&&(a-=360),b=b+" ("+a.toFixed(0)+"\u00b0)")),Cb(Mj,Ig/X+10,Jg/Y,b,-1));Cc&&Cb(Ki,Fj,Gj,Hj,-1);if(Qc||Ge||Yf)if(oa=Ia.getX(),R=oa*X,ma=Ia.getY(),Q=ma*Y,0<=R&&0<=Q){Ga=ra+R/ba;Ha=sa+Q/da;if(Ge){dc();b=ob[1];le&&180<b&&(b-=360);le&&360<b&&(b-=360);hk=Pf+ob[0].toFixed(Qg)+"  "+Qf+b.toFixed(Qg);b=ma;if(Tb||Cc)b=ma+ni.fontHeight+6;Cb(ni,oa+10,b,hk,-1)}if(Yf)for(r.fillStyle=si,b=0;b<Rb;b++)if(a=Sb[b],a.isPan){if(Ga>=a.x0&&Ga<=a.x1&&Ha>=a.y0&&Ha<=a.y1){(-1===a.overlay||O[a.overlay].checked)&&
r.fillRect((a.x0-ra)*ba,(a.y0-sa)*da,a.width*ba,a.height*da);break}}else if(R>a.x0&&R<a.x1&&Q>a.y0&&Q<a.y1){(-1===a.overlay||O[a.overlay].checked)&&r.fillRect(a.x0,a.y0,a.width,a.height);break}if(Qc&&Od&&Xd)if(Ga=Math.round(Ga),Ha=Math.round(Ha),a=Ga-De,e=Ha-Ce,Yg)Jb.clearRect(0,0,1,1),Jb.drawImage(wb[H],a,e,1,1,0,0,1,1),ya=Jb.getImageData(0,0,1,1).data,ta=0,af(!1);else for(d=-1,k=xa-1;0<=k;k--)if(b=null!=Uc?Uc[k]:k,ja[H][b].gotit&&O[b].checked&&(null!=Nb&&Nb[b]&&-1==d&&(d=b),b==hc||null!=pd[b]&&
0<=pd[b]))if(!Xg||-1==d||oa<ia[d][0][4]||oa>ia[d][0][6]||ma<ia[d][0][5]||ma>ia[d][0][7]){Jb.clearRect(0,0,1,1);b==hc?Jb.drawImage(cd[H],a,e,1,1,0,0,1,1):Jb.drawImage(ja[H][b],a,e,1,1,0,0,1,1);ya=Jb.getImageData(0,0,1,1).data;ta=pd[b];null!=ta&&af(b==hc||dj);break}}!Hb||Bb||fc||Qc||null==Ya||(r.drawImage(Ya.can,0,0,Ya.width,Ya.height,Ya.xmin/X,Ya.ymin/Y,Ya.width/X,Ya.height/Y),Cb(Ki,(Ya.xmin+Ya.xmax)/2/X,(Ya.ymin+Ya.ymax)/2/Y,Ya.tip,0),Zh=!0)}function af(b){Kg=999;hd=pi;var a=mc[ta].length-1;if(0==
ya[3])hd=jg[ta];else{if(qi)id=ya[0];else if(b)di=0,id=ya[0],Kg=0;else for(var d=0;d<a;d++)jd[0]=ya[0]-Ob[ta][d],0>jd[0]*(Ob[ta][d+1]-ya[0]-1)||(jd[1]=ya[1]-Pb[ta][d],0>jd[1]*(Pb[ta][d+1]-ya[1]-1)||(jd[2]=ya[2]-Qb[ta][d],0>jd[2]*(Qb[ta][d+1]-ya[2]-1)||(Te=uh[ta][d],kd=jd[Te]/Sd[ta][d][Te],Ij=Math.abs(jd[Jj[Te]]-kd*Sd[ta][d][Jj[Te]])+Math.abs(jd[Kj[Te]]-kd*Sd[ta][d][Kj[Te]]),Ij<Kg&&(id=d,Kg=Ij,di=kd))));if(999>Kg)hd=Qd[ta][id],-1!=Zc[ta][id]&&(ei=mc[ta][id],0!=di&&(ei+=di*(mc[ta][id+1]-mc[ta][id])),
hd=void 0==ei?"hide":hd+" "+ei.toFixed(Zc[ta][id])+" "+Pd[ta][id]);else if(b||0<df){var c=-1;if(b)c=ya[0];else for(d=0;d<a;d++)if(Math.abs(ya[0]-Ob[ta][d])<df&&Math.abs(ya[1]-Pb[ta][d])<df&&Math.abs(ya[2]-Qb[ta][d])<df){c=d;break}-1!=c&&(hd=Qd[ta][c],-1!=Zc[ta][c]&&(hd=hd+" "+mc[ta][c].toFixed(Zc[ta][c])+" "+Pd[ta][c]))}}"hide"!=hd&&Cb(Nj,oa-10,ma,hd,1)}function ha(){fi=ra-De;0>fi?(Ue=0,Ve=-fi*fa/db):(Ue=fi,Ve=0);gi=sa-Ce;0>gi?(We=0,Xe=-gi*ca/eb):(We=gi,Xe=0);if(Xd)try{z.clearRect(0,0,fa,ca);z.globalAlpha=
1;if(!Si)if(Ne&&null!=dd&&0<=Ba&&dd[Ba].gotit)z.drawImage(dd[Ba],ra*Ua[Ba],sa*Ua[Ba],db*Ua[Ba],eb*Ua[Ba],0,0,fa,ca);else if(wb[H].gotit&&(null!=dh?$e(wb[H],Ue,We,db,eb,Ve,Xe,dh):z.drawImage(wb[H],Ue,We,db,eb,Ve,Xe,fa,ca)),null!=ub&&(z.globalAlpha=1,wb[H].gotit))for(var b=0;b<ub.length;b+=4)z.drawImage(wb[H],ub[b],ub[b+1],ub[b+2],ub[b+3],ub[b]/X,ub[b+1]/Y,ub[b+2]/X,ub[b+3]/Y);if(0<xa){for(b=0;b<xa;b++){var a=null!=Uc?Uc[b]:b;z.imageSmoothingEnabled=Bg[a];if(!fh[a]&&O[a].checked&&O[a].showMe)if(null!=
ag&&(z.globalAlpha=ag[a]),Ne&&0<=Ba&&null!=gb&&void 0!=gb[a]&&gb[a][Ba][H].gotit)z.drawImage(gb[a][Ba][H],ra*Ua[Ba],sa*Ua[Ba],db*Ua[Ba],eb*Ua[Ba],0,0,fa,ca);else if(ja[H][a].gotit)if(vc||nd){bb=0==jb?ca/2:0>jb?ca+jb:jb;z.save();vc?(z.beginPath(),z.strokeStyle="#00000000",z.lineWidth=1,z.rect(za,0,fa-za,ca),z.closePath(),z.clip()):(kd=1-za/fa,1<kd&&(kd=1),0>kd&&(kd=0),z.globalAlpha=kd);z.drawImage(ja[H][a],Ue,We,db,eb,Ve,Xe,fa,ca);z.restore();z.beginPath();z.strokeStyle=Tg;z.fillStyle=Tg;z.lineWidth=
Ug;vc&&(z.moveTo(za,0),z.lineTo(za,ca));if(0==wc)z.rect(za-Pc/2,bb-Eb/2,Pc,Eb);else if(1==wc)z.moveTo(za,bb-Eb/2),z.lineTo(za+Pc/2,bb),z.lineTo(za,bb+Eb/2),z.lineTo(za-Pc/2,bb),z.lineTo(za,bb-Eb/2);else if(2==wc){var d=2*Ug+2;z.moveTo(za+d,bb-Eb/2);z.lineTo(za+Pc/2,bb);z.lineTo(za+d,bb+Eb/2);z.lineTo(za+d,bb-Eb/2);z.moveTo(za-d,bb-Eb/2);z.lineTo(za-Pc/2,bb);z.lineTo(za-d,bb+Eb/2);z.lineTo(za-d,bb-Eb/2)}else 3==wc&&z.ellipse(za,bb,Pc,Eb,0,0,2*Math.PI);z.closePath();z.stroke();Vg&&z.fill()}else null==
rd||1===rd[a]?null!=Hd&&0<=Hd[a]?$e(ja[H][a],Ue,We,db,eb,Ve,Xe,Hd[a]):z.drawImage(ja[H][a],Ue,We,db,eb,Ve,Xe,fa,ca):null!=rd&&0===rd[a]&&z.drawImage(ja[H][a],0,0,Na,Oa,0,0,fa,ca)}if(null!=Nb)for(z.globalAlpha=1,b=0;b<xa;b++)if(a=null!=Uc?Uc[b]:b,ja[H][a].gotit&&(Ei[a]||O[a].checked)&&Nb[a])for(d=0;d<ia[a].length;d++)z.drawImage(null!=ja[H][a].origImage?ja[H][a].origImage:ja[H][a],ia[a][d][0],ia[a][d][1],ia[a][d][2],ia[a][d][3],ia[a][d][4]/X,ia[a][d][5]/Y,ia[a][d][2]/X,ia[a][d][3]/Y)}Qc&&va();ij&&
v();if(Rh)for(z.globalAlpha=1,a=0;a<Rb;a++)if(null!=Sb[a]){var c=Sb[a];null!=c.icon&&(c.icon.style.visibility="hidden");if((-1==c.frame||c.frame==H)&&null!=c.icon&&c.icon.gotit&&(-1==c.overlay||-1!=c.overlay&&O[c.overlay].checked)){if(c.isPan){c.zoomme&&(c.icon.style.width=Math.round(c.width*ba)+"px",c.icon.style.height=Math.round(c.height*da)+"px",c.w2=Math.round(c.width*ba/2),c.h2=Math.round(c.height*da/2));var e=Math.round(((c.x0-ra)*ba-c.w2)/X);var k=Math.round(((c.y0-sa)*da-c.h2)/Y);if(c.anim){if(0>=
e+c.icon.width||e>=Na||0>=k+c.icon.height||k>=Oa)continue;c.icon.style.top=k+"px";c.icon.style.left=e+"px"}else z.drawImage(c.icon,c.origX,c.origY,c.width,c.height,e,k,c.width/X,c.height/Y)}else z.drawImage(c.icon,c.origX,c.origY,c.width,c.height,c.x0/X,c.y0/Y,c.width/X,c.height/Y);c.icon.style.visibility="visible"}}Lg&&(Mg.addFrame(z,{copy:!0,delay:hi}),H==Ka(y-1)&&(Lg=!1,T(Wa),Mg.render()))}catch(l){ea("Error:"+l)}}function ab(b,a,d){!eg||d>=a||(z.save(),z.fillStyle="blue",z.strokeStyle="white",
z.lineWidth=3,z.strokeRect(kg,lg,200,18),z.fillRect(kg,lg,d/a*200,18),a=z.measureText(b).width,z.fillStyle="orange",z.font="14px arial",z.fillText(b,kg+100-a/2,lg+14),z.restore())}function v(){eg&&bd>xb?ab("Loading Images",bd,xb):(ij=!1,Pg&&(bc.style.visibility="hidden"));xb>=bd&&(hb||Ra(Ka(H)),null!=ke&&(kb.value=ke,HAniS.doEnhance(null),ke=null),void 0!=mg&&mg(!0),null!=oc&&(oc.disabled=!1),null!=Bc&&(Bc.disabled=!1),rg&&ha())}function ea(b){if(Nf&&Og&&!Og.closed)try{Og.document.write(b+"<br>")}catch(a){}}
function Xj(){0!=Fd?(hi=Fd,Fd=0):(hb&&ec(wf),hi=H==Ka(y-1)?ri+mb:mb);ha();setTimeout(function(){pk(Xj)},hi)}function Ng(b){for(;-180>b;)b+=360;for(;180<b;)b-=360;return b}function nk(){var b,a,d,c,e,k,l,g,t=Math.PI/180;this.init=function(B){for(var m=[],q=1;q<B.length;q++)m[q]=parseFloat(B[q]);a=m[1];b=m[4]/m[5];e=m[6];k=m[7];B=this.toXY(m[2],m[3]);e=B[0];k=B[1]};this.toXY=function(B,m){d=b*Ng(m-a)*t-e;c=-b*B*t-k;return[d,c]};this.toLatLon=function(B,m){l=-(m+k)/b/t;g=Ng((B+e)/b/t+a);return[l,g]}}
function mk(){var b,a,d,c,e,k,l,g,t,B,m,q,M,G,aa,Fa,wa,W,u,Ea,K,Ja,cb,la,Va,La,nb,p,U,F,S,qa=Math.PI/180;this.init=function(ib){for(var Aa=[],ld=1;ld<ib.length;ld++)Aa[ld]=parseFloat(ib[ld]);b=Aa[1];a=Aa[2];Ea=0==Aa[8]?!1:!0;K=Aa[6];Ja=K*K;cb=Ja*Ja;la=cb*Ja;Va=cb*cb;l=Aa[5]/Aa[7];S=Aa[7];Ea?(g=Math.cos(qa*b),t=Math.sin(qa*b)):(g=Math.cos(-b*qa),t=Math.sin(-b*qa));wa=g/Math.sqrt(1-Ja*t*t);u=(1-K*t)/(1+K*t);Fa=Ea?Math.tan(Math.PI/4-b*qa/2)/Math.pow(u,K/2):Math.tan(Math.PI/4- -b*qa/2)/Math.pow(u,K/2);
G=Aa[9];aa=Aa[10];ib=this.toXY(Aa[3],Aa[4]);G=ib[0];aa=ib[1]};this.toXY=function(ib,Aa){Ea?(e=qa*ib,k=qa*(Aa-a)):(e=qa*-ib,k=qa*(a-Aa));u=(1-K*Math.sin(e))/(1+K*Math.sin(e));W=Math.tan(Math.PI/4-e/2)/Math.pow(u,K/2);La=90!=b&&-90!=b?l*wa*W/Fa:2*l*S*W/Math.sqrt(Math.pow(1+K,1+K)*Math.pow(1-K,1-K));d=La*Math.sin(k);c=La*Math.cos(k);Ea||(d=-d,c=-c);B=d-G;m=c-aa;return[B,m]};this.toLatLon=function(ib,Aa){d=ib+G;c=Aa+aa;La=Math.sqrt(d*d+c*c);W=90==b||-90==b?La*Math.sqrt(Math.pow(1+K,1+K)*Math.pow(1-K,
1-K))/(2*l*S):La*Fa/(l*wa);nb=Math.PI/2-2*Math.atan(W);p=Math.sin(2*nb);U=Math.sin(4*nb);F=Math.sin(6*nb);e=nb+p*Ja/2+5*p*cb/24+p*la/12+13*p*Va/360+7*U*cb/48+29*U*la/240+811*U*Va/11520+7*F*la/120+81*F*Va/1120+4279*Math.sin(8*nb)*Va/161280;Ea?(q=e/qa,M=Math.atan2(d,c)/qa+a):(q=-e/qa,M=-Math.atan2(-d,-c)/qa+a);return[q,Ng(M)]}}function ok(){var b,a,d,c,e,k,l,g,t,B,m,q,M,G,aa,Fa,wa,W,u,Ea,K,Ja,cb,la,Va,La,nb,p,U,F,S,qa,ib,Aa,ld,he=Math.PI/180;this.init=function(Bd){for(var Kb=[],ii=1;ii<Bd.length;ii++)Kb[ii]=
parseFloat(Bd[ii]);b=Kb[1];a=Kb[2];d=Kb[3];la=Kb[7];Va=la*la;La=Va*Va;nb=La*Va;p=La*La;g=Kb[6]/Kb[8];t=Math.cos(he*b);B=Math.cos(he*a);q=Math.sin(b*he);m=Math.sin(a*he);K=t/Math.sqrt(1-Va*q*q);Ja=B/Math.sqrt(1-Va*m*m);u=Math.sqrt((1-q)/(1+q)*Math.pow((1+la*q)/(1-la*q),la));Ea=Math.sqrt((1-m)/(1+m)*Math.pow((1+la*m)/(1-la*m),la));S=(Math.log(K)-Math.log(Ja))/(Math.log(u)-Math.log(Ea));qa=K/(S*Math.pow(u,S));Aa=g*qa*Math.pow(u,S);wa=Kb[9];W=Kb[10];Bd=this.toXY(Kb[4],Kb[5]);wa=Bd[0];W=Bd[1]};this.toXY=
function(Bd,Kb){k=he*Bd;l=he*Ng(Kb-d);ld=Math.sin(k);cb=Math.sqrt((1-ld)/(1+ld)*Math.pow((1+la*ld)/(1-la*ld),la));F=g*qa*Math.pow(cb,S);ib=S*l;c=F*Math.sin(ib);e=Aa+F*Math.cos(ib);M=c-wa;G=e-W;return[M,G]};this.toLatLon=function(Bd,Kb){c=Bd+wa;e=Kb+W;F=Math.abs(S)/S*Math.sqrt(c*c+(Aa-e)*(Aa-e));cb=Math.pow(F/(g*qa),1/S);U=Math.PI/2-2*Math.atan(cb);ib=0>S?Math.atan(-c/(e-Aa)):Math.atan(c/(Aa-e));l=ib/S;k=U+(Va/2+5/24*La+nb/12+13/360*p)*Math.sin(2*U)+(7/48*La+29/240*nb+811/11520*p)*Math.sin(6*U)+(7/
120*nb+81/1120*p)*Math.sin(6*U)+4279/161280*p*Math.sin(8*U);aa=k/he;Fa=Ng(d-l/he);return[aa,Fa]}}var wi,ca,fa,Oa,Na,Ud,Be,X,Y,De,Ce,bj,cj,Dc,Ec,bc,Pg,Ia,Nf,Sh,Og,zd,ji,Jd,J,P,sg,tg,Db,uf,vd,pf,ik,jk,gc,z,Jb,od,r,nf,Eh,fi,gi,Ue,We,Ve,Xe,Kd,jh,cg,hj,kh,wd,y,fb,Wi,Vb,Td,lb,de,xa,fh,Tc,Uc,na,xd,Vc,re,Da,Li,wb,ja,Af,vc,Ke,za,Pc,Eb,Tg,Ug,wc,Bf,yc,nd,Le,Vg,jb,bb,zh,Uj,ej,vi,O,ag,tf,Cc,Hj,Fj,Gj,oe,zc,gh,pa,yi,mf,Ah,oa,ma,R,Q,Ga,Ha,db,eb,ra,sa,yf,ac,cc,rg,Wj,hb,Wa,qg,H,Eg,wf,Hf,Oe,ud,ze=!0,Zf,ug,Hh,Gh,Rf,
Of,f,mb,Wc,Md,Je,mg,rh,ri,Fd,Xf,hi,ne,ti,Bg,kb,Ee,Id,hc,ke,Fb,cd,Vd,sf,Ch,ng,dh,Ae,of,wj,ee,Wb,Th,Uh,Vh,Wh,bk,gd,Hd,yb,Me,yg,zg,vj,rc,xj,Nh,ki,sj,tj,uj,ff,xi,Sb,Rb,Rh,lh,Yf,$g,si,th,Ma,Rd,Gf,fj,nc,vb,ya,li,Gb,og,Hb,yd,Dh,rf,Ya,Zh,xc,qd,Ua,Ba,dd,Wd,gb,zb,Ne,Ub,Ab,Cd,Ph,Ag,ce,Oh,Xd,je,Ac,lc,kc,Fc,Yc,Xc,$f,oc,Lg,Mg,Bc,ye,Zd,qc,Ie,fg,sh,gg,ig,aj,Xa,Yj,jj,fk,ek,gk,ed,Bb,Ib,Jc,sc,Pe,Aj,Zi,Bj,Cj,$i,Oj,jc,If,Hg,Jf,Lj,Kc,kf,yh,zj,$h,Qe,Ca,Dg,ad,bg,Fi,sd,gf,hf,pe,Gi,Hi,ak,Lh,Mh,Kh,rj,Jh,Cf,L,Ih,oj,fd,qj,pj,
Qa,Gc,be,Df,ae,$d,xg,Zj,Ff,Ef,Ad,Hc,lj,mj,Ta,Ni,Mi,we,ba,da,pg,Cg,Yi,td,jf,Xi,dg,Sa,Ld,xe,Re,qh,zi=!1,Ai,Bi,Ci,hh,Di,pc,Fg,vg,kj,vf,xf,rb,wg,zf,Bh,Pa,fc,ai,bi,Wg,Tf,le,Gg,Xh,yj,Yh,gj=!0,qf,mi,Ig,Jg,Mj,oi,Sg,sb,Rg,Vf,Yd,Dj,Ej,Tb,Ed,Sf,me,cf,fe,ge,Kf,Lf,ci,Uf,Ki,eh,Fe,Ge,Qg,Pf,Qf,ni,$c,ob,Se,hk,vh,wh,Tj,xh,ub,Ic,Qh,rd,Nb,ia,Ei,Fh,hg,Nd,Ti,Vi,Ui,pd,Qc,He,Wf,Xg,Od,Pd,Qd,Zc,Te,Kg,Nj,pi,df,qi,Yg,ih,Ii,Ji,qe,ck,dk,id,di,kd,Jj,Kj,jd,ta,Ij,hd,ei,mc,N,Sd,dj,Ob,Pb,Qb,lf,uh,jg,kk,ef,Zg,Gd,eg,ah,bh,ch,Rc,Sc,ui,
ij,kg,lg,xb,bd,se,Si,mh,te,nh,ue,oh,Oi,Pi,Ri,Qi,ve,ph,bf,ic,qk="N NNE NE ENE E ESE SE SSE S SSW SW WSW W WNW NW NNW N".split(" "),pk=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(b,10)},x=function(b){return document.createElement(b)},D=function(b,a){return null==b?!1:0==b.trim().toLowerCase().indexOf(a)},Vj=function(b,a){if(null!=b)return b=b.trim(),b.lastIndexOf(a)===b.length-1},Sj=function(b){void 0==
ji&&(ji=x("textarea"));ji.innerHTML=b;return ji.value},nj=function(b,a,d){var c=x("select");c.style.width="70px";c.style.margin="5px";for(var e=0;e<b.length;e++){var k=x("option");k.innerHTML=b[e];k.value=a[e];c.add(k)}c.addEventListener("change",d,!1);return c},Rj=function(b){b=b.split(",");na=Array(y);for(var a=0;a<b.length;a++){var d=b[a].split("&");xa=b.length;for(var c=0;c<y;c++)0===a&&(na[c]=Array(xa)),na[c][a]=d[1==d.length?0:c].trim(),null!=ic?na[c][a]=(ic+na[c][a]).trim():null!=Da&&(na[c][a]=
(Da+na[c][a]).trim())}je=!1},Pj=function(b){b=b.split(",");y=b.length;fb=Array(y);for(var a=0;a<y;a++)fb[a]=null!=Da?Da+b[a].trim():b[a].trim();je=!1;y>xa&&(xa=0)},Qj=function(b,a,d){var c=b;null!=Da&&(c=Da+b);fb=Array(y);for(var e=0;e<y;e++){b=e*d+a;if(0<=c.indexOf("*"))fb[e]=c.replace("*",b);else if(0<=c.indexOf("?")){for(var k=c;0<=k.lastIndexOf("?");){var l=k.lastIndexOf("?");k=k.substring(0,l)+b%10+k.substring(l+1);b=Math.floor(b/10)}fb[e]=k}else fb[e]=c+e;ea("image filename = "+fb[e])}D(f.reverse_order,
"t")&&fb.reverse();je=!1;y>xa&&(xa=0)};HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(b,a,d){d=window.atob(this.toDataURL(a,d).split(",")[1]);for(var c=d.length,e=new Uint8Array(c),k=0;k<c;k++)e[k]=d.charCodeAt(k);b(new Blob([e],{type:a||"image/png"}))}});this.setup=function(b,a,d,c){void 0==a&&(a="MORdivcan");if("string"==typeof a)uf=a,J=document.getElementById(a);else{J=a;if("DIV"!=J.nodeName){console.log("Invalid value for HAniS div element...");
return}uf=""==J.id?("MORdivcan"+Math.round(1E7*Math.random())).trim():J.id}qf=d;void 0!=qf&&"function"!=typeof qf&&(qf=null);mi=void 0!=c?c.split("\n"):null;bf="center";J.align=bf;Db=x("div");Db.setAttribute("style","position:relative;border:0px;margin:0px;padding:0px;-webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none; -webkit-tap-heightlight-color:transparent;");gc=x("canvas");gc.setAttribute("style","position:absolute;top:0;left:0;z-index:1;");z=gc.getContext("2d");
od=x("canvas");od.setAttribute("style","position:absolute;top:0;left:0;z-index:12;");r=od.getContext("2d");r.imageSmoothingEnabled=!1;nf=x("canvas");nf.setAttribute("style","position:absolute;top:0;left:0;z-index:10;");Eh=nf.getContext("2d");Eh.imageSmoothingEnabled=!1;vd=x("div");vd.setAttribute("style","position:absolute;top:0;left:0;z-index:5;overflow:hidden;border-width:0px;padding:0px;margin:0px;");pf=x("div");pf.setAttribute("style","position:absolute;top:0;left:0;z-index:10;overflow:hidden;border-width:0px;padding:0px;margin:0px;");
pf.appendChild(nf);Ae=x("canvas");Db.appendChild(pf);Db.appendChild(gc);Db.appendChild(od);Db.appendChild(vd);J.appendChild(Db);Ia=new PEvs(Db,HAniS.down,HAniS.up,HAniS.move,HAniS.drag,null,HAniS.canTip);J.setAttribute("tabindex",0);J.addEventListener("keyup",function(e){Gc||Of||(Gh=Hh=ug=!1,Rf&&(e.preventDefault(),e.stopPropagation()))},!1);J.addEventListener("keypress",function(e){Gc||Of||!Rf||(e.preventDefault(),e.stopPropagation())},!1);J.addEventListener("keydown",function(e){Gc||Of||(Rf&&(e.preventDefault(),
e.stopPropagation()),ug=e.ctrlKey?!0:!1,Hh=e.shiftKey?!0:!1,Gh=e.altKey?!0:!1,37==e.keyCode?(T(!1),ec(-1),ha()):39==e.keyCode?(T(!1),ec(1),ha()):32==e.keyCode?HAniS.toggleIsLooping():82==e.keyCode&&e.altKey?HAniS.resetZoom(0):67==e.keyCode&&e.altKey&&HAniS.doCapture())},!1);J.addEventListener("mouseenter",function(e){J.focus({preventScroll:!0})},!1);J.style.outlineWidth="0px";J.style.outline="none";Kc=.01745329252;cc=H=0;nd=Le=vc=Ke=Hf=rg=!1;Eb=Pc=30;jb=0;Vg=!1;Tg="white";Ug=1;wc=2;wf=1;Fg=pc=!1;
Wa=hb=!0;Lg=!1;Rb=xa=y=0;$g=Yf=!1;Zf=!0;Uc=null;Vb=[];Td=!1;lb=0;de=[];ud=!0;mb=500;Wc=100;Md=2E3;rh=30;Xf=Fd=ri=0;Zg=6E4;Gd=null;Kd=ef=!1;cg=!0;wd=[];re=ic=Da=null;zh=!1;Ua=Li=null;Ne=!1;Ba=-1;xe=!1;Cg=pg=da=ba=1;Re=!1;sa=ra=eb=db=Ha=Ga=Q=R=ma=oa=0;Yi=!1;ze=gj=!0;Ph=Pg=Jd=!1;ff=ki=-1;yb=[];nc=0;Rh=!1;Ma=null;Rd=-1;th=0;Gf=!1;Ab=null;lg=kg=xb=bd=0;dj=!1;ta=0;Xd=!1;vi="?";Cc=kh=lh=!1;ai=bi=Ig=Jg=0;Yd=Tb=fc=!1;sb=[];sb.push("default");sb.push("default");Rg="default";Ge=!1;Vf="default";$c=null;ob=[0,
0];Se=[0,0];Hb=Bh=Tf=!1;qd=!0;Ya=xc=null;qc=Zh=!1;gg=!0;Sg="default";yf=!0;Xa=[];Qc=Yg=!1;Xg=!0;Wf="default";Od=!1;Jj=[1,0,0];Kj=[2,2,1];jd=[];pd=[];Id=Ee=Bb=!1;bg=Dg=0;Ic=tg=sg=P=rc=null;Qh=0;Rf=!0;Gc=Of=Hh=Gh=ug=!1;ye=27;a=x("canvas");a.height=1;a.width=1;Jb=a.getContext("2d");Jb.imageSmoothingEnabled=!1;Dh=x("canvas");Nf=!1;"string"===typeof b?0>b.indexOf("\n")?Za(b):h(b.split("\n")):h(b)};this.newBasenames=function(b,a,d,c){Xd=!1;Wa=hb;T(!1);y=c;Qj(b,a,d);ud=!0;Mb()};this.newFilenames=function(b){Xd=
!1;Wa=hb;T(!1);Pj(b);ud=!0;Mb()};this.newOverlayFilenames=function(b){Xd=!1;Wa=hb;T(!1);Rj(b);ud=!0;Mb()};this.newProbeTable=function(b){Od=!1;I(b.trim())};this.reloadFOF=function(){ea("reload FoF = "+Gd);w("r");je?lk(kk,!1):(null==qg?Wa=!0:(Wa=hb,hb=!1,Fd=Xf),ud=!0,Mb())};this.getFOF=function(){var b=f.file_of_filenames.trim();HAniS.newFOF(null!=re?re+b:b,!0)};this.newFOF=function(b,a){HAniS.resetZoom(0);lk(b,a)};var lk=function(b,a){var d,c,e,k,l=new XMLHttpRequest,g,t,B,m,q,M,G,aa=null,Fa=!1;fj=
nc;Xd=!1;Wa=hb;T(!1);a&&Ra(cc);nc=y=0;fb=[];pa=Gb=null;zh=!1;Ah=[];for(mf=null;vd.hasChildNodes();)vd.removeChild(vd.lastChild);og=0;Ne=Hb=yd=!1;gb=Wd=dd=null;zb=[];Cd=-1;na=[];var wa=!1;if(null==jc||null!=kf)jc=[];ea("new FOF="+b);Bb&&(null!=ed&&(V(ed,!0,"extrap on"),J.style.cursor="default",T(Wa),Ib=-1),Bb=!1,va());qc&&(null!=Zd&&(V(Zd,!0,"mark on"),J.style.cursor="default",T(Wa),Ie=-1),qc=!1,va());l.onload=function(){var W=this.responseText.split("\n");for(d=0;d<W.length;d++)if(g=W[d].trim(),!(2>
g.length)&&(ea("FOF: "+g),0!=g.indexOf("#")))if(0==g.indexOf("frame_labels"))q=g.split("="),Ub=q[1].split(",");else if(0==g.indexOf("redirect"))for(q=g.split("="),G=q[1].split(","),mf=G[0].trim(),c=1;c<G.length;c++){var u=parseInt(G[c],10)-1;Ah[u]=!0}else if(0==g.indexOf("framenumber_index_values"))q=g.split("="),eh=q[1].split(",");else if(0==g.indexOf("slice")){q=g.split("=");G=q[1].split(",");pa=[];for(c=0;c<G.length;c++)pa[c]=parseInt(G[c],10);pa[2]=pa[2]-pa[0]+1;pa[3]=pa[3]-pa[1]+1;4<pa.length&&
(pa[6]=pa[6]-pa[4]+1,pa[7]=pa[7]-pa[5]+1)}else if(0==g.indexOf("fof_extension"))q=g.split("="),aa=q[1].trim();else if(0==g.indexOf("probe_table"))q=g.split("="),Od=!1,I(q[1].trim());else if(0==g.indexOf("image_base"))q=g.split("="),Da=q[1].trim();else if(0==g.indexOf("overlay_base"))q=g.split("="),ic=q[1].trim();else if(0==g.indexOf("high_res_basemap")){q=g.split("=");G=q[1].split(",");Wd=[];for(c=0;c<G.length;c++)Wd[c]=G[c].trim(),null!=Da&&(Wd[c]=Da+Wd[c]);Ne=!0}else if(0==g.indexOf("high_res_overlay"))for(q=
g.split("="),M=q[1].split("&"),e=0;e<M.length;e++){G=M[e].split(",");Cd=parseInt(G[0].trim(),10)-1;zb[Cd]=[];for(c=1;c<G.length;c++)zb[Cd][c-1]=G[c].trim(),Vj(zb[Cd][c-1],"/")||(null!=ic?zb[Cd][c-1]=ic+zb[Cd][c-1]:null!=Da&&(zb[Cd][c-1]=Da+zb[Cd][c-1]));Ne=!0}else if(0==g.indexOf("high_res_zoom")){q=g.split("=");G=q[1].split(",");Ua=[];for(c=0;c<G.length;c++)Ua[c]=parseFloat(G[c].trim());Nc()}else if(0==g.indexOf("hoverzone"))Ye(g);else if(0==g.indexOf("hotzone"))tb(g);else if(0==g.indexOf("hotspot"))Fa||
(Sb=null,Rb=0,Fa=!0),Lc(g);else if(0==g.indexOf("toggle_onoff"))q=g.split("="),Ag=q[1].split(",");else if(0==g.indexOf("coordinates"))q=g.split("="),C(q[1]);else if(0==g.indexOf("fof_substitute"))u=g.indexOf("="),G=g.substring(u+1).split(","),zh=!0,ej=G[0].trim(),Uj=G[1].trim();else if(0==g.indexOf("map_scale"))q=g.split("="),G=q[1].split(","),Ed=parseFloat(G[0]),Sf=1<G.length?parseFloat(G[1]):Ed;else if(0==g.indexOf("times")){q=g.split("=");G=q[1].split(",");for(d=0;d<G.length;d++)jc[d]=parseInt(G[d].trim(),
10);wa=!0}else{null!=kf&&(u=g.match(kf),null!=u&&2==u.length?(jc.push(parseInt(u[1],10)),ea("+ + + Extrap time = "+u[1]),wa=!0):ea("+ + + Cannot parse times using "+kf+" from line: "+g));e=g.indexOf(" ");0>e&&(e=g.length);fb[y]=g.substring(0,e).trim();null!=Da&&(fb[y]=Da+fb[y]);g=g.substring(e+1);u=g.indexOf('"');0<=u&&(null==Ub&&(Ub=[]),e=g.substring(u+1),u=e.indexOf('"'),0<=u&&(Ub[y]=e.substring(0,u),0==y&&(Ab.innerHTML=Ub[0])));na[y]=[];u=g.indexOf("overlay");if(0<=u)for(t=g.substring(u),u=t.indexOf("="),
0>u&&ea("Cannot find a = sign in "+t),B=t.substring(u+1),t=B.trim(),B=t.split(","),xa=Math.max(xa,B.length),ea("numOverlays set to "+xa),k=0;k<B.length;k++)na[y][k]=B[k].trim(),null!=mf&&Ah[k]?na[y][k]=(mf+na[y][k]).trim():null!=ic?na[y][k]=(ic+na[y][k]).trim():null!=Da&&(na[y][k]=(Da+na[y][k]).trim());y+=1}wa&&E(jc);null!=aa?(W=new XMLHttpRequest,W.onload=function(){var Ea=this.responseText.split("\n");for(d=0;d<Ea.length;d++)2>Ea[d].length||(m=Ea[d].trim(),ea("ext_FOF: "+m),0!=m.indexOf("#")&&(0==
m.indexOf("hotzone")?tb(m):0==m.indexOf("hotspot")&&Lc(m)));ka()},W.onerror=function(){ka()},W.open("get",aa+"?"+Math.round(1E5*Math.random()),!0),W.send()):ka()};kk=b;l.open("get",b+"?"+Math.round(1E5*Math.random()),!0);l.send()};this.setWindowSize=function(b,a){if(null!=J){J.style.height=a+"px";J.style.width=b+"px";J.style.padding="0px";ik=a=a-(null!=sg?sg.offsetHeight:0)-(null!=tg?tg.offsetHeight:0)-(null!=rc?rc.offsetHeight:0)-Qh*(null!=Ic?Ic.offsetHeight:0);jk=b;var d=a*Na/Oa;d>b&&(d=b,a=b*Oa/
Na);a=Math.floor(a);d=Math.floor(d);ze||(Jd?tc(jk,ik):tc(d,a),va())}};this.drag=function(b){qc||(Re=!0,oa=Ia.getX(),ma=Ia.getY(),Ke||Le?(za=Ia.getX(),void 0!=yc&&yc(za/fa),ha()):(Gc?(b=L.length-1,L[b].xe=oa,L[b].ye=ma,L[b].xp.push(oa),L[b].yp.push(ma),L[b].size=Math.round(Math.sqrt(Math.pow(oa-L[b].x,2)+Math.pow(ma-L[b].y,2)))):(R=oa*X,Q=ma*Y,Tb=Cc=!1,fc&&(!Tf||Tf&&b.shiftKey)?(Ig=R,Jg=Q,Tb=!0):(Sa&&da!=Cg?(ra=Ga-R/ba,sa=Ha-Q/da,Dd(),Ga=Math.round(ra+R/ba),Ha=Math.round(sa+Q/da),void 0!=Oe&&Oe(["drag",
ba,da,Ga,Ha,R,Q,ra,sa,db,eb])):qc||Bb||!Hb||(Ya=null,qd&&0<=R&&0<=Q&&(ya=rf.getImageData(R,Q,1,1).data,0!=ya[3]&&(Ya=Gb[ya[3]-1]))),Re=!0,ha())),va()))};this.doCapture=function(){var b=x("canvas");b.height=gc.height;b.width=gc.width;var a=b.getContext("2d");yf=!1;va();a.drawImage(gc,0,0);a.drawImage(od,0,0);yf=!0;var d=Jh;if(null!=rj&&(d=window.prompt(rj,d),null==d))return;b.toBlob(function(c){var e=URL.createObjectURL(c),k=document.createElement("a");k.href=e;k.download=d;k.click();setTimeout(function(){URL.revokeObjectURL(c)},
3E4)})};this.resetZoom=function(b){ba=pg;da=Cg;Ba=-1;null!=Ta&&(V(Ta,!0,"zoom on"),Sa=!1);Ga=R;Ha=Q;sa=ra=0;eb=Oa;db=Na;Nc();ha();yd&&(Hb=!0);void 0!=Oe&&0==b&&Oe(["reset",0,0])};this.canTip=function(){var b;Cc=!1;oa=Ia.getX();R=oa*X;ma=Ia.getY();Q=ma*Y;if(!((qc||Bb)&&Q<Cj&&Q>Bj&&R>Aj)){Ga=Math.round(ra+R/ba);Ha=Math.round(sa+Q/da);if(0!=nc)for(b=0;b<nc;b++)if(vb[b].overlay>=xa)ea(" Error...hotzone overlay # "+vb[b].overlay+" > number of overlays = "+xa);else if(O[vb[b].overlay].checked&&(Jb.clearRect(0,
0,1,1),Jb.drawImage(ja[H][vb[b].overlay],Ga,Ha,1,1,0,0,1,1),ya=Jb.getImageData(0,0,1,1).data,li=(ya[0]<<16)+(ya[1]<<8)+ya[2],li==vb[b].color)){Cc=!0;Fj=oa;Gj=ma;Hj=vb[b].tip;break}if(0!=Rb)for(b=Rb-1;0<=b;b--)if(null!=Sb[b]){var a=Sb[b];if(-1==a.frame||a.frame==H)if(-1==a.overlay||O[a.overlay].checked){var d=!1;if(a.isPan)if(a.isIcon){var c=(a.x0-ra)*ba-a.w2;var e=(a.y0-sa)*da-a.h2;R>c&&R<c+a.width&&Q>e&&Q<e+a.height&&(d=!0)}else c=(a.x0-ra)*ba,e=(a.y0-sa)*da,R>c&&R<c+a.width*ba&&Q>e&&Q<e+a.height*
da&&(d=!0);else R>a.x0&&R<a.x1&&Q>a.y0&&Q<a.y1&&(d=!0);if(d&&null!=a.tip){Cc=!0;Fj=oa;Gj=ma;Hj=Sb[b].tip;break}}}va()}};this.move=function(){if(!Bb&&Hb&&(Ya=null,qd)){var b=Ia.getX()*X,a=Ia.getY()*Y;0<=b&&0<=a&&(ya=rf.getImageData(b,a,1,1).data,0!=ya[3]&&(Ya=Gb[ya[3]-1]))}Bb&&2<=Ib&&(oa=Ia.getX(),R=oa*X,ma=Ia.getY(),Q=ma*Y);va()};this.down=function(){if(!bc||"visible"!=bc.style.visibility){Cc&&(Cc=!1,va());oa=Ia.getX();R=oa*X;ma=Ia.getY();Q=ma*Y;if(nd||vc)if(bb=0==jb?ca/2:0>jb?ca+jb:jb,Math.abs(oa-
za)<Pc/2&&Math.abs(ma-bb)<Eb/2){vc&&(Ke=!0);nd&&(Le=!0);return}ai=R;bi=Q;Ig=ai;Jg=bi;Ga=Math.round(ra+R/ba);Ha=Math.round(sa+Q/da);fc&&(dc(),Se[0]=ob[0],Se[1]=ob[1]);Re=!1;if(Gc){var b={};b.x=oa;b.y=ma;b.xe=oa;b.ye=ma;b.xp=[oa];b.yp=[ma];b.type=Ff.value;b.color=Ef.value;b.width=Ad.value;b.text=Hc.value;b.size=0;L.push(b)}}};this.up=function(b){if(!bc||"visible"!=bc.style.visibility)if(Cc=!1,!Gc)if(Ke)Ke=!1;else if(Le)Le=!1;else{if(Bb||qc){oa=Ia.getX();R=oa*X;ma=Ia.getY();Q=ma*Y;if(qc){Ie=1;if(0<Ie&&
Q/Y<gk){if(R/X>fk){Xa.pop();Xa.pop();0==Xa.length&&(Ie=0);va();return}if(R/X<ek){va();b=window.open("","Mark Points");b.document.write("<div>Marked Points<br>");for(var a=[],d=0;d<Xa.length;d+=2)Ga=ra+Xa[d]/ba,Ha=sa+Xa[d+1]/da,dc(),b.document.write(ob[0].toFixed(4)+","+ob[1].toFixed(4)+"<br>"),0==d&&(a[0]=ob[0],a[1]=ob[1]);gg&&b.document.write(a[0].toFixed(4)+","+a[1].toFixed(4)+"<br>");return}}Xa.push(R);Xa.push(Q);va();return}if(3>Ib)if(Jc[Ib]=R,sc[Ib]=Q,Pe[Ib]=yh[H],0==Ib)Ib=1,Ra(Ka(y-1)),Dg=1,
qe=null;else{Lj=Pe[1]-Pe[0];Hg=(Jc[1]-Jc[0])/Lj;Jf=(sc[1]-sc[0])/Lj;if(null!=ih&&null!=Ed){d=Hg*Ed;var c=Jf*Sf;a=Math.round(60*Math.sqrt(d*d+c*c));d=Math.atan2(d,-c)/Kc;0>d&&(d+=360);qe=Ii+qk[Math.round(d/22.5)]+" at "+a+" "+Ji;ck=Jc[0];dk=0<Jf?sc[0]-15:sc[0]+30}a=parseInt(hf,10);Ca=Math.round(Math.abs(4*(a+4)/Hg));Qe=Math.round(Math.abs(2*(a+4)/Jf));Qe<Ca&&(Ca=Qe);120<Ca?Ca=120*Math.floor(Ca/120)+60:90<Ca?Ca=120:60<Ca?Ca=90:30<Ca?Ca=60:15<Ca?Ca=30:10<Ca?Ca=15:5<Ca?Ca=10:2<Ca?Ca=5:0==Ca&&(Ca=1);Qe=
Pe[1]/Ca*Ca+Ca;If=1;Hi&&(If=-1);zj=Hg*Ca;$h=Jf*Ca;Ra(Ka(y-1));Ib=3;Dg=2}else if(Q/Y<Cj&&Q/Y>Bj&&R/X>Aj&&3==Ib){Oc();va();return}va()}Tb&&!Yd?(Tb=!1,va()):null!=Pa&&Sa&&(fc=!1,V(Pa,!0,"distance on"));if(Re)Re=!1;else if(b.altKey)HAniS.resetZoom(0);else if(Hb&&null!=Ya&&Zh)ie(Ya,"z");else{oa=Ia.getX();R=oa*X;ma=Ia.getY();Q=ma*Y;if(0!=nc)for(a=0;a<nc;a++)if(vb[a].overlay>=xa)ea(" Error...hotzone overlay # "+vb[a].overlay+" > number of overlays = "+xa);else if(O[vb[a].overlay].checked&&(Jb.clearRect(0,
0,1,1),Jb.drawImage(ja[H][vb[a].overlay],Math.floor(Ga),Math.floor(Ha),1,1,0,0,1,1),ya=Jb.getImageData(0,0,1,1).data,li=(ya[0]<<16)+(ya[1]<<8)+ya[2],li==vb[a].color)){ie(vb[a],"z");return}if(0!=Rb)for(a=Rb-1;0<=a;a--)if(null!=Sb[a]){var e=Sb[a];if(!(-1!=e.frame&&e.frame!=H||e.fromfile||-1!=e.overlay&&!O[e.overlay].checked)){var k=!1;e.isPan?e.isIcon?(d=(e.x0-ra)*ba-e.w2,c=(e.y0-sa)*da-e.h2,R>d&&R<d+e.width&&Q>c&&Q<c+e.height&&(k=!0)):(d=(e.x0-ra)*ba,c=(e.y0-sa)*da,R>d&&R<d+e.width*ba&&Q>c&&Q<c+e.height*
da&&(k=!0)):R>e.x0&&R<e.x1&&Q>e.y0&&Q<e.y1&&(k=!0);if(k){ie(Sb[a],"s");return}}}Sa&&(Hb=!1,Ze(b.ctrlKey||ug||b.which&&3==b.which||b.button&&2==b.button));ha();va()}}};this.wheel=function(b){Wi?ec(b):Sa&&(oa=Ia.getX(),R=oa*X,ma=Ia.getY(),Q=ma*Y,Ga=Math.round(ra+R/ba),Ha=Math.round(sa+Q/da),Ze(-1==b))};this.toggleAutoRefresh=function(){ef?(V(Nd,!1,"autorefresh off"),null!=Gd&&clearInterval(Gd),ef=!1):(V(Nd,!0,"autorefresh on"),Gd=setInterval("HAniS.reloadFOF();",Zg),ef=!0)};this.toggleLoopRock=function(){Hf?
(V(vf,!0,"looprock rock"),Hf=!1):(V(vf,!1,"looprock loop"),Hf=!0)};this.toggleLoopHalt=function(){pc?(V(xf,!0,"loophalt halt"),Fg=pc=!1):(V(xf,!1,"loophalt loop"),Fg=pc=!0)};this.toggleExtrap=function(){Bb?(null!=ed&&(V(ed,!0,"extrap on"),J.style.cursor=sb.pop(),null!=Ac&&(Ac.disabled=!1),T(Wa),Sa=dg,Ib=-1),Bb=!1,va()):(null!=ed&&(Bb=!0,qe=null,sb.push(J.style.cursor),J.style.cursor="crosshair",V(ed,!1,"extrap off"),Wa=hb,null!=Ac&&(Ac.disabled=!0),hb=!1,dg=Sa,Sa=!1,HAniS.resetZoom(0),Oc(),va()),
ha())};this.doEnhance=function(b){if(Ee||Id){var a=Fb[0].height,d=Fb[0].width;b=parseInt(kb.value,10);0<=b?(Th=Ob[b],Uh=Pb[b],Vh=Qb[b],Wh=lf[b],pd[hc]=b):pd[hc]=null;var c=a*d*4;for(d=0;d<cd.length;d++)if(Fb[d].gotit){Fb[d].gotit=!1;var e=ng[d].data;var k=Ch[d];if(0>b)for(a=0;a<c;a+=4)e[a]=k[a],e[a+1]=k[a+1],e[a+2]=k[a+2],e[a+3]=k[a+3];else for(a=0;a<c;a+=4)Wb=k[a],Wb===k[a+1]&&Wb===k[a+2]&&(e[a]=Th[Wb],e[a+1]=Uh[Wb],e[a+2]=Vh[Wb],e[a+3]=Wh[Wb]);Vd[d].putImageData(ng[d],0,0);Fb[d].gotit=!0}}};this.overClick=
function(b){var a;if(b.target.checked)for(a=0;a<O.length;a++)b.target!=O[a]&&0!=b.target.name&&b.target.name==O[a].name&&(O[a].checked=!1);qd=!0;for(a=0;a<Vc.length;a++)b.target!=O[a]&&uc(a),null!=xc&&!xc[a]&&O[a].checked&&(qd=!1),null!=kb&&a===hc&&(kb.disabled=!O[a].checked);ha()};this.toggleIsLooping=function(){hb?(hb=!1,V(Ac,!0,"startstop start")):(hb=!0,V(Ac,!1,"startstop stop"),Fg=pc,pc=!1)};this.toggleSliding=function(){vc?(V(Af,!0,"slide on"),vc=!1):(V(Af,!1,"slide off"),null!=Pa&&(fc=!1,V(Pa,
!0,"distance on")),yd&&(Hb=!0),Bb&&HAniS.toggleExtrap(),za=fa/2,void 0!=yc&&yc(.5),vc=!0);Ke=!1;ha()};this.toggleFading=function(){nd?(V(Bf,!0,"fade on"),nd=!1):(V(Bf,!1,"fade off"),null!=Pa&&(fc=!1,V(Pa,!0,"distance on")),yd&&(Hb=!0),Bb&&HAniS.toggleExtrap(),za=fa/2,void 0!=yc&&yc(.5),nd=!0);Le=!1;ha()};this.toggleZooming=function(){Sa?(HAniS.resetZoom(0),V(Ta,!0,"zoom on")):(V(Ta,!1,"zoom off"),Sa=!0,yd&&(Hb=!0),Bb&&HAniS.toggleExtrap());null!=Pa&&(Tb=fc=!1,V(Pa,!0,"distance on"),va())};this.togup=
function(b){ki=-1};this.togdown=function(b){var a=Nh.getX();Nh.getY();for(var d=xj,c=0;c<yb.length;c++){if(a>d&&a<d+Me){if(c==ki)break;if(b.shiftKey){0<=yb[c]&&(T(!1),Ra(c));break}a=0;!b.ctrlKey&&0<=yb[c]&&(a=-1);qb(c,a);ki=c;break}d=d+Me+zg}};this.makeMP4=function(){var b=Bc.innerHTML;Wa=hb;T(!1);wf=1;Ra(Ka(cc));Bc.innerHTML="Working";HME.createH264MP4Encoder().then(function(a){var d,c,e,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:a.width=fa,a.height=
ca,a.frameRate=Math.max(1,Math.round(1E3/mb)),a.quantizationParameter=ye,a.initialize();case 2:return ha(),a.addFrameRgba(z.getImageData(0,0,fa,ca).data),g.yield(new Promise(function(t){return window.requestAnimationFrame(t)}),4);case 4:if(H>=Ka(y-1)){g.jumpTo(3);break}ec(1);g.jumpTo(2);break;case 3:a.finalize();Bc.innerHTML=b;d=a.FS.readFile(a.outputFilename);c=f.mp4_prompt;e=f.mp4_filename;null==e&&(e="hanimate.mp4");k=e;if(null!=c&&(k=window.prompt(c,k),null==k))return a.delete(),T(Wa),g.return();
l=document.createElement("a");l.href=URL.createObjectURL(new Blob([d],{type:"video/mp4"}));l.download=k;l.click();a.delete();T(Wa);g.jumpToEnd()}})})};this.makeAniGIF=function(){if(!Lg){var b=oc.innerHTML;Mg=new GIF({workers:4,debug:!1,quality:10,width:fa,height:ca,repeat:0});Mg.on("finished",function(a){oc.innerHTML=b;var d=f.anigif_prompt,c=f.anigif_filename;null==c&&(c="hanimate.gif");if(null!=d&&(c=window.prompt(d,c),null==c))return;d=document.createElement("a");d.href=URL.createObjectURL(a);
d.download=c;d.click();setTimeout(function(){URL.revokeObjectURL(a)},3E4)});Mg.on("progress",function(a){oc.innerHTML=Math.round(100*a)+"%"});Wa=hb;T(!1);wf=1;Lg=!0;Ra(Ka(cc));ha();T(!0);oc.innerHTML="Loading"}};this.doneLoading=function(b){mg=b};this.getCustomButton=function(){return ig};this.dwellChanged=function(b){Je=b};this.getDwell=function(){return mb};this.slidefadeChanged=function(b){yc=b};this.setSlidefade=function(b){za=Math.round(fa*b);ha()};this.frameChanged=function(b){Eg=b};this.getFrame=
function(){return H};this.showFrame=function(b){Ra(Ka(b));ha()};this.zoomChanged=function(b){Oe=b};this.showZoom=function(b){"reset"===b[0]?HAniS.resetZoom(1):(ba=b[1],da=b[2],Ga=b[3],Ha=b[4],R=b[5],Q=b[6],ra=b[7],sa=b[8],db=b[9],eb=b[10],Dd(),ha())}};
