var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,n,A){if(h==Array.prototype||h==Object.prototype)return h;h[n]=A.value;return h};
$jscomp.getGlobal=function(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var n=0;n<h.length;++n){var A=h[n];if(A&&A.Math==Math)return A}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(h,n){var A=$jscomp.propertyToPolyfillSymbol[n];if(null==A)return h[n];A=h[A];return void 0!==A?A:h[n]};$jscomp.polyfill=function(h,n,A,I){n&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(h,n,A,I):$jscomp.polyfillUnisolated(h,n,A,I))};
$jscomp.polyfillUnisolated=function(h,n,A,I){A=$jscomp.global;h=h.split(".");for(I=0;I<h.length-1;I++){var C=h[I];if(!(C in A))return;A=A[C]}h=h[h.length-1];I=A[h];n=n(I);n!=I&&null!=n&&$jscomp.defineProperty(A,h,{configurable:!0,writable:!0,value:n})};
$jscomp.polyfillIsolated=function(h,n,A,I){var C=h.split(".");h=1===C.length;I=C[0];I=!h&&I in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var $a=0;$a<C.length-1;$a++){var w=C[$a];if(!(w in I))return;I=I[w]}C=C[C.length-1];A=$jscomp.IS_SYMBOL_NATIVE&&"es6"===A?I[C]:null;n=n(A);null!=n&&(h?$jscomp.defineProperty($jscomp.polyfills,C,{configurable:!0,writable:!0,value:n}):n!==A&&(void 0===$jscomp.propertyToPolyfillSymbol[C]&&($jscomp.propertyToPolyfillSymbol[C]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(C):
$jscomp.POLYFILL_PREFIX+C),$jscomp.defineProperty(I,$jscomp.propertyToPolyfillSymbol[C],{configurable:!0,writable:!0,value:n})))};$jscomp.underscoreProtoCanBeSet=function(){var h={a:!0},n={};try{return n.__proto__=h,n.a}catch(A){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(h,n){h.__proto__=n;if(h.__proto__!==n)throw new TypeError(h+" is not extensible");return h}:null;
$jscomp.arrayIteratorImpl=function(h){var n=0;return function(){return n<h.length?{done:!1,value:h[n++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.makeIterator=function(h){var n="undefined"!=typeof Symbol&&Symbol.iterator&&h[Symbol.iterator];return n?n.call(h):$jscomp.arrayIterator(h)};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(h){if(!(h instanceof Object))throw new TypeError("Iterator result "+h+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(h){this.yieldResult=h};
$jscomp.generator.Context.prototype.throw_=function(h){this.abruptCompletion_={exception:h,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(h){this.abruptCompletion_={return:h};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(h){this.abruptCompletion_={jumpTo:h};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(h,n){this.nextAddress=n;return{value:h}};
$jscomp.generator.Context.prototype.yieldAll=function(h,n){h=$jscomp.makeIterator(h);var A=h.next();$jscomp.generator.ensureIteratorResultIsObject_(A);if(A.done)this.yieldResult=A.value,this.nextAddress=n;else return this.yieldAllIterator_=h,this.yield(A.value,n)};$jscomp.generator.Context.prototype.jumpTo=function(h){this.nextAddress=h};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(h,n){this.catchAddress_=h;void 0!=n&&(this.finallyAddress_=n)};$jscomp.generator.Context.prototype.setFinallyBlock=function(h){this.catchAddress_=0;this.finallyAddress_=h||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(h,n){this.nextAddress=h;this.catchAddress_=n||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(h){this.catchAddress_=h||0;h=this.abruptCompletion_.exception;this.abruptCompletion_=null;return h};$jscomp.generator.Context.prototype.enterFinallyBlock=function(h,n,A){A?this.finallyContexts_[A]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=h||0;this.finallyAddress_=n||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(h,n){n=this.finallyContexts_.splice(n||0)[0];if(n=this.abruptCompletion_=this.abruptCompletion_||n){if(n.isException)return this.jumpToErrorHandler_();void 0!=n.jumpTo&&this.finallyAddress_<n.jumpTo?(this.nextAddress=n.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=h};$jscomp.generator.Context.prototype.forIn=function(h){return new $jscomp.generator.Context.PropertyIterator(h)};
$jscomp.generator.Context.PropertyIterator=function(h){this.object_=h;this.properties_=[];for(var n in h)this.properties_.push(n);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var h=this.properties_.pop();if(h in this.object_)return h}return null};$jscomp.generator.Engine_=function(h){this.context_=new $jscomp.generator.Context;this.program_=h};
$jscomp.generator.Engine_.prototype.next_=function(h){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,h,this.context_.next_);this.context_.next_(h);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(h){this.context_.start_();var n=this.context_.yieldAllIterator_;if(n)return this.yieldAllStep_("return"in n?n["return"]:function(A){return{value:A,done:!0}},h,this.context_.return);this.context_.return(h);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(h){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],h,this.context_.next_);this.context_.throw_(h);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(h,n,A){try{var I=h.call(this.context_.yieldAllIterator_,n);$jscomp.generator.ensureIteratorResultIsObject_(I);if(!I.done)return this.context_.stop_(),I;var C=I.value}catch($a){return this.context_.yieldAllIterator_=null,this.context_.throw_($a),this.nextStep_()}this.context_.yieldAllIterator_=null;A.call(this.context_,C);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var h=this.program_(this.context_);if(h)return this.context_.stop_(),{value:h.value,done:!1}}catch(n){this.context_.yieldResult=void 0,this.context_.throw_(n)}this.context_.stop_();if(this.context_.abruptCompletion_){h=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(h.isException)throw h.exception;return{value:h.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(h){this.next=function(n){return h.next_(n)};this.throw=function(n){return h.throw_(n)};this.return=function(n){return h.return_(n)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(h,n){n=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(n));$jscomp.setPrototypeOf&&h.prototype&&$jscomp.setPrototypeOf(n,h.prototype);return n};
$jscomp.asyncExecutePromiseGenerator=function(h){function n(I){return h.next(I)}function A(I){return h.throw(I)}return new Promise(function(I,C){function $a(w){w.done?I(w.value):Promise.resolve(w.value).then(n,A).then($a,C)}$a(h.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(h){return $jscomp.asyncExecutePromiseGenerator(h())};$jscomp.asyncExecutePromiseGeneratorProgram=function(h){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(h)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(h){if(h)return h;var n=function(C,$a){this.$jscomp$symbol$id_=C;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:$a})};n.prototype.toString=function(){return this.$jscomp$symbol$id_};var A=0,I=function(C){if(this instanceof I)throw new TypeError("Symbol is not a constructor");return new n("jscomp_symbol_"+(C||"")+"_"+A++,C)};return I},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(h){if(h)return h;h=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),A=0;A<n.length;A++){var I=$jscomp.global[n[A]];"function"===typeof I&&"function"!=typeof I.prototype[h]&&$jscomp.defineProperty(I.prototype,h,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return h},"es6",
"es3");$jscomp.iteratorPrototype=function(h){h={next:h};h[Symbol.iterator]=function(){return this};return h};
$jscomp.polyfill("Promise",function(h){function n(){this.batch_=null}function A(w){return w instanceof C?w:new C(function(E,aa){E(w)})}if(h&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return h;n.prototype.asyncExecute=function(w){if(null==this.batch_){this.batch_=[];var E=this;this.asyncExecuteFunction(function(){E.executeBatch_()})}this.batch_.push(w)};
var I=$jscomp.global.setTimeout;n.prototype.asyncExecuteFunction=function(w){I(w,0)};n.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var w=this.batch_;this.batch_=[];for(var E=0;E<w.length;++E){var aa=w[E];w[E]=null;try{aa()}catch(la){this.asyncThrow_(la)}}}this.batch_=null};n.prototype.asyncThrow_=function(w){this.asyncExecuteFunction(function(){throw w;})};var C=function(w){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var E=
this.createResolveAndReject_();try{w(E.resolve,E.reject)}catch(aa){E.reject(aa)}};C.prototype.createResolveAndReject_=function(){function w(la){return function(qb){aa||(aa=!0,la.call(E,qb))}}var E=this,aa=!1;return{resolve:w(this.resolveTo_),reject:w(this.reject_)}};C.prototype.resolveTo_=function(w){if(w===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(w instanceof C)this.settleSameAsPromise_(w);else{a:switch(typeof w){case "object":var E=null!=w;break a;case "function":E=
!0;break a;default:E=!1}E?this.resolveToNonPromiseObj_(w):this.fulfill_(w)}};C.prototype.resolveToNonPromiseObj_=function(w){var E=void 0;try{E=w.then}catch(aa){this.reject_(aa);return}"function"==typeof E?this.settleSameAsThenable_(E,w):this.fulfill_(w)};C.prototype.reject_=function(w){this.settle_(2,w)};C.prototype.fulfill_=function(w){this.settle_(1,w)};C.prototype.settle_=function(w,E){if(0!=this.state_)throw Error("Cannot settle("+w+", "+E+"): Promise already settled in state"+this.state_);this.state_=
w;this.result_=E;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};C.prototype.scheduleUnhandledRejectionCheck_=function(){var w=this;I(function(){if(w.notifyUnhandledRejection_()){var E=$jscomp.global.console;"undefined"!==typeof E&&E.error(w.result_)}},1)};C.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var w=$jscomp.global.CustomEvent,E=$jscomp.global.Event,aa=$jscomp.global.dispatchEvent;if("undefined"===typeof aa)return!0;
"function"===typeof w?w=new w("unhandledrejection",{cancelable:!0}):"function"===typeof E?w=new E("unhandledrejection",{cancelable:!0}):(w=$jscomp.global.document.createEvent("CustomEvent"),w.initCustomEvent("unhandledrejection",!1,!0,w));w.promise=this;w.reason=this.result_;return aa(w)};C.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var w=0;w<this.onSettledCallbacks_.length;++w)$a.asyncExecute(this.onSettledCallbacks_[w]);this.onSettledCallbacks_=null}};
var $a=new n;C.prototype.settleSameAsPromise_=function(w){var E=this.createResolveAndReject_();w.callWhenSettled_(E.resolve,E.reject)};C.prototype.settleSameAsThenable_=function(w,E){var aa=this.createResolveAndReject_();try{w.call(E,aa.resolve,aa.reject)}catch(la){aa.reject(la)}};C.prototype.then=function(w,E){function aa(Mb,ab){return"function"==typeof Mb?function(Nb){try{la(Mb(Nb))}catch(Yb){qb(Yb)}}:ab}var la,qb,uc=new C(function(Mb,ab){la=Mb;qb=ab});this.callWhenSettled_(aa(w,la),aa(E,qb));return uc};
C.prototype.catch=function(w){return this.then(void 0,w)};C.prototype.callWhenSettled_=function(w,E){function aa(){switch(la.state_){case 1:w(la.result_);break;case 2:E(la.result_);break;default:throw Error("Unexpected state: "+la.state_);}}var la=this;null==this.onSettledCallbacks_?$a.asyncExecute(aa):this.onSettledCallbacks_.push(aa);this.isRejectionHandled_=!0};C.resolve=A;C.reject=function(w){return new C(function(E,aa){aa(w)})};C.race=function(w){return new C(function(E,aa){for(var la=$jscomp.makeIterator(w),
qb=la.next();!qb.done;qb=la.next())A(qb.value).callWhenSettled_(E,aa)})};C.all=function(w){var E=$jscomp.makeIterator(w),aa=E.next();return aa.done?A([]):new C(function(la,qb){function uc(Nb){return function(Yb){Mb[Nb]=Yb;ab--;0==ab&&la(Mb)}}var Mb=[],ab=0;do Mb.push(void 0),ab++,A(aa.value).callWhenSettled_(uc(Mb.length-1),qb),aa=E.next();while(!aa.done)})};return C},"es6","es3");
$jscomp.iteratorFromArray=function(h,n){h instanceof String&&(h+="");var A=0,I=!1,C={next:function(){if(!I&&A<h.length){var $a=A++;return{value:n($a,h[$a]),done:!1}}I=!0;return{done:!0,value:void 0}}};C[Symbol.iterator]=function(){return C};return C};$jscomp.polyfill("Array.prototype.keys",function(h){return h?h:function(){return $jscomp.iteratorFromArray(this,function(n){return n})}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(h){return h?h:function(n,A,I){var C=this.length||0;0>A&&(A=Math.max(0,C+A));if(null==I||I>C)I=C;I=Number(I);0>I&&(I=Math.max(0,C+I));for(A=Number(A||0);A<I;A++)this[A]=n;return this}},"es6","es3");$jscomp.typedArrayFill=function(h){return h?h:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
function PEvs(h,n,A,I,C,$a,w){var E,aa,la,qb,uc,Mb,ab,Nb,Yb,va,Zb,vc=0,Mc=0,Ze,ub=!1,nd=!1,Nc=0,$b=0,Oc=0,ec=0,je,Ed,$e=3,Pc=function(v){ab=v.target;for(Yb=Nb=0;ab;)Nb+=ab.offsetLeft-ab.scrollLeft,Yb+=ab.offsetTop-ab.scrollTop,ab=ab.offsetParent;vc=(ub?je:v.pageX)-Nb-document.body.scrollLeft;Mc=(ub?Ed:v.pageY)-Yb-document.body.scrollTop};this.getX=function(){return vc};this.getY=function(){return Mc};this.setHysteresis=function(v){$e=v};var U=function(v){v.preventDefault();v.stopImmediatePropagation?
v.stopImmediatePropagation():v.stopPropagation()},af=function(v){Pc(v);Ze=vc;Sa=Mc;ia=!0;null!=wa&&(qb=(new Date).getTime());null!=La&&La(v)},W=function(v){ia&&(Pc(v),ia=!1,null!=fc&&fc(v),null!=wa&&(uc=(new Date).getTime(),Mb=uc-qb,300>Mb&&wa(v)))},rb=function(v){Pc(v);Math.abs(vc-Ze)<$e&&Math.abs(Mc-Sa)<$e||(Sa=Ze=-9999,ia?null!=Db&&Db(v):null!=ac&&ac(v),null!=bf&&Nf())};this.touchDown=function(v){la=!0;if(1<v.targetTouches.length)return ub=!0,Zb&&($b=-1,U(v)),!1;E=v.changedTouches;aa=E[0];af(aa)};
this.touchUp=function(v){0==v.targetTouches.length&&(ub=la=!1);U(v);if(ub||nd)return ub||(nd=!1),!1;E=v.changedTouches;aa=E[0];W(aa)};this.touchMove=function(v){la=!0;U(v);if(ub)return Zb&&(E=v.targetTouches,je=(E[0].pageX+E[1].pageX)/2,Ed=(E[0].pageY+E[1].pageY)/2,nd=!0,Oc=E[0].pageX-E[1].pageX,ec=E[0].pageY-E[1].pageY,Nc=Oc*Oc+ec*ec,Pc(v),Zb&&0<$b&&30<Math.abs(Nc-$b)&&Zb(0<Nc-$b?1:-1),$b=Nc),!1;E=v.changedTouches;aa=E[0];rb(aa)};this.pointUp=function(v){U(v);for(var fa=0;fa<bb.length;fa++)if(bb[fa].pointerId==
v.pointerId){bb.splice(fa,1);break}0==bb.length&&(la=ub=!1);if(ub||nd)return ub||(nd=!1),!1;W(v);return!1};this.pointDown=function(v){U(v);bb.push(v);$b=-1;la=!0;1<bb.length?ub=!0:af(v);return!1};this.pointMove=function(v){U(v);for(var fa=0;fa<bb.length;fa++)bb[fa].pointerId==v.pointerId&&(bb[fa]=v);if(ub||!nd){if(ub)return je=(bb[0].pageX+bb[1].pageX)/2,Ed=(bb[0].pageY+bb[1].pageY)/2,Pc(v),Zb&&(nd=!0,Oc=bb[0].pageX-bb[1].pageX,ec=bb[0].pageY-bb[1].pageY,Nc=Oc*Oc+ec*ec,Zb&&0<$b&&30<Math.abs(Nc-$b)&&
Zb(0<Nc-$b?1:-1),$b=Nc),!1;rb(v);return!1}};this.mouseDown=function(v){la||(U(v),af(v))};this.clearDown=function(){ia=!1};this.mouseUp=function(v){la||(U(v),W(v))};this.useWheel=function(v){h.addEventListener("wheel",this.mouseWheel,!0);Zb=v};this.mouseWheel=function(v){Pc(v);var fa=Math.max(-1,Math.min(1,-v.deltaY||-v.detail));U(v);Zb&&Zb(fa)};this.mouseClick=function(v){U(v);ia=!1};this.mouseMove=function(v){la||(U(v),rb(v))};this.mouseDragged=function(v){la||(U(v),Pc(v),null!=Db&&Db(v),null!=bf&&
Nf())};var Nf=function(){clearTimeout(va);va=setTimeout(function(){bf()},600)};var Sa=Ze=Mc=vc=0;var La=n;var fc=A;var ac=I;var Db=C;var wa=$a;var bf=w;var ia=la=!1;var bb=[];h.addEventListener("mousedown",this.mouseDown,!1);h.addEventListener("mouseup",this.mouseUp,!1);h.addEventListener("mousemove",this.mouseMove,!1);h.addEventListener("click",this.mouseClick,!1);h.addEventListener("touchstart",this.touchDown,!1);h.addEventListener("touchend",this.touchUp,!1);h.addEventListener("touchmove",this.touchMove,
!1);h.addEventListener("touchleave",this.touchUp,!1);h.addEventListener("touchcancel",this.touchUp,!1);h.addEventListener("contextmenu",function(v){v.preventDefault()},!1);h.style["touch-action"]="none";h.addEventListener("mouseout",function(v){ia||(Mc=vc=-1,null!=ac&&ac(v));ia=!1})};var HAniSF=function(){function h(b){var a,d;ke=!0;if(b instanceof Array)for(f={},null!=ni&&(b=b.concat(ni)),a=0;a<b.length;a++){var c=b[a].trim();if(!(2>c.length)&&0!=c.indexOf("#")){var e=c.indexOf("=");if(!(1>e)){var k=c.substr(0,e).trim().toLowerCase();f[k]=c.substr(e+1).trim()}}}else f=b;Of=!1;a=f.debug;null!=a&&("true"==a?(Pg=window.open("","HAniSDebugInfo","scrollbars=yes,width=400,height=200"),Of=!0,fa("HAniS Version 4.56")):Of=!1);a=f.no_initial_focus;null!=a&&"false"!=a||J.focus();bc=!0;
D(f.set_className,"f")&&(bc=!1);fa("Is type of param an array = "+(b instanceof Array));a=f.divalign;null!=a&&(cf=a.trim(),J.align=cf);D(f.prevent_shortcuts,"t")&&(Pf=!0);a=f.initial_message;null!=a&&(b=f.initial_message_style,null==b&&(b="background-color:red;top:10px;left:10px;height:100px;width:200px"),b="z-index:99;position:absolute;"+b,cc=x("div"),cc.setAttribute("style",b),cc.innerHTML=a,cc.addEventListener("click",function(p){cc.style.visibility="hidden";p.stopPropagation()},!1),cc.style.visibility=
"visible",Eb.appendChild(cc),b=f.initial_message_timeout,null!=b&&("auto"==b?Qg=!0:(Qg=!1,b=parseInt(f.initial_message_timeout,10),2>b&&(b=2),setTimeout(function(){cc.style.visibility="hidden"},1E3*b))));le=null;a=f.initial_enhancement;null!=a&&(le=parseInt(a,10)-1);me=!1;Qf="X = ";Rf=" Y = ";a=f.coordinates;null!=a&&(C(a),me=!0,Qf="Lat = ",Rf=" Lon = ");c="green";e="white";k="12px Arial";var l=null,g=d=10,t=10;Rg=2;a=f.keyboard_propagate;null!=a&&D(a,"t")&&(Sf=!1);a=f.coordinates_display_style;null!=
a&&(b=a.split(","),c=b[0].trim(),e=b[1].trim(),k=b[2].trim(),3<b.length&&(Qf=b[3],Rf=b[4],Rg=parseInt(b[5],10),6<b.length&&(l=b[6].trim(),d=parseInt(b[7],10),g=parseInt(b[8],10),t=parseInt(b[9],10))));oi=new ac(c,e,k,l,d,g,t);Tf=Fd=null;null!=f.map_scale&&(Uf=gc=!0,b=f.map_scale.split(","),Fd=parseFloat(b[0]),Tf=1<b.length?parseFloat(b[1]):Fd);ne=me?"km":" ";Vf=1;a=f.distance_unit;null!=a&&(ne=a.trim(),D(ne,"mi")&&(Vf=.621371192),D(ne,"nm")&&(Vf=.539956803),D(ne,"na")&&(Vf=.539956803));df=null;a=
f.show_bearing;null!=a&&(df=a.trim());a=f.divcan_style;null!=a&&a.trim();Sg="default";a=f.distance_cursor;null!=a&&(Sg=a.trim());Wf="default";a=f.location_cursor;null!=a&&(Wf=a.trim());Xf="default";a=f.probe_cursor;null!=a&&(Xf=a.trim());Tg="default";a=f.mark_cursor;null!=a&&(Tg=a.trim());D(f.active_slide,"t")&&(wc=!1,R.toggleSliding());D(f.active_fade,"t")&&(od=!1,R.toggleFading());a=f.slidebar_style;null==a&&(a=f.fadebar_style);null!=a&&(b=a.split(","),Ug=b[0].trim(),Vg=parseInt(b[1],10),Qc=parseInt(b[2],
10),Fb=parseInt(b[3],10),xc=2,Wg=!1,5<=b.length&&(D(b[4],"r")&&(xc=0),D(b[4],"d")&&(xc=1),D(b[4],"t")&&(xc=2),D(b[4],"e")&&(xc=3),D(b[4],"n")&&(xc=4),-1!=b[4].indexOf("fill")&&(Wg=!0)),kb=0,6==b.length&&(kb=parseInt(b[5],10)));a=f.imagecan_style;null!=a&&(b=a.trim()+";position:absolute;top:0;left:0;",hc.setAttribute("style",b+"z-index:1;"),pd.setAttribute("style",b+"z-index:12;"));c="blue";e="white";k="12px Arial";l=null;t=g=d=10;Xg=1;pi="white";a=f.distance_display_style;null!=a&&(b=a.split(","),
c=b[0].trim(),e=b[1].trim(),pi=5<=b.length?b[4].trim():e,k=b[2].trim(),Xg=parseInt(b[3],10),5<b.length&&(l=b[5].trim(),d=parseInt(b[6],10),g=parseInt(b[7],10),t=parseInt(b[8],10)));Nj=new ac(c,e,k,l,d,g,t);c="black";e="white";k="12px Arial";l=null;t=g=d=10;a=f.probe_display_style;null!=a&&(b=a.split(","),c=b[0].trim(),e=b[1].trim(),k=b[2].trim(),3<b.length&&(l=b[3].trim(),d=parseInt(b[4],10),g=parseInt(b[5],10),t=parseInt(b[6],10)));Oj=new ac(c,e,k,l,d,g,t);qi="Undefined";ri=!1;ef=0;Yg=!0;a=f.probe_hide;
null!=a&&D(a,"f")&&(Yg=!1);a=f.probe_undefined;null!=a&&(b=a.split(","),qi=b[0].trim(),1<b.length&&(ef=parseInt(b[1],10)+1),2<b.length&&(ri=!0));Zg=!1;f.probe_base_image&&(Zg=!0);a=f.active_probe;null!=a&&(Rc=!0);a=f.pause;null!=a&&(b=a.split(","),si=parseInt(b[0],10),Gd=1<b.length?Yf=parseInt(b[1],10):Yf=0);a=f.auto_refresh;null!=a&&($g=6E4*parseInt(a,10),Hd=setInterval("HAniS.reloadFOF();",$g),ff=!0);Zf=!1;ti="#FFFFFF80";a=f.show_hotspots;null!=a&&(b=a.split(","),D(b[0],"t")&&(Zf=!0),1<b.length&&
(ti=b[1]));ah=!1;D(f.center_hotspots,"t")&&(ah=!0);oe=!1;D(f.enable_smoothing,"t")&&(oe=!0);ui="low";a=f.smoothing_quality;null!=a&&(ui=a);$f=!0;D(f.check_image_size,"f")&&($f=!1);vi=!1;a=f.sprites;if(null!=a){b=a.split(",");bh=new Image;ch=[];dh=[];Sc=[];Tc=[];if("row"==b[1].trim().toLowerCase())for(g=e=c=0,a=2;a<b.length;)for("row"==b[a].trim().toLowerCase()&&(c=0,e+=g,g=0,a+=1),d=parseInt(b[a],10),a+=1,k=parseInt(b[a],10),a+=1,l=parseInt(b[a],10),l>g&&(g=l),a+=1,t=0;t<d;t++)ch.push(c),dh.push(e),
Sc.push(k),Tc.push(l),c+=k;else for(e=!1,a=1;a<b.length;)ch.push(parseInt(b[a],10)),a+=1,dh.push(parseInt(b[a],10)),a+=1,a>=b.length?(c=0,e=!0):c=parseInt(b[a],10),0>c?(e=!0,Sc.push(Math.abs(c)),a+=1,c=parseInt(b[a++],10),Tc.push(Math.abs(c))):e?(Sc.push(Sc[Sc.length-1]),Tc.push(Tc[Tc.length-1])):(Sc.push(parseInt(b[a],10)),a+=1,Tc.push(parseInt(b[a],10)),a+=1);bh.onload=function(){vi=!0};bh.src=b[0]}a=f.overlay_labels;null!=a&&(Uc=a.split(","));a=f.nonstatic_prefix;wi=null!=a?a.trim():"?";eh=null;
a=f.auto_enhance_background;null!=a&&(eh=parseInt(a,10)-1);Id=null;a=f.auto_enhance;if(null!=a)for(c=f.overlay_probe_table,b=a.split(","),Id=Array(b.length),a=0;a<b.length;a++)"x"==b[a].trim().toLowerCase()?Id[a]=-1:Id[a]=parseInt(b[a].trim(),10)-1,null==c&&(qd[a]=Id[a]);Jd=!1;ic=-1;a=f.overlay_enhance;null!=a&&(Jd=!0,ic=parseInt(a,10)-1);yc=null;rd=!0;a=f.overlay_allow_hoverzones;if(null!=a)for(b=a.split(","),yc=Array(b.length),a=0;a<b.length;a++)if(yc[a]=!0,D(b[a],"n")||D(b[a],"f"))yc[a]=!1;ha=
da=null;Kd=xi=!1;a=f.window_size;null!=a&&(b=a.split(","),"div"==b[0]?Kd=!0:(ha=2*Math.floor(parseInt(b[0],10)/2),da=2*Math.floor(parseInt(b[1],10)/2),cb=0==kb?da/2:0>kb?da+kb:kb,Aa=ha/2,void 0!=zc&&zc(.5)),xi=!0);fh=[];a=f.framenumber_index_values;null!=a&&(fh=a.split(","));Ac=[];a=f.use_for_all_frames;if(null!=a)for(b=a.split(","),a=0;a<b.length;a+=2)Ac[parseInt(b[a],10)]=parseInt(b[a+1],10)-1;gf=-1;a=f.skip_missing;null!=a&&(gf=parseInt(a,10));yi="#00000000";a=f.skip_missing_color;null!=a&&(yi=
a);ag=null;a=f.overlay_spacer;if(null!=a)for(b=a.split(","),ag=Array(b.length),a=0;a<b.length;a++)ag[a]=parseInt(b[a],10);a=f.overlay_probe_table;if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)"x"==b[a].trim().toLowerCase()?qd[a]=-1:qd[a]=parseInt(b[a],10)-1;gh=[];a=f.overlay_ontop;if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)gh[parseInt(b[a],10)-1]=!0;Vc=null;a=f.overlay_order;null==a&&(a=f.overlay_zorder);if(null!=a)for(b=a.split(","),Vc=Array(b.length),a=0;a<b.length;a++)Vc[parseInt(b[a],
10)-1]=a;Wc=null;a=f.overlay_links;if(null!=a)for(b=a.split(","),Wc=Array(b.length),a=0;a<b.length;a++)Wc[a]=parseInt(b[a],10);hh=[];qa=null;a=f.overlay_slice;if(null!=a)for(b=a.split(","),a=0;a<b.length;a++)hh[parseInt(b[a],10)-1]=!0;zi=!0;D(f.slice_smoothing,"f")&&(zi=!1);pe=null;a=f.overlay_clear;if(null!=a)for(b=a.split(","),pe=Array(b.length),a=0;a<b.length;a++)pe[a]=b[a].trim().toLowerCase();Ai=!1;a=f.transparency;null!=a&&(b=a.split(","),1==b.length?Bi=Ci=Di=parseInt(b[0],10):(Bi=parseInt(b[0],
10),Ci=parseInt(b[1],10),Di=parseInt(b[2],10)),Ai=!0);ih=!1;a=f.transparency_list;if(null!=a){b=a.split(",");Ei=[];for(a=0;a<b.length;a++)Ei[parseInt(b[a].trim(),10)-1]=!0;ih=!0}bg=null;a=f.overlay_transparent_amount;if(null!=a)for(b=a.split(","),bg=Array(b.length),a=0;a<b.length;a++)bg[a]=parseFloat(b[a])/100;sd=null;a=f.overlay_zoom;if(null!=Uc&&null!=a)for(b=a.split(","),sd=Array(b.length),a=0;a<b.length;a++)if(sd[a]=1,D(b[a],"n")||D(b[a],"f"))sd[a]=0;else if(D(b[a],"d")||D(b[a],"h"))sd[a]=-1;
Ob=null;Fi=[];a=f.overlay_preserve_list;if(null!=Uc&&null!=a)for(b=a.split(","),Ob=Array(b.length),a=0;a<b.length;a++){Ob[a]=!0;if(D(b[a],"n")||D(b[a],"f"))Ob[a]=!1;if(D(b[a],"a")||D(b[a],"A"))Fi[a]=!0}ja=null;if(null!=Uc&&null!=Ob)for(b=f.overlay_preserve.replace(/&/g,",&,").split(","),c=f.overlay_preserve_position,null!=c&&(c=c.split(",")),e=0,ja=Array(Ob.length),a=k=0;a<Ob.length;a++)if(Ob[a]){ja[a]=[];l=0;do{ja[a][l]=[];for(d=0;4>d;d++)ja[a][l][d]=parseInt(b[k].trim(),10),k+=1;ja[a][l][2]=ja[a][l][2]-
ja[a][l][0]+1;ja[a][l][3]=ja[a][l][3]-ja[a][l][1]+1;null!=c?(ja[a][l][4]=parseInt(c[e],10),ja[a][l][5]=parseInt(c[e+1],10),e+=2):(ja[a][l][4]=ja[a][l][0],ja[a][l][5]=ja[a][l][1]);ja[a][l][6]=ja[a][l][4]+ja[a][l][2]-1;ja[a][l][7]=ja[a][l][5]+ja[a][l][3]-1;k<b.length&&"&"==b[k].trim()?(k+=1,l+=1,d=!0):d=!1}while(d)}cg=0;Gi=" ";td="white";hf="transparent";jf="14pt arial";Hi=!1;a=f.times_label_style;null!=a&&(b=a.split(","),td=b[0].trim(),1<b.length&&(cg=Math.floor(60*parseFloat(b[1]))),1<b.length&&(cg=
"?"==b[1].trim()||"auto"==b[1].trim().toLowerCase()?-Math.floor((new Date).getTimezoneOffset()):Math.floor(60*parseFloat(b[1]))),2<b.length&&(Gi=b[2].trim()),3<b.length&&(hf=b[3].trim()),4<b.length&&(jf=b[4].trim()),5<b.length&&-1!=b[5].trim().indexOf("t")&&(Hi=!0));0==td.indexOf("0x")&&(td="#"+td.substring(2));0==hf.indexOf("0x")&&(hf="#"+hf.substring(2));qe=parseInt(jf,10);Pj=new ac("black","white",jf,"black",20,5,5);Ii=!1;Ii=D(f.to_from_lock,"t")?!0:!1;a="black";d="white";g="14px arial";c=null;
l=k=e=10;Ji=Ki=" ";jh=re=null;a=f.dirspd_display_style;null!=a&&(b=a.split(","),a=b[0].trim(),d=b[1].trim(),g=b[2].trim(),Ji=b[3],Ki=b[4],5<b.length&&(c=b[5].trim(),e=parseInt(b[6],10),k=parseInt(b[7],10),l=parseInt(b[8],10)),jh=new ac(a,d,g,c,e,k,l));c="black";e="white";k="14px arial";l=null;t=g=d=10;a=f.tipbox_display_style;null!=a&&(b=a.split(","),c=b[0].trim(),e=b[1].trim(),k=b[2].trim(),3<b.length&&(l=b[3].trim(),d=parseInt(b[4],10),g=parseInt(b[5],10),t=parseInt(b[6],10)));Li=new ac(c,e,k,l,
d,g,t);se=null;Ea=f.image_base;null!=Ea?se=Ea=Ea.trim():Ea=null!=f.image_only_base?f.image_only_base.trim():null;Mi=Ea;a=f.overlay_base;null!=a&&(jc=a.trim());dg=!0;D(f.zip_only,"f")&&(dg=!1);Ld=!1;a=f.zip_filename;null!=a&&(Ld=!0,kh=a.trim());ke=!0;a=f.filenames;null==a&&(a=f.background_filenames);null!=a&&Qj(a);a=f.basename;null!=a&&(c=f.base_starting_number,e=0,k=1,null!=c&&(b=c.split(","),e=parseInt(b[0],10),1<b.length&&(k=parseInt(b[1],10))),y=f.num_frames,null==y&&(y=f.num_images),y=parseInt(y,
10),Rj(a,e,k));lh=!0;b=f.zip_static;if(D(b,"f")||D(b,"n"))lh=!1;mh=!0;b=f.background_static;if(D(b,"f")||D(b,"n"))mh=!1;a=f.overlay_filenames;null!=a&&Sj(a);vb=null;a=f.image_preserve;if(null!=a)for(b=a.split(","),vb=[],a=0;a<b.length;a++)vb[a]=parseInt(b[a].trim(),10),1<a%4&&(vb[a]=vb[a]-vb[a-2]+1);Ni=!1;D(f.keep_enhancement,"t")&&(Ni=!0);Oi=!0;D(f.keep_zoom,"f")&&(Oi=!1);te=nh=0;Pi=!1;a=f.hide_bottom;null!=a&&(b=a.split(","),nh=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Pi=!0));ue=oh=0;
Qi=!1;a=f.hide_top;null!=a&&(b=a.split(","),oh=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Qi=!0));ve=ph=0;Ri=!1;a=f.hide_left;null!=a&&(b=a.split(","),ph=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Ri=!0));we=qh=0;Si=!1;a=f.hide_right;null!=a&&(b=a.split(","),qh=parseInt(b[0].trim(),10),1<b.length&&D(b[1],"t")&&(Si=!0));Ti=!1;D(f.hide_background,"t")&&(Ti=!0);Ui="<div>";Vi=300;Wi=500;a=f.popup_style;null!=a&&(Ui='<div style="'+a+'">');a=f.popup_window_size;null!=a&&(b=a.split(","),
Wi=b[0],Vi=b[1]);Xi=!1;a=f.wheel_frames;null!=a&&(Xi=!0,Ja.useWheel(R.wheel));eg=Ta=!1;D(f.active_zoom,"t")&&(null==Ua&&(Ta=!0),Ja.useWheel(R.wheel));rh=!1;D(f.cycle_zoom,"t")&&(rh=!0);a=f.initial_zoom;null!=a&&(b=a.split(","),ud="auto"!=b[0].toLowerCase()?parseFloat(b[0]):"auto",1<b.length?(kf=parseInt(b[1],10),Yi=parseInt(b[2],10)):kf=-1,Zi=!0);xe=1;ye=!1;Va=null;a=f.zoom_scale;if(null!=a)if(b=a.split(","),1===b.length)D(a,"hi_res")?(ye=!0,xe=0):xe=parseFloat(a);else{Va=Array(b.length);for(a=0;a<
b.length;a++)Va[a]=parseFloat(b[a]);ye=!0}Md=9999999;a=f.maximum_zoom;null!=a&&(Md=parseFloat(a));fg=!0;D(f.use_progress_bar,"f")&&(fg=!1);a=f.dwell;null!=a&&(b=a.split(","),nb=parseInt(b[0].trim(),10),1<b.length&&(Xc=parseInt(b[1].trim(),10),10>Xc&&(Xc=10),Nd=parseInt(b[2].trim(),10),sh=parseInt(b[3].trim(),10)));a=f.rate;null!=a&&(b=a.split(","),nb=Math.round(1E4/parseFloat(b[0].trim())),1<b.length&&(Xc=Math.round(1E4/parseFloat(b[2].trim())),10>Xc&&(Xc=10),Nd=Math.round(1E4/parseFloat(b[1].trim()))));
a=f.frame_times_template;null!=a&&(b=a.split(","));ze=27;a=f.mp4_quantization;null!=a&&(ze=parseInt(a,10),10>ze||51<ze)&&(ze=27);kc=null;a=f.times;if(null!=a){b=a.split(",");kc=Array(b.length);for(a=0;a<b.length;a++)kc[a]=parseInt(b[a].trim(),10);E(kc)}a=f.extrap_times_filename;if(null!=a){kc=[];var B=new XMLHttpRequest;B.open("get",a,!0);B.onload=function(){for(var p=B.responseText.split("\n"),V=0;V<p.length;V++){var F=p[V].split(" ");if(3==F.length){F[2].trim();var T=parseInt(F[0],10)-1;kc[T]=100*
parseInt(F[2].substring(0,2),10)+parseInt(F[2].substring(3,5),10)+parseInt(F[2].substring(6,8),10)/30}}E(kc)};B.send()}lf=null;a=f.extrap_times_template;null!=a&&(lf=RegExp(a));$i=["Click on target's initial position","Click on target's final position","Move pointer around or click here to select target"];aj=10;D(f.extrap_prompts_position,"bot")&&(aj=9999);a=f.extrap_prompts;null!=a&&($i=a.split(","));gg=["Click on first point to mark","Save points","Remove last point"];a=f.mark_prompts;null!=a&&
(gg=a.split(","));hg=!0;D(f.mark_close,"f")&&(hg=!1);th="12pt Arial";bj="white";a=f.mark_prompts_style;null!=a&&(b=a.split(","),th=b[0].trim(),1<b.length&&(bj=b[1].trim()));cj=f.controls;fa("controls = "+f.controls);fa("bottom_controls = "+f.bottom_controls);Od=ig=Yc=Zc=lc=mc=jg=Bc=null;null!=cj&&Zb(cj,!0);dj=f.bottom_controls;null!=dj&&Zb(dj,!1);Pd=!1;a=f.probe_table;null!=a&&I(a);b=f.enhance_filename;null==b&&(b=f.enhance_table);if(null!=b){fa("Reading enhancement table...");Pd=!1;B=new XMLHttpRequest;
nc=[];Qd=[];kg=[];Rd=[];$c=[];var m,q,M;Pb=[];Qb=[];Rb=[];mf=[];N=-1;ej=!0;var G=!1,ba,Ga,xa,X,u,Fa,K,Ka,db,ma,Wa,Ma,ob;B.onload=function(){for(var p=this.responseText.split("\n"),V=0;V<p.length;V++)if(!(2>p[V].length)){var F=p[V].replace(/\s+/g," ").trim(),T=F.indexOf("#");if(0!=T)if(0<T&&(F=F.substring(0,T)),T=F.split(","),0==T[0].indexOf("*"))N++,nc[N]=Array(256),Rd[N]=Array(256),Qd[N]=Array(256),$c[N]=Array(256),Pb[N]=Array(256),Qb[N]=Array(256),Rb[N]=Array(256),mf[N]=Array(256),nc[N]=Array(256),
kg[N]=1<T.length?T[1].trim():"None",m=" ",q="Value =",M=1,F=x("option"),F.innerHTML=T[0].substring(1),F.value=N,null!=lb&&lb.add(F);else{var ra=F.indexOf("value");0>ra&&(ra=F.indexOf("probe"));G=!1;ma=Wa=0;0<ra&&(T=F.substring(ra+1),F=F.substring(0,ra),ra=T.indexOf("="),T=T.substring(ra+1),T=T.split(","),1==T.length?(q=T[0].trim(),M=-1,G=!1):(ma=parseFloat(T[0].trim()),Wa=parseFloat(T[1].trim()),2<T.length&&(M=parseInt(T[2],10)),3<T.length&&(m=Tj(T[3].trim())),4<T.length&&(q=T[4].trim()),G=!0));F=
F.split(" ");ba=parseInt(F[0].trim(),10);Ga=parseInt(F[1].trim(),10);xa=Ga-ba;X=parseFloat(F[2].trim());u=parseFloat(F[3].trim());Fa=parseFloat(F[4].trim());K=parseFloat(F[5].trim());Ka=parseFloat(F[6].trim());db=parseFloat(F[7].trim());Ma=ob=255;9<F.length&&(Ma=parseFloat(F[8].trim()),ob=parseFloat(F[9].trim()));for(F=ba;F<=Ga;F++)0===xa?(Pb[N][ba]=X,Qb[N][ba]=Fa,Rb[N][ba]=Ka,mf[N][ba]=Ma):(Pb[N][F]=Math.round(X+(u-X)*(F-ba)/xa),Qb[N][F]=Math.round(Fa+(K-Fa)*(F-ba)/xa),Rb[N][F]=Math.round(Ka+(db-
Ka)*(F-ba)/xa),mf[N][F]=Math.round(Ma+(ob-Ma)*(F-ba)/xa)),Rd[N][F]=q,Qd[N][F]=m,$c[N][F]=M,G&&(nc[N][F]=0===xa?ma:ma+(Wa-ma)*(F-ba)/xa)}}-1!=ic&&O[ic].checked&&(lb.disabled=!1);Pd=!0;n()};B.open("get",b,!0);B.send()}else n()}function n(){var b=f.sprite_filenames;if(null!=b){var a=b.split(",");uh=0;Na=[];b=f.sprite_images_offset;Sd=-1;null!=b&&(Sd=parseInt(b,10)-1);for(b=0;b<a.length;b++){Na[b]=new Image;Na[b].gotit=!1;Na[b].inx=b;Na[b].fromfile=!0;var d="/";0<a[b].indexOf("?")&&(d="?");Na[b].zoomme=
0<a[b].indexOf(d+"zoom");Na[b].anim=0<a[b].indexOf(d+"animate");d=a[b].indexOf(d);0<d&&(a[b]=a[b].substring(0,d));Na[b].onload=function(){Na[this.inx].gotit=!0;uh++;uh==a.length&&A()};Na[b].src=a[b].trim()}}else A()}function A(){for(var b=Object.keys(f),a=0;a<b.length;a++)D(b[a],"hotspot")&&Mc("hotspot="+f[b[a]]);ke?R.getFOF():(vd=!0,Nb())}function I(b){var a=new XMLHttpRequest;nc=[];kg=[];Qd=[];var d=" ";Rd=[];var c="Value=";$c=[];var e=1;Td=[];vh=[];Pb=[];Qb=[];Rb=[];var k,l=-1;N=-1;var g=0;a.onload=
function(){for(var t=this.responseText.split("\n"),B=0;B<t.length;B++)if(!(2>t[B].length)){var m=t[B].replace(/\s+/g," ").trim().split(","),q=m[0].split(" ");if(0==q[0].indexOf("*"))N++,nc[N]=[],Rd[N]=[],Qd[N]=[],$c[N]=[],Pb[N]=[],Qb[N]=[],Rb[N]=[],vh[N]=[],Td[N]=[],l=-1,kg[N]=1<m.length?m[1].trim():"None",g=1;else if(0!=g){l++;var M=Array(3);nc[N][l]=parseFloat(q[0]);Pb[N][l]=parseInt(q[1].trim(),10);Qb[N][l]=parseInt(q[2].trim(),10);Rb[N][l]=parseInt(q[3].trim(),10);0!=l&&(M[0]=Pb[N][l]-Pb[N][l-
1],M[1]=Qb[N][l]-Qb[N][l-1],M[2]=Rb[N][l]-Rb[N][l-1],k=0,Math.abs(M[1])>Math.abs(M[k])&&(k=1),Math.abs(M[2])>Math.abs(M[k])&&(k=2),vh[N][l-1]=k,Td[N][l-1]=M,0==Td[N][l-1][k]&&(Td[N][l-1][k]=1));1<m.length&&(0==m[1].trim().indexOf('"')?(e=-1,m=m[1].trim(),c=m.substr(1,m.length-2),d=""):(e=parseInt(m[1],10),2<m.length&&(d=Tj(m[2].trim())),3<m.length&&(c=m[3].trim())));Rd[N][l]=c;$c[N][l]=e;Qd[N][l]=d}}Pd=!0};a.open("get",b,!0);a.send()}function C(b){b=b.split(",");var a=b[0].trim();"PS"===a?(ad=new nk,
ad.init(b)):"CE"==a?(ad=new ok,ad.init(b)):"LCC"==a?(ad=new pk,ad.init(b)):(ad=null,wh=parseFloat(b[0]),xh=parseFloat(b[1]),Uj=parseFloat(b[2]),yh=parseFloat(b[3]),0<xh&&0>yh&&(yh+=360));null==f.coordinates_display_style&&(Qf="Lat = ",Rf=" Lon = ");me=!0}function $a(b){var a=new XMLHttpRequest;a.onload=function(){h(this.responseText.split("\n"))};a.open("get",b+"?"+Math.round(1E5*Math.random()),!0);a.send()}function w(b){var a;if(null!=pe){for(a=0;a<pe.length;a++)-1!=pe[a].indexOf(b)&&(O[a].checked=
!1);for(a=0;a<pe.length;a++)vc(a)}}function E(b){zh=Array(b.length);for(var a=0;a<b.length;a++){var d=60*Math.floor(b[a]/100)+Math.floor(b[a])%100;0===a&&(bd=d);var c=d-bd;0>c&&(c=d+1440-bd);zh[a]=c;fa("times s="+d+"  min="+zh[a])}bd+=cg;1440<=bd&&(bd-=1440);0>bd&&(bd+=1440);fa("Starting minute = "+bd)}function aa(b,a){if(0!=b&&!Ud)for(var d=0;d<b;d++)0==O[wb[d].overlay].isGhost&&(O[wb[d].overlay].parentNode.style.visibility=a)}function la(){var b,a,d,c,e;if(Ah){var k=new XMLHttpRequest;var l=0;oa=
[];k.onload=function(){var g=this.responseText.split("\n");fa("Processing FoF-substitute: "+fj);for(d=0;d<g.length;d++)if(!(2>g[d].length||0>g[d].indexOf(Vj))&&(oa[l]=[],e=g[d].indexOf("overlay"),0<=e)){b=g[d].substring(e);e=b.indexOf("=");0>e&&fa("!! Cannot find a = sign in "+b);a=b.substring(e+1);b=a.trim();a=b.split(",");ya=Math.max(ya,a.length);fa("numOverlays reset in fof_substitute to "+ya);for(c=0;c<a.length;c++)oa[l][c]=a[c].trim(),null!=nf&&Bh[c]?oa[l][c]=(nf+oa[l][c]).trim():null!=jc?oa[l][c]=
(jc+oa[l][c]).trim():null!=Ea&&(oa[l][c]=(Ea+oa[l][c]).trim());l+=1}fa("Number of frames "+y+"... number of fof_sub frames = "+l);qb()};k.open("get",fj+"?"+Math.round(1E5*Math.random()),!0);k.send()}else qb()}function qb(){0!=oc?aa(oc,"visible"):0!=gj&&aa(gj,"hidden");vd=!0;Nb()}function uc(b,a){Ae||(hc.height=a,hc.width=b,pd.height=a,pd.width=b,of.height=a,of.width=b,Be.height=a,Be.width=b,pf=Be.getContext("2d"),ha=2*Math.floor(b/2),da=2*Math.floor(a/2),cb=0==kb?da/2:0>kb?da+kb:kb,Aa=ha/2,void 0!=
zc&&zc(.5),Kd&&(b=Ce*da/ha,a=Ce,b<Vd&&(a=Vd*ha/da,b=Vd),Oa=a,Pa=b),lg=ha/2-100,mg=da/2-10,Y=Oa/ha,Z=Pa/da,eb=Math.floor(Oa/ca),fb=Math.floor(Pa/ea),De=Ee=0,Kd&&(Ee=Math.round((Oa-Ce)/2),De=Math.round((Pa-Vd)/2)),Eb.style.height=da+"px",Eb.style.width=ha+"px",wd.style.height=da+"px",wd.style.width=ha+"px",qf.style.height=da+"px",qf.style.width=ha+"px",Nf(y,!1),hj&&(hj=!1,null!=rf&&rf()))}function Mb(){for(var b=0,a={},d=0;d<y;a={$jscomp$loop$prop$ii$2:a.$jscomp$loop$prop$ii$2},d++){a.$jscomp$loop$prop$ii$2=
d;var c=null==Ea?gb[d]:gb[d].substring(gb[d].lastIndexOf("/")+1);(c=ij.file(c))?c.async("arraybuffer").then(function(e){return function(k){k=new Blob([k]);xd[e.$jscomp$loop$prop$ii$2]=URL.createObjectURL(k);b++;b>=y&&ab()}}(a),function(e){return function(){xd[e.$jscomp$loop$prop$ii$2]=null;b++;b>=y&&ab()}}(a)):(xd[a.$jscomp$loop$prop$ii$2]=null,b++,b>=y&&ab())}}function ab(){var b=0;if(0==ya)Yb();else for(var a=0;a<y;a++){yd[a]=[];for(var d={},c=0;c<ya;d={$jscomp$loop$prop$ii$6:d.$jscomp$loop$prop$ii$6,
$jscomp$loop$prop$jj$7:d.$jscomp$loop$prop$jj$7},c++){d.$jscomp$loop$prop$ii$6=a;d.$jscomp$loop$prop$jj$7=c;var e=null==jc&&null==Ea?oa[a][c]:oa[a][c].substring(oa[a][c].lastIndexOf("/")+1);(e=ij.file(e))?e.async("arraybuffer").then(function(k){return function(l){l=new Blob([l]);yd[k.$jscomp$loop$prop$ii$6][k.$jscomp$loop$prop$jj$7]=URL.createObjectURL(l);b++;b>=y*ya&&Yb()}}(d),function(k){return function(){yd[k.$jscomp$loop$prop$ii$6][k.$jscomp$loop$prop$jj$7]=null;b++;b>=y*ya&&Yb()}}(d)):(yd[a][c]=
null,b++,b>=y*ya&&Yb())}}}function Nb(){if(Ld){var b=new XMLHttpRequest,a=null==se?kh:se+kh;lh||(a=a+"?"+Math.round(1E5*Math.random()));b.open("GET",a,!0);b.responseType="arraybuffer";xd=[];yd=[];b.addEventListener("progress",function(d){d.lengthComputable&&bb("Loading ZIP file",d.total,d.loaded)});b.onload=function(d){(new JSZip).loadAsync(this.response).then(function(c){ij=c;Mb()},function(){fa("Unable to read ZIP file: "+kh)})};b.send()}else Yb()}function Yb(){var b,a,d;void 0!=ng&&ng(!1);var c=
wi+Math.round(1E4*Math.random()),e=[];e[0]=dc;null!=pc&&(pc.disabled=!0);null!=Cc&&(Cc.disabled=!0);for(b=1;b<y;b++)e[b]=b<=dc?b-1:b;xb=Array(y);cd=yb=0;jj=fg;Ch&&(sb.max=y);Ae&&(Fe||Jd)&&(dd=[],Gb=[],Wd=[],Dh=[],og=[]);null!=lb&&(Ni?null==le&&(le=lb.value):lb.selectedIndex=0);for(var k=0;k<y;k++){b=e[k];Ae&&(Fe||Jd)&&(dd[b]=x("canvas"),Gb[b]=x("canvas"));xb[b]=new Image;xb[b].gotit=!1;xb[b].frameNum=b;xb[b].onerror=function(){yb++;v()};xb[b].onload=function(){Ae&&(Pa=this.height,Oa=this.width,Vd=
Pa,Ce=Oa,Ae=!1,xi?Kd?R.setWindowSize(J.offsetWidth,J.offsetHeight):uc(ha,da):uc(Oa,Pa),fb=Pa,eb=Oa,Zi&&("auto"==ud&&(ud=(Y+Z)/2,kf=-1),fb/=ud,eb/=ud,0>kf&&(kf=Oa/2,Yi=Pa/2),sa=Math.round(kf-Oa/2/ud),ta=Math.round(Yi-Pa/2/ud),ca=ea=ud,1!=ud&&(Ta=!1,R.toggleZooming()),te=nh,ue=oh,we=qh,ve=ph,Ed()));Ld&&null!=xd[this.frameNum]&&URL.revokeObjectURL(xd[this.frameNum]);if(0<pg&&!zd){Eh.height=Pa;Eh.width=Oa;sf=Eh.getContext("2d");sf.clearRect(0,0,ha,da);for(var g=0;g<Hb.length;g++){for(var t=Hb[g].ctx.getImageData(0,
0,Hb[g].width,Hb[g].height).data,B=sf.getImageData(Hb[g].xmin,Hb[g].ymin,Hb[g].width,Hb[g].height),m=3;m<t.length;m+=4)0!=t[m]&&(B.data[m]=g+1);sf.putImageData(B,Hb[g].xmin,Hb[g].ymin)}Ta||(Ib=!0);ca==qg&&(Ib=!0);zd=!0}if(vd){vd=!1;z=hc.getContext("2d");z.imageSmoothingEnabled=oe;z.imageSmoothingQuality=ui;z.fillStyle="blue";z.font="bold 20px Arial";r=pd.getContext("2d");r.imageSmoothingEnabled=oe;zb=Array(y);Nf(y,!0);rg&&!Xa?(Sa(La(dc)),Gd=Yf):Sa(La(H));if(0<ya)for(ka=Array(y),m=0;m<y;m++)for(d=
e[m],ka[d]=Array(ya),a=0;a<ya;a++)if(void 0!=Ac[a+1]&&Ac[a+1]>=y&&(Ac[a+1]=y-1),void 0==Ac[a+1]||Ac[a+1]==d)ka[d][a]=new Image,ka[d][a].gotit=!1,ka[d][a].frameNum=d,ka[d][a].overlayNum=a,ka[d][a].onerror=function(){yb++;v()},ka[d][a].onload=function(){this.gotit=!0;var q=this.frameNum;yb++;v();!$f||null!=qa&&hh[this.overlayNum]||this.height==Vd&&this.width==Ce?this.overlayNum==gf-1&&(zb[this.frameNum]=0):(this.gotit=!1,fa("Bad image size:"+this.src));if(Jd&&this.gotit&&this.overlayNum==ic)dd[q].height=
this.height,dd[q].width=this.width,tf=dd[q].getContext("2d"),tf.drawImage(this,0,0),Dh[q]=tf.getImageData(0,0,this.width,this.height).data,Gb[q].height=this.height,Gb[q].width=this.width,Wd[q]=Gb[q].getContext("2d"),Wd[q].drawImage(this,0,0),og[q]=Wd[q].getImageData(0,0,this.width,this.height),ka[q][this.overlayNum]=null,ka[q][this.overlayNum]=Gb[q],ka[q][this.overlayNum].gotit=!0;else if(this.gotit&&O[this.overlayNum].hotspotIndex){var M=x("canvas");M.height=this.height;M.width=this.width;var G=
M.getContext("2d");G.drawImage(this,0,0);var ba=G.getImageData(0,0,this.width,this.height).data,Ga=ba.length;var xa=this.overlayNum;var X;for(X=0;X<Ga;X+=4)if(0!=ba[X]){0==Sb&&(Tb=[]);var u=ba[X];var Fa=Math.floor(X/4/M.width);G=Math.floor(X/4%M.width);Tb[Sb]=new $b(G,Fa,"spritefn",u,"pan",null,null,xa,q,null,null);Sb++}}else if(this.gotit&&Ai&&(!ih||ih&&Ei[this.overlayNum])){M=x("canvas");M.height=this.height;M.width=this.width;G=M.getContext("2d");G.drawImage(this,0,0);Fa=G.getImageData(0,0,this.width,
this.height);ba=Fa.data;Ga=ba.length;for(X=0;X<Ga;X+=4)ba[X]===Bi&&ba[X+1]===Ci&&ba[X+2]===Di&&(ba[X+3]=0);G.putImageData(Fa,0,0);ka[q][this.overlayNum]=null;ka[q][this.overlayNum]=M;ka[q][this.overlayNum].gotit=!0}this.gotit&&gh[this.overlayNum]?(Fh.clearRect(0,0,ha,da),Fh.drawImage(ka[q][this.overlayNum],0,0,ha,da)):this.gotit&&hh[this.overlayNum]&&null!=qa&&(M=x("canvas"),M.height=Pa,M.width=Oa,8>qa.length&&(qa[4]=0,qa[5]=0,qa[6]=Oa,qa[7]=Pa),G=M.getContext("2d"),G.imageSmoothingEnabled=zi,G.drawImage(this,
qa[0],qa[1],qa[2],qa[3],qa[4],qa[5],qa[6],qa[7]),ka[q][this.overlayNum]=null,ka[q][this.overlayNum]=M,ka[q][this.overlayNum].gotit=!0,null!=Ob&&Ob[this.overlayNum]&&(ka[q][this.overlayNum].origImage=this));Ld&&null!=yd[q][this.overlayNum]&&URL.revokeObjectURL(yd[q][this.overlayNum]);if(void 0!=Ac[this.overlayNum+1]&&Ac[this.overlayNum+1]==q)for(M=0;M<y;M++)M!=q&&(ka[M][this.overlayNum]=ka[q][this.overlayNum],yb++,v())},g=oa[d][a],void 0==uf||uf[a]||(g+=c),ka[d][a].src=Ld&&(dg||yd[d][a])?yd[d][a]:
g,cd++;if(null!=Xd)for(ed=[],a=0;a<Xd.length;a++)ed[a]=new Image,ed[a].gotit=!1,ed[a].onerror=function(q){yb++;v()},ed[a].onload=function(q){q.currentTarget.gotit=!0;yb++;v()},ed[a].src=Xd[a],cd++;if(null!=Ab&&0<Ab.length)for(hb=[],a=0;a<Ab.length;a++)if(void 0!=Ab[a])for(hb[a]=[],d=0;d<Ab[a].length;d++)for(hb[a][d]=[],m=0;m<y;m++)Wj(Ab[a][d],"/")?(g=oa[m][a].lastIndexOf("/"),g=oa[m][a].substring(0,g+1)+Ab[a][d]+oa[m][a].substring(g+1),hb[a][d][m]=new Image,hb[a][d][m].gotit=!1,hb[a][d][m].onerror=
function(q){yb++;v()},hb[a][d][m].onload=function(q){q.currentTarget.gotit=!0;yb++;v()},hb[a][d][m].src=g,cd++):0===m?(hb[a][d][0]=new Image,hb[a][d][0].gotit=!1,hb[a][d][0].onerror=function(q){yb++;v()},hb[a][d][0].onload=function(q){q.currentTarget.gotit=!0;yb++;v()},hb[a][d][0].src=Ab[a][d],cd++):hb[a][d][m]=hb[a][d][0]}!$f&&0!=this.height&&0!=this.width||this.height==Vd&&this.width==Ce?(this.gotit=!0,0==gf&&(zb[this.frameNum]=0)):(this.gotit=!1,fa("Image has invalid size:"+this.src));Fe&&this.gotit&&
(m=this.frameNum,dd[m].height=this.height,dd[m].width=this.width,tf=dd[m].getContext("2d"),tf.drawImage(this,0,0),Dh[m]=tf.getImageData(0,0,this.width,this.height).data,Gb[m].height=this.height,Gb[m].width=this.width,Wd[m]=Gb[m].getContext("2d"),Wd[m].drawImage(this,0,0),og[m]=Wd[m].getImageData(0,0,this.width,this.height),xb[m]=null,xb[m]=Gb[m],xb[m].gotit=!0);yb++;v();Oi||R.resetZoom(0);Yd=!0;Xj||(Xj=!0,ib=!1,Yj());U(Xa);this.frameNum==dc&&1==this.gotit&&1==sg&&(Sa(dc),ia())};var l=gb[b];void 0!=
Ac[0]&&(l=Ac[0],l>=y&&(l=y-1),l=gb[l]);mh||(l+=c);xb[b].src=Ld&&(dg||xd[b])?xd[b]:l;cd++}Ub=Dc=!1;wa()}function va(b,a,d,c,e,k){b.label_on=d;b.label_off=c;bc&&(b.className=k);d=null;c=f[a+"_labels"];null==c&&(c=f[a+"_label"]);null!=c&&(c=c.split(","),b.label_on=c[0].trim(),1<c.length&&(b.label_off=c[1].trim()),2<c.length&&(d="width:"+c[2].trim()+"px;"));null!=e&&(b.title=e);b.innerHTML=b.label_on;e=a=c=f[a+"_style"];null!=c&&(c=c.split("&"),1<c.length&&(a=c[0],e=c[1]));b.style_on=(null!=d?d:"")+Ad+
a;b.style_off=(null!=d?d:"")+Ad+e;null!=b.style_on&&1<b.style_on.length?b.setAttribute("style",b.style_on):(b.style_on=null,b.style_off=null)}function Zb(b,a){Ad=f.buttons_style;null==Ad&&(Ad="");var d=null,c=null;d=a?f.controls_tooltip:f.bottom_controls_tooltip;var e=b.split(",");if(null!=d){var k=d.split(",");k.length!=e.length&&(fa("!!! Number of tooltips must equal number of controls!"),k=d=null)}var l={};for(b=0;b<e.length;l={$jscomp$loop$prop$sfbounds$11:l.$jscomp$loop$prop$sfbounds$11},b++){var g=
null!=d?k[b]:null;var t=e[b].trim();c=t.indexOf("/");if(0===c||0===b){0===c&&(t=t.substring(1));P=x("div");P.align=cf;var B=f.controls_style;null!=B?P.setAttribute("style",B):P.setAttribute("style","position:relative;padding:2px;width:100%;");a?(J.insertBefore(P,Eb),tg=P,tg.id=vf+"-top-controls"):(B=f.bottom_controls_style,null!=B&&P.setAttribute("style",B),J.appendChild(P),ug=P,ug.id=vf+"-bottom-controls")}"enhance"==t.trim()&&(lb=x("select"),c=f.enhance_style,null!=c&&lb.setAttribute("style",c),
null!=g&&(lb.title=g),c=x("option"),c.innerHTML=void 0==f.enhance_prompt?"Pick Enhancement":f.enhance_prompt,c.value=-1,lb.add(c),lb.addEventListener("change",R.doEnhance,!1),Fe=!Jd,lb.disabled=Fe?!1:!0,P.appendChild(lb));"custom"==t&&(jg=x("button"),va(jg,"custom","On","Off",g,"custom"),P.appendChild(jg));"mp4"==t&&(Cc=x("button"),va(Cc,"mp4","Make MP4","Stop",g,"mp4"),Cc.addEventListener("click",R.makeMP4,!1),P.appendChild(Cc));"anigif"==t&&(pc=x("button"),va(pc,"anigif","Make GIF","Stop",g,"anigif"),
pc.addEventListener("click",R.makeAniGIF,!1),P.appendChild(pc));"startstop"==t&&(Bc=x("button"),va(Bc,"startstop","Start","Stop",g,"startstop start"),Bc.addEventListener("click",R.toggleIsLooping,!1),P.appendChild(Bc));"looprock"==t&&(wf=x("button"),va(wf,"looprock","Rock","Loop",g,"looprock rock"),xf=1,wf.addEventListener("click",R.toggleLoopRock,!1),P.appendChild(wf),D(f.start_rocking,"t")&&R.toggleLoopRock());"loophalt"==t&&(yf=x("button"),va(yf,"loophalt","Halt","Loop",g,"loophalt halt"),qc=!1,
yf.addEventListener("click",R.toggleLoopHalt,!1),P.appendChild(yf));"extrap"==t&&(fd=x("button"),va(fd,"extrap","Enable Extrap","Disable Extrap",g,"extrap"),fd.addEventListener("click",R.toggleExtrap,!1),P.appendChild(fd));D(t,"location")&&(Ge=x("button"),va(Ge,"location","Show Loc","Hide Loc",g,"location"),0<t.indexOf("/on")?(W(Ge,!1,"location off"),He=!0,tb.push(J.style.cursor),J.style.cursor=Wf):(He=!1,J.style.cursor=tb.pop()),Ge.addEventListener("click",function(){(He=!He)?(W(Ge,!1,"location off"),
tb.push(J.style.cursor),J.style.cursor=Wf):(W(Ge,!0,"location on"),J.style.cursor=tb.pop());wa()},!1),P.appendChild(Ge));if("distance"==t||"distance/hold"==t)Qa=x("button"),va(Qa,"distance","Show dist","Hide dist",g,"distance"),Zd=gc=Uf=!1,"distance/hold"==t&&(Zd=!0),Qa.addEventListener("click",function(){(gc=!gc)?(W(Qa,!1,"distance off"),tb.push(J.style.cursor),J.style.cursor=Sg,Zd&&(eg=Ta,Ta=!1,null!=Ua&&(Ua.disabled=!0))):(W(Qa,!0,"distance on"),J.style.cursor=tb.pop(),Zd&&(Ub=!1,wa(),Ta=eg,null!=
Ua&&(Ua.disabled=!1)))},!1),P.appendChild(Qa);D(t,"probe")&&(Ie=x("button"),va(Ie,"probe","Show probe","Hide probe",g,"probe"),0<t.indexOf("/on")?(W(Ie,!1,"probe off"),Rc=!0,tb.push(J.style.cursor),J.style.cursor=Xf):(Rc=!1,J.style.cursor=tb.pop()),Ie.addEventListener("click",function(){(Rc=!Rc)?(W(Ie,!1,"probe off"),tb.push(J.style.cursor),J.style.cursor=Xf):(W(Ie,!0,"probe on"),J.style.cursor=tb.pop())},!1),P.appendChild(Ie));"mark"==t&&($d=x("button"),va($d,"mark","Mark","Stop Mark",g,"mark"),
zf=!0,$d.addEventListener("click",function(){rc=!rc;Ya=[];rc?(Je=0,W($d,!1,"mark off"),null!=Ua&&(Ua.disabled=!0),null!=Qa&&(Qa.disabled=!0),tb.push(J.style.cursor),J.style.cursor=Tg):(W($d,!0,"mark on"),null==Ua||Ub||Zd||(Ua.disabled=!1),null!=Qa&&(Qa.disabled=!1),Je=-1,J.style.cursor=tb.pop());wa()},!1),Zj=new ac("black","white",th,"black",20,5,5),kj=new ac("black","white",th,"black",20,5,5),P.appendChild($d));"refresh"==t&&(ig=x("button"),va(ig,"refresh","Refresh",null,g,"refresh"),ig.addEventListener("click",
R.reloadFOF,!1),P.appendChild(ig));"restore"==t&&(Gh=x("button"),va(Gh,"restore","Restore",null,g,"restore"),Gh.addEventListener("click",function(p){rd=!0;for(p=0;p<O.length;p++)O[p].checked=O[p].restorableState,null!=yc&&!yc[p]&&O[p].checked&&(rd=!1);for(p=0;p<O.length;p++)vc(p)},!1),P.appendChild(Gh));"setframe"==t&&(l.$jscomp$loop$prop$sfbounds$11=function(){var p=parseInt(sb.value,10)-1;if(vg||Hh){for(var V=0;V<y;V++)rb(V,0);wg=0}else if(p!=lj&&Ih){if(0==wg){for(V=0;V<y;V++)V>p?rb(V,0):rb(V,-1);
wg=1}else{for(V=p+1;V<y;V++)rb(V,-1);wg=0;U(!0)}lj=p}},sb=x("input"),bc&&(sb.className="setframe"),sb.type="range",sb.min=1,sb.max=100,sb.value=1,xg="Frame #*",null!=g&&(sb.title=g),B=f.setframe_label,null!=B&&(xg=B),Af=x("span"),Af.innerHTML=xg.replace("*",1),c="display:block;vertical-align:middle;"+f.setframe_style,sb.setAttribute("style",c),c=x("span"),c.setAttribute("style","display:inline-block;vertical-align:top;"),Af.setAttribute("style","display:block;vertical-align:middle;"+f.setframe_label_style),
c.appendChild(Af),c.appendChild(sb),P.appendChild(c),P.addEventListener("touchmove",function(p){p.stopPropagation()},!1),P.addEventListener("mousemove",function(p){p.stopPropagation()},!1),sb.addEventListener("input",function(p){p.preventDefault();p.stopPropagation();U(!1);p=parseInt(sb.value,10)-1;0<=zb[p]&&(Sa(p),Af.innerHTML=xg.replace("*",H+1));ia()},!1),wg=0,lj=-1,sb.addEventListener("pointerup",function(p){return function(V){V.stopPropagation();p.$jscomp$loop$prop$sfbounds$11()}}(l),!1),sb.addEventListener("mouseup",
function(p){return function(V){V.stopPropagation();p.$jscomp$loop$prop$sfbounds$11()}}(l),!1),sb.addEventListener("change",function(p){return function(V){V.stopPropagation();p.$jscomp$loop$prop$sfbounds$11()}}(l),!1),Ch=!0);"framelabel"==t&&(Bb=x("button"),bc&&(Bb.className="framelabel"),Bb.innerHTML="",null!=g&&(Bb.title=g),Vb=null,B=f.frame_labels,null!=B&&(Vb=B.split(","),Bb.innerHTML=Vb[0]),c=Ad+f.framelabel_style,null!=c&&Bb.setAttribute("style",c),c=f.framelabel_position,null!=c&&(c=c.split(","),
Bb.style.position="absolute",Bb.style.left=J.offsetLeft+parseInt(c[0],10)+"px",Bb.style.top=J.offsetTop+parseInt(c[1],10)+"px"),P.appendChild(Bb));if("autorefresh"==t||"autorefresh/off"==t)null!=Hd&&clearInterval(Hd),Od=x("button"),va(Od,"autorefresh","Disable Auto Refresh","Enable Auto Refresh",g,"autorefresh"),Od.addEventListener("click",R.toggleAutoRefresh,!1),ff=!1,P.appendChild(Od),"autorefresh"==t?R.toggleAutoRefresh():W(Od,!1,"autotoggle off");"backward"==t&&(lc=x("button"),va(lc,"backward",
"<","<",g,"step back"),lc.addEventListener("click",function(){U(!1);fc(-1);ia()},!1),P.appendChild(lc));"forward"==t&&(mc=x("button"),va(mc,"forward",">",">",g,"step forward"),mc.addEventListener("click",function(){U(!1);fc(1);ia()},!1),P.appendChild(mc));if("step"==t){c=f.step_labels;var m=null!=c?c.split(","):["<",">"];lc=x("button");bc&&(lc.className="step back");lc.innerHTML=m[0];lc.addEventListener("click",function(){U(!1);fc(-1);ia()},!1);c=Ad+f.step_style;null!=c&&lc.setAttribute("style",c);
null!=g&&(lc.title=g);P.appendChild(lc);mc=x("button");bc&&(mc.className="step forward");mc.innerHTML=m[1];mc.addEventListener("click",function(){U(!1);fc(1);ia()},!1);null!=c&&mc.setAttribute("style",c);null!=g&&(mc.title=g);P.appendChild(mc)}"first"==t&&(Ec=x("button"),va(Ec,"first","|<","|<",g,"firstlast first"),Ec.addEventListener("click",function(){U(!1);Sa(La(0));ia()},!1),P.appendChild(Ec));"last"==t&&(Fc=x("button"),va(Fc,"last",">|",">|",g,"firstlast last"),Fc.addEventListener("click",function(){U(!1);
Sa(La(y-1));ia()},!1),P.appendChild(Fc));"firstlast"==t&&(c=f.firstlast_labels,m=null!=c?c.split(","):["<<",">>"],Ec=x("button"),bc&&(Ec.className="firstlast"),Ec.innerHTML=m[0],Ec.addEventListener("click",function(){U(!1);Sa(La(0));ia()},!1),c=Ad+f.firstlast_style,null!=c&&Ec.setAttribute("style",c),null!=g&&(Ec.title=g),P.appendChild(Ec),Fc=x("button"),bc&&(Fc.className="firstlast"),Fc.innerHTML=m[1],Fc.addEventListener("click",function(){U(!1);Sa(La(y-1));ia()},!1),null!=c&&Fc.setAttribute("style",
c),null!=g&&(Fc.title=g),P.appendChild(Fc));"setspeed"==t?(Gc=x("input"),bc&&(Gc.className="setspeed"),Gc.type="range",Gc.min=Xc,Gc.max=Nd,Gc.value=Nd-nb,null!=g&&(Gc.title=g),c="vertical-align:middle;"+f.setspeed_style,Gc.setAttribute("style",c),Gc.addEventListener("input",function(p){nb=Nd-parseInt(Gc.value,10)+30;void 0!=Ke&&Ke(nb);U(!0);ia()},!1),P.appendChild(Gc)):"speed"==t&&(c=f.speed_labels,m=null!=c?c.split(","):["-","+"],Yc=x("button"),bc&&(Yc.className="speed slower"),Yc.innerHTML=m[0],
Yc.addEventListener("click",function(){nb+=sh;Zc.disabled=!1;nb>Nd&&(nb=Nd,Yc.disabled=!0);void 0!=Ke&&Ke(nb)},!1),c=Ad+f.speed_style,null!=c&&Yc.setAttribute("style",c),null!=g&&(Yc.title=g),P.appendChild(Yc),Zc=x("button"),bc&&(Zc.className="speed faster"),Zc.innerHTML=m[1],Zc.addEventListener("click",function(){nb-=sh;Yc.disabled=!1;nb<Xc&&(nb=Xc,Zc.disabled=!0);void 0!=Ke&&Ke(nb)},!1),null!=c&&Zc.setAttribute("style",c),null!=g&&(Zc.title=g),P.appendChild(Zc));"slide"==t&&(Bf=x("button"),va(Bf,
"slide","Slide","Un-slide",g,"slide off"),Bf.addEventListener("click",R.toggleSliding,!1),P.appendChild(Bf),Le=wc=!1);"fade"==t&&(Cf=x("button"),va(Cf,"fade","Fade","Un-Fade",g,"fade off"),Cf.addEventListener("click",R.toggleFading,!1),P.appendChild(Cf),Me=od=!1);"zoom"==t&&(Ua=x("button"),va(Ua,"zoom","Zoom","Un-zoom",g,"zoom off"),Ua.addEventListener("click",R.toggleZooming,!1),P.appendChild(Ua),Ta=!1);if("annotate"==t){Df=x("button");va(Df,"annotate","Annotate","Finished",g,"annotate");Ra=x("div");
Ra.setAttribute("style","position:absolute;box-sizing:content-box;height:120px;width:180px;top:20px;left:20px;z-index:15;visibility:hidden;background-color:lightgray;border-width:6px;border-style:solid;border-color:magenta;border-radius:25px;padding:10px;font:normal normal normal 16px Arial;color:black;");Ra.title="Drag this box around.  Select attributes, then go onto the image and click & drag";ae=be=20;yg=Hc=!1;mj=3;nj=11;ce=Ef=0;L=[];Ra.style["touch-action"]="none";var q=function(p){be=p.clientX-
ce;ae=p.clientY-Ef;Ra.style.top=ae+"px";Ra.style.left=be+"px"};Ra.addEventListener("mousedown",function(p){if(0!=p.clientX||0!=p.clientY)yg=!0,ce=p.clientX-be,Ef=p.clientY-ae},!1);Ra.addEventListener("mouseup",function(p){yg=!1},!1);Ra.addEventListener("mouseout",function(p){yg&&q(p)},!1);Ra.addEventListener("mousemove",function(p){yg&&q(p)},!1);window.PointerEvent?(Ra.addEventListener("pointerdown",function(p){"mouse"!=p.pointerType&&(ce=p.clientX-be,Ef=p.clientY-ae)},!1),Ra.addEventListener("pointermove",
function(p){"mouse"!=p.pointerType&&(0==ce&&(ce=p.clientX,Ef=p.clientY),q(p))},!1)):Ra.addEventListener("touchmove",function(p){p=p.changedTouches[0];0==ce&&(ce=p.clientX,Ef=p.clientY);q(p)},!1);Df.addEventListener("click",function(){if(Hc=!Hc){L=[];be=J.offsetLeft;ae=J.offsetTop;var p=f.annotate_position;null!=p&&(p=p.split(","),be+=parseInt(p[0],10),ae+=parseInt(p[1],10));Ra.style.top=ae+"px";Ra.style.left=be+"px";Ra.style.visibility="visible";W(Df,!1,"annotate off");ak=Ta;Ta=!1;null!=Ua&&(Ua.disabled=
!0);null!=Qa&&(Qa.disabled=!0)}else Ra.style.visibility="hidden",W(Df,!0,"annotate on"),Ta=ak,null==Ua||Ub||Zd||(Ua.disabled=!1),null!=Qa&&(Qa.disabled=!1);wa()},!0);Ff=oj("Color Black White Red Green Blue Yellow Orange Cyan Magenta".split(" "),"black black white red green blue yellow orange cyan magenta".split(" "),function(p){});Bd=oj("Width 1 2 3 4 5 6 7 8 10 12 14 16 18 20 24 28 32 36 38".split(" "),[1,1,2,3,4,5,6,7,8,10,12,14,16,18,20,24,28,32,36,38],function(p){6==Gf.selectedIndex?nj=Bd.selectedIndex:
mj=Bd.selectedIndex});Bd.title="Select width or font size";Gf=oj("Type Arrow Circle Box Polygon Draw Text Line".split(" "),[-1,0,1,2,3,4,5,6],function(p){6==Gf.selectedIndex?(Ic.focus(),Ic.select(),Bd.selectedIndex=nj):Bd.selectedIndex=mj;0==Ff.selectedIndex&&(Ff.selectedIndex=2)});c=x("button");c.style.width="70px";c.style.margin="5px";c.innerHTML="Erase";c.title="Erase last item";c.addEventListener("click",function(){0<L.length&&(L.pop(),wa())},!1);Ic=x("input");Ic.type="text";Ic.style.width="150px";
Ic.style.margin="5px";Ic.title="Enter your text here, then click where you want it";Ic.value="Text input";m=f.annotate_defaults;null!=m&&(m=m.split(","),Gf.selectedIndex=parseInt(m[0],10),1<m.length&&(Ff.selectedIndex=parseInt(m[1],10)),2<m.length&&(Bd.selectedIndex=parseInt(m[2],10)),3<m.length&&(Ic.value=m[3].trim()));m=x("div");m.innerHTML="Annotation Tools";var M=x("div");M.appendChild(Gf);M.appendChild(Ff);var G=x("div");G.appendChild(Bd);G.appendChild(c);c=x("div");c.appendChild(Ic);Ra.appendChild(m);
Ra.appendChild(M);Ra.appendChild(G);Ra.appendChild(c);P.appendChild(Df);J.appendChild(Ra)}"saveall"==t&&(Jh=x("button"),va(Jh,"saveall","SaveAll","SaveAll",g,"saveall"),pj=f.saveall_prompt,gd=f.saveall_filename,qj=!1,D(f.saveall_toggle,"t")&&(qj=!0),c=f.saveall_list,rj=null==c?["0"]:c.split(","),Jh.addEventListener("click",function(){for(var p=0;p<rj.length;p++)for(var V=parseInt(rj[p],10),F=0,T=0;T<gb.length;T++)qj&&0>zb[T]||(setTimeout(function(ra,jb){0===jb&&null!=pj&&(gd=window.prompt(pj,gd),
null!=gd&&1>gd.length&&(gd=null));jb=null==gd?"":-1!=gd.indexOf("#")?gd.replace("#",ra.toString()):gd+ra;var Ba=document.createElement("a");Ba.href=0==V?gb[ra]:oa[ra][V-1];Ba.download=jb;Ba.click()},1E3*F,T,F),F+=1)},!1),P.appendChild(Jh));sj=f.capture_prompt;Kh=f.capture_filename;null==Kh&&(Kh="haimage.png");"capture"==t&&(Lh=x("button"),va(Lh,"capture","Capture","Capture",g,"capture"),Lh.addEventListener("click",function(){R.doCapture()},!1),P.appendChild(Lh));"show"==t&&(Mh=x("button"),va(Mh,"show",
"Show","Show",g,"show"),Nh=f.show_prompt,bk=f.show_image_file,null==Nh&&(Nh="Right-click to save or copy the image<br> <font size='-1'>(to save in some browsers, you may need to first 'Open in New Tab')</font> <p>"),Mh.addEventListener("click",function(){if(bk)window.open(gb[H]);else{var p=hc.toDataURL("image/png;base64;");var V=window.open();V.document.write(Nh+"<img src="+p+"></img>")}},!1),P.appendChild(Mh));"toggle"==t&&(zb=[],c=f.toggle_size,null!=c?(c=c.split(","),Ne=parseInt(c[0],10),zg=parseInt(c[1],
10),Ag=parseInt(c[2],10)):(zg=Ne=10,Ag=3),tj="red",uj="blue",vj="orange",wj=!1,D(f.toggle_layout_width,"t")&&(wj=!0),c=f.toggle_colors,null!=c&&(c=c.split(","),uj=c[0].trim(),tj=c[1].trim(),vj=c[2].trim()),sc=x("div"),sc.setAttribute("style","position:relative;border:0px;margin:0px;padding:0px;-webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none; -webkit-tap-heightlight-color:transparent;"),sc.style.backgroundColor=P.style.backgroundColor,sc.align=cf,Oh=new PEvs(sc,
R.togdown,R.togup,null,R.togdown,null,null),Oh.setHysteresis(0),de=x("canvas"),de.height=2*zg,Ph=de.getContext("2d"),sc.appendChild(de),a?J.insertBefore(sc,Eb):J.appendChild(sc),c=f.toggle_onoff,Bg=null,null!=c&&(Bg=c.split(",")),Qh=!0,null!=g&&(sc.title=g));if("overlay"==t||D(t,"menu")){0==mb&&(O=[]);m=f.overlay_tooltip;c=null;null!=m&&(c=m.split(","));m=f.overlay_radio;M=null;null!=m&&(M=m.split(","));var ba=f.overlay_menu_links;G=null;null!=ba&&(G=ba.split(","));var Ga=f.overlay_labels_color;ba=
null;null!=Ga&&(ba=Ga.split(","));var xa=f.overlay_smoothing;Ga=null;null!=xa&&(Ga=xa.split(","));Cg=[];var X=xa=Ud=!1;D(t,"menu")&&(Ud=!0,0<t.indexOf("/on")&&(xa=!0),0<t.indexOf("/always")&&(X=!0));0==mb&&(uf=[]);var u=f.overlay_caching;t=null;null==u&&(u=f.overlay_static);null!=u&&(t=u.split(","));var Fa=!0;null!=f.overlay_nonewdiv&&(Fa=!1);mb++;for(u=0;u<Uc.length;u++){var K=Uc[u].trim();Cg[u]=oe;null!=Ga&&(D(Ga[u],"t")||D(Ga[u],"y")?Cg[u]=!0:Cg[u]=!1);if(0==u||0==K.indexOf("/")){0==K.indexOf("/")&&
(K=K.substr(1));if(Ud){Wb[mb]=x("div");Wb[mb].dropalways=X;var Ka="menu"+mb+"_labels_style";Wb[mb].setAttribute("style","text-align:left;display:block;position:absolute;border-style:solid;border-width:2px;background:#ffffff;z-index:99;visibility:"+(xa||X?"visible":"hidden")+";"+(void 0==f[Ka]?f.overlay_labels_style:f[Ka]));Rh++}else Fa?(Jc=x("div"),Rh++,Jc.align="center",a?J.insertBefore(Jc,Eb):J.appendChild(Jc)):(Jc=x("span"),P.appendChild(Jc));B=f.overlay_labels_style;Ud||null==B||Jc.setAttribute("style",
B)}if(null==G||null!=G&&G[u]==mb){Ka=!1;-1!=K.indexOf("<a href=")&&(Ka=!0);var db=!1,ma=!1,Wa=!1,Ma=!1;B=K.length;Ka||(0<K.indexOf("/on")&&K.indexOf("/on")==B-3&&(db=!0),0<K.indexOf("/always")&&K.indexOf("/always")==B-7&&(ma=db=!0),0<K.indexOf("/hidden")&&(Wa=!0),0<K.indexOf("/hotspots")&&(Ma=!0),-1!=K.indexOf("/")&&(K=K.substr(0,K.indexOf("/"))));null!=t?D(t[u],"y")||D(t[u],"t")?uf[u]=!0:uf[u]=!1:uf[u]=!0;O[u]=x("input");O[u].type="checkbox";O[u].value=K;O[u].id=vf+K;O[u].showMe=!(ma&Wa)&!Ma;var ob=
"vertical-align:middle;";B=f.checkbox_style;null!=B&&(ob+=B);O[u].setAttribute("style",ob);O[u].checked=db;O[u].restorableState=db;O[u].name=0;O[u].hotspotIndex=Ma;null!=lb&&u==ic&&O[u].checked&&(lb.disabled=!1);null!=yc&&!yc[u]&&db&&(rd=!1);O[u].addEventListener("click",R.overClick,!1);null!=m&&(B=M[u].indexOf("/"),-1!=B&&(O[u].name=M[u].substr(B+1).trim()),D(M[u],"t")&&(O[u].type="radio",-1==B&&(O[u].name="all")));O[u].isGhost=!0;ma||Wa||(null!=c&&(O[u].title=c[u]),ma=x("label"),ma.htmlFor=vf+K,
null!=c&&(ma.title=c[u]),ma.innerHTML=K,ma.name=O[u].name,K="vertical-align:middle;",null!=ba&&(K=K+"color:"+ba[u]+";"),ma.setAttribute("style",K),K=x("span"),Ka||K.appendChild(O[u]),K.appendChild(ma),Ud?(K.setAttribute("style","display:block;margin-right:5px;"),Wb[mb].appendChild(K)):(Ka="10",null!=ag&&(Ka=10+ag[u]),K.setAttribute("style","margin-left:"+Ka+"px;"),Jc.appendChild(K)),O[u].isGhost=!1)}}Ud&&(ee[mb]=x("button"),va(ee[mb],"menu"+mb,"Show Overlay Menu","Hide Menu",g,"menu off"),ee[mb].menuInx=
mb,ee[mb].addEventListener("click",function(p){if("hidden"===Wb[this.menuInx].style.visibility){for(p=1;p<Wb.length;p++)Wb[p].dropalways||"visible"!=Wb[p].style.visibility||(Wb[ee[p].menuInx].style.visibility="hidden",W(ee[p],!0,"menu off"));Wb[this.menuInx].style.visibility="visible";W(this,!1,"menu on")}else Wb[this.menuInx].style.visibility="hidden",W(this,!0,"menu off")},!1),Wb[mb].dropalways||P.appendChild(ee[mb]),J.insertBefore(Wb[mb],Eb));if(null==Wc)for(Wc=Array(Uc.length),u=0;u<Uc.length;u++)Wc[u]=
0;else for(u=0;u<Uc.length;u++)null!=O[u]&&vc(u)}}Xa=!0;rg=null;sg=!1;B=f.start_looping;null!=B&&(c=B.split(","),D(c[0],"f")&&(Xa=!1),1<c.length&&(dc=parseInt(c[1],10)-1,sg=!0,isNaN(dc)&&(dc=0),H=dc),2<c.length&&(D(c[2],"t")&&(rg=!0),D(c[2],"f")&&(rg=!1)));U(Xa)}function vc(b){var a;if(0>Wc[b]){var d=!1;for(a=0;a<Uc.length;a++)Wc[a]!=-Wc[b]||d||(d=O[a].checked);O[b].checked=d}}function Mc(b){0==Sb&&(Tb=[]);b=b.substr(b.indexOf("=")+1).trim().split(",");var a=b[4].trim(),d=b[4].indexOf("/"),c=b[4].indexOf("?"),
e=-1,k=-1;-1!=d&&(e=parseInt(b[4].substring(d+1),10)-1,a=a.substring(0,d));-1!=c&&(k=parseInt(b[4].substring(c+1),10)-1,c<d||-1==d)&&(a=a.substring(0,c));Tb[Sb]=new $b(parseInt(b[0].trim(),10),parseInt(b[1].trim(),10),b[2].trim(),b[3].trim(),a.toLowerCase(),b[5].trim().toLowerCase(),b[6].trim(),e,k,8<=b.length?b[7].trim():null,9==b.length?b[8].trim():null);Sb+=1}function Ze(b){0==pg&&(Hb=[],Za=null);var a=b.substr(b.indexOf("=")+1).trim().split("(");b=a[0].split(",");var d=b[0].trim();0==d.indexOf("0x")&&
(d="#"+d.substring(2));Hb[pg]=new nd(d,b[1].trim(),b[2].trim(),b[3].trim(),a[1].trim());pg+=1}function ub(b){0==oc&&(wb=[]);b=b.substr(b.indexOf("=")+1).trim().split(",");wb[oc]=new Nc(parseInt(b[0],10)-1,parseInt(b[1],16),b[2].trim(),b[3].trim(),5==b.length?b[4].trim():"Click for details");oc+=1}function nd(b,a,d,c,e){this.color=b;this.alpha=1;7<this.color.length&&(this.alpha=parseInt(this.color.substring(7),16)/255,this.color=this.color.substring(0,7),.1>this.alpha&&(this.alpha=.1));this.action=
a;this.value=d;this.tip=c;this.poly=e;b=e.split(",");this.xy=[];this.ymin=this.xmin=9999;for(a=this.ymax=this.xmax=0;a<b.length;a++)this.xy[a]=parseInt(b[a].trim(),10),0==a%2?(this.xy[a]<this.xmin&&(this.xmin=this.xy[a]),this.xy[a]>this.xmax&&(this.xmax=this.xy[a])):(this.xy[a]<this.ymin&&(this.ymin=this.xy[a]),this.xy[a]>this.ymax&&(this.ymax=this.xy[a]));this.height=this.ymax-this.ymin+1;this.width=this.xmax-this.xmin+1;this.can=x("canvas");this.can.height=this.height;this.can.width=this.width;
this.ctx=this.can.getContext("2d");this.ctx.imageSmoothingEnabled=!1;this.ctx.fillStyle=this.color;this.ctx.globalAlpha=this.alpha;this.ctx.beginPath();this.ctx.moveTo(this.xy[0]-this.xmin,this.xy[1]-this.ymin);for(a=2;a<this.xy.length;a+=2)this.ctx.lineTo(this.xy[a]-this.xmin,this.xy[a+1]-this.ymin);this.ctx.closePath();this.ctx.fill()}function Nc(b,a,d,c,e){this.overlay=b;this.color=a;this.action=d;this.value=c;this.tip=e}function $b(b,a,d,c,e,k,l,g,t,B,m){this.x0=b;this.y0=a;this.icon=null;this.isIcon=
!1;if("icon"==d)this.icon=new Image,this.icon.hotspot=this,Sh=!0,this.icon.onload=function(q){this.gotit=!0;this.hotspot.x1=this.hotspot.x0+this.width;this.hotspot.y1=this.hotspot.y0+this.height;this.hotspot.width=this.width;this.hotspot.height=this.height;this.hotspot.w2=this.width/2;this.hotspot.h2=this.height/2;this.hotspot.isIcon=!0;this.hotspot.origX=0;this.hotspot.origY=0},this.y1=this.x1=-1,this.zoomme=this.fromfile=this.anim=!1,this.icon.gotit=!1,this.icon.src=c.trim();else if("sprite"==d||
"spritefn"===d){this.x0=b;this.y0=a;this.inx=parseInt(c,10)-1;Hf=!1;vi?null!=Na&&(-1!=Sd?this.inx>=Sd&&this.inx<=Sd+Na.length&&(Hf=!0):"spritefn"===d&&(Hf=!0)):Hf=!0;if(Hf){-1!=Sd&&(this.inx-=Sd);if(this.inx>=Na.length)return null;this.x1=Na[this.inx].width+b;this.y1=Na[this.inx].height+a;this.width=Na[this.inx].width;this.height=Na[this.inx].height;this.w2=this.width/2;this.h2=this.height/2;this.origY=this.origX=0;this.icon=Na[this.inx].cloneNode();this.anim=Na[this.inx].anim;this.fromfile=Na[this.inx].fromfile;
this.zoomme=Na[this.inx].zoomme;this.anim&&(this.icon.setAttribute("style","position:absolute;top:0px;left:0px;visibility:hidden;"),wd.appendChild(this.icon))}else this.x1=Sc[this.inx]+b,this.y1=Tc[this.inx]+a,this.width=Sc[this.inx],this.height=Tc[this.inx],this.w2=Sc[this.inx]/2,this.h2=Tc[this.inx]/2,this.origX=ch[this.inx],this.origY=dh[this.inx],this.icon=bh,this.zoomme=this.fromfile=this.anim=!1;Sh=this.isIcon=!0;this.icon.gotit=!0}else this.width=parseInt(d,10),this.height=parseInt(c,10),this.w2=
this.width/2,this.h2=this.height/2,ah&&(this.x0=b-this.w2,this.y0=a-this.h2),this.x1=this.width+this.x0,this.y1=this.height+this.y0;this.pan=e;this.isPan=!1;"pan"===this.pan&&(this.isPan=!0);this.action=k;this.value=l;this.overlay=g;this.frame=t;this.tip=B;this.target=m}function Oc(){if(Oe&&!ye){Ca=-1;for(var b=0;b<Va.length;b++)ca>=Va[b]&&(Ca=b)}}function ec(){null!=ad?pb=ad.toLatLon(Ha-Ee,Ia-De):null!=wh?(pb[0]=wh+(Uj-wh)*(Ia-De)/Vd,pb[1]=xh+(yh-xh)*(Ha-Ee)/Ce):(pb[0]=Math.round(Ha-Ee),pb[1]=Math.round(Ia-
De))}function je(b,a){"popup"==b.action?(null!=Th&&Th.close(),Th=window.open("","HAniSPopup","scrollbars=yes,width="+Wi+",height="+Vi),Th.document.write(Ui+b.value+"</div>")):"link"==b.action?(a=b.value,ec(),a=a.replace("%LATITUDE%",pb[0].toFixed(4)),a=a.replace("%LONGITUDE%",pb[1].toFixed(4)),a=a.replace("%FRAMENUMBER%",H+1),a=a.replace("%FRAMENUMBERINDEX%",fh[H]),window.open(a,b.target?b.target:"_blank","")):"fof"==b.action&&(Ea=Mi,R.resetZoom(0),R.newFOF(b.value,!0),w(a))}function Ed(){if(!Kd){var b=
Ri?ve/ca:0;sa+b<ve&&(sa=ve-b);b=Si?we/ca:0;sa+eb-b>Oa-we&&(sa=Oa-eb+b-we);b=Qi?ue/ea:0;ta+b<ue&&(ta=ue-b);b=Pi?te/ea:0;ta+fb-b>Pa-te&&(ta=Pa-fb-te+b);ta=Math.round(ta);sa=Math.round(sa)}}function $e(b){var a=!1;b?ye?(Ca--,0>Ca?a=!0:(ca=Va[Ca],ea=Va[Ca])):(ca-=.1*xe/Y,ea-=.1*xe/Z):ye?(Ca++,Ca>=Va.length?(Ca--,rh&&(a=!0)):(ca=Va[Ca],ea=Va[Ca])):(!rh||ca!==Md&&ea!==Md||(a=!0),ca+=.1*xe/Y,ea+=.1*xe/Z,ca>Md&&(ca=Md),ea>Md&&(ea=Md));a||ca<=qg||ea<=Dg?(ca=qg,ea=Dg,Ca=-1,Ha=S,Ia=Q,ta=sa=0,fb=Pa,eb=Oa,ve=
we=ue=te=0,zd&&(Ib=!0)):(te=nh,ue=oh,we=qh,ve=ph,sa=Ha-S/ca,ta=Ia-Q/ea,fb=Math.floor(Pa/ea),eb=Math.floor(Oa/ca),Ed(),zd&&(Ib=!1));Oc();void 0!=Pe&&Pe(["zoom",ca,ea,Ha,Ia,S,Q,sa,ta,eb,fb])}function Pc(){Eg=0;Kc=Array(2);tc=Array(2);Qe=Array(2);Jb=0;re=null;Sa(La(0))}function U(b){ib=!b;R.toggleIsLooping()}function af(b,a,d,c,e,k,l,g){Be.height=e;Be.width=c;pf.clearRect(0,0,c,e);pf.imageSmoothingEnabled=oe;z.imageSmoothingEnabled=oe;pf.drawImage(b,a,d,c,e,0,0,c,e);xj=pf.getImageData(0,0,c,e);fe=xj.data;
Uh=Pb[g];Vh=Qb[g];Wh=Rb[g];Xh=mf[g];ck=4*c*e;for(hd=0;hd<ck;hd+=4)Xb=fe[hd],Xb===fe[hd+1]&&Xb===fe[hd+2]&&(fe[hd]=Uh[Xb],fe[hd+1]=Vh[Xb],fe[hd+2]=Wh[Xb],fe[hd+3]=Xh[Xb]);pf.putImageData(xj,0,0);z.drawImage(Be,k,l,ha,da)}function W(b,a,d){null!=b&&(a?(null!=b.style_on&&b.setAttribute("style",b.style_on),b.innerHTML=b.label_on):(null!=b.style_off&&b.setAttribute("style",b.style_off),b.innerHTML=b.label_off),bc&&(b.className=d))}function rb(b,a){if(!(b>=y)&&(-2==zb[b]&&(a=-2),zb[b]=a,Ch&&1==a&&(sb.value=
b+1,Af.innerHTML=xg.replace("*",b+1)),Qh)){b=yj+b*(Ne+Ag);var d=vj;0==a?d=uj:-1==a?d=tj:-2==a&&(d=yi);Ph.fillStyle=d;Ph.fillRect(b,zg/2,Ne,zg)}}function Nf(b,a){Qh&&(de.width=wj?parseInt(J.style.width,10):ha,Ph.clearRect(0,0,de.width,de.height),yj=de.width/2-b*(Ne+Ag)/2);for(var d=0;d<b;d++)a?-1!=gf?rb(d,-2):null!=Bg&&"n"==Bg[d].toLowerCase().trim()?rb(d,-1):rb(d,0):rb(d,zb[d])}function Sa(b){rb(H,0);H=b;rb(H,1);null!=Bb&&null!=Vb&&null!=Vb[H]&&(Bb.innerHTML=Vb[H]);void 0!=Fg&&Fg(H)}function La(b){b>=
y&&(b=y-1);if(0<=zb[b])return b;var a=-1,d=b;0==d&&(a=1);for(var c=0;c<y-1;c++)if(d+=a,0<=zb[d])return d;return b}function fc(b){rb(H,0);var a=b;do 0<a?(a=La(y-1),H+=1,H>a&&(If&&ib?(H=a,b=-b,qc&&U(!1)):qc?(H=a,U(!1)):H=La(0))):(a=La(0),--H,H<a&&(If&&ib?(H=a,b=-b,qc&&U(!1)):qc?(H=a,U(!1)):H=La(y-1))),a=b;while(0>zb[H]);qc=Gg;void 0!=Fg&&Fg(H);xf=a;rb(H,1);null!=Bb&&null!=Vb&&null!=Vb[H]&&(Bb.innerHTML=Vb[H])}function ac(b,a,d,c,e,k,l){this.bg=b;null!=b&&0==this.bg.indexOf("0x")&&(this.bg="#"+this.bg.substring(2));
this.fg=a;null!=a&&0==this.fg.indexOf("0x")&&(this.fg="#"+this.fg.substring(2));this.font=d;this.fontHeight=Math.round(1.1*parseInt(d,10));this.scolor=c;null!=c&&0==this.scolor.indexOf("0x")&&(this.scolor="#"+this.scolor.substring(2));this.sblur=e;this.sxoff=k;this.syoff=l}function Db(b,a,d,c,e){r.globalAlpha=1;r.font=b.font;var k=b.fontHeight;d=d-k-6;var l=r.measureText(c).width;1==e&&(a-=l);0==e&&(a-=l/2);5>a&&(a=5);5>d&&(d=5);d+k+3>da&&(d=da-k-6);a+3+l>ha&&(a=ha-l-6);r.save();r.beginPath();r.fillStyle=
b.bg;null!=b.scolor&&(r.shadowColor=b.scolor,r.shadowBlur=b.sblur,r.shadowOffsetX=b.sxoff,r.shadowOffsetY=b.syoff);Hg=a-3;Yh=d;zj=l+6;Zh=k+6;r.fillRect(Hg,Yh,zj,Zh);r.closePath();r.restore();r.textBaseline="bottom";r.fillStyle=b.fg;r.fillText(c,a,d+k+3)}function wa(){r.clearRect(0,0,ha,da);$h=!1;if(Cb){r.beginPath();r.lineWidth=2;r.strokeStyle="white";var b=Jb;1<b&&(b=2);for(var a=0;a<b;a++)1<Jb&&(r.moveTo(Kc[0]/Y,tc[0]/Z),r.lineTo(Kc[1]/Y,tc[1]/Z)),r.moveTo(Kc[a]/Y-15,tc[a]/Z),r.lineTo(Kc[a]/Y+15,
tc[a]/Z),r.moveTo(Kc[a]/Y,tc[a]/Z-15),r.lineTo(Kc[a]/Y,tc[a]/Z+15);r.closePath();r.stroke();if(3==Jb){var d=pa,c=na;r.moveTo(d,c);r.fillStyle=td;r.fillRect(d-2,c-2,5,5);b=Re;a=Math.round(d+Ig/Y*Jf*(Re-Qe[1]));for(var e=Math.round(c+Kf/Z*Jf*(Re-Qe[1])),k=0;300>k;k++){r.beginPath();r.lineWidth=1;r.strokeStyle=td;r.moveTo(d,c);r.lineTo(a,e);r.stroke();r.beginPath();r.lineWidth=3;r.rect(a-2,e-2,5,5);r.stroke();if(3>a||a+3>ha||3>e||e+3>da)break;c=bd+b;c=100*Math.floor(c/60)+c%60;c%=2400;Hi?(d="AM",1200<=
c?(1300<=c&&(c-=1200),d="PM"):100>c&&(c+=1200),d=Math.floor(c/100)+":"+Math.floor(Math.floor(c%100)/10)+Math.floor(c%10)+" "+d):(d=c+" ",1E3>c&&(d="0"+c),100>c&&(d="00"+c),10>c&&(d="000"+c));c=0;Math.abs(ai)<qe+5&&(c=45*Lc);var l=e;0>Aj*ai&&0==c&&(l=e+qe);r.font=jf;d=d+" "+Gi;var g=r.measureText(d).width;r.fillStyle=hf;0===c?(r.fillRect(a+2,l-qe-2+c,g+4,qe+3),r.fillStyle=td,r.textBaseline="bottom",r.fillText(d,a+5,l)):(r.save(),r.translate(a+5,e),r.rotate(c),r.fillRect(2,-2,g+4,qe+3),r.fillStyle=
td,r.textBaseline="bottom",r.fillText(d,5,qe),r.restore());d=a;c=e;a=Math.round(d+Jf*Aj);e=Math.round(c+Jf*ai);b+=Da}}null!=re&&Db(jh,dk,ek,re,0);zf&&(Db(Pj,9999,aj,$i[Eg],0),Bj=Hg,Cj=Yh,Dj=Yh+Zh)}if(rc){Ub=!1;zf&&(0==Je?Db(kj,9999,10,gg[0],0):(Db(Zj,10,10,gg[1],0),fk=Hg+zj,Db(kj,9999,10,gg[2],0)),gk=Hg,hk=Zh);r.beginPath();r.lineWidth=2;r.strokeStyle=bj;for(b=0;b<Ya.length;b+=2)0==b?r.moveTo(Ya[b]/Y,Ya[b+1]/Z):r.lineTo(Ya[b]/Y,Ya[b+1]/Z);hg&4<Ya.length&&r.lineTo(Ya[0]/Y,Ya[1]/Z);r.stroke();for(b=
0;b<Ya.length;b+=2)r.beginPath(),r.rect(Ya[b]/Y-2,Ya[b+1]/Z-2,5,5),r.stroke()}if(Hc)for(Ub=!1,b=0;b<L.length;b++){d=L[b].type;r.beginPath();r.strokeStyle=L[b].color;r.lineWidth=L[b].width;if("0"==d||"6"==d)a=Math.atan2(L[b].xe-L[b].x,L[b].ye-L[b].y),e=L[b].x+L[b].width*Math.sin(a),k=L[b].y+L[b].width*Math.cos(a),r.beginPath(),r.moveTo(e,k),r.lineTo(L[b].xe,L[b].ye),"0"==d&&(d=12+L[b].width/5,c=30*Lc,r.moveTo(e+d*Math.sin(a-c),k+d*Math.cos(a-c)),r.lineTo(e,k),r.lineTo(e+d*Math.sin(a+c),k+d*Math.cos(a+
c)));else if("1"==d)r.arc(L[b].x,L[b].y,L[b].size,0,2*Math.PI);else if("2"==d)r.rect(L[b].x-L[b].size,L[b].y-L[b].size,2*L[b].size,2*L[b].size);else if("3"==d){r.moveTo(L[b].xp[0],L[b].yp[0]);for(e=1;e<L[b].xp.length;e++)r.lineTo(L[b].xp[e],L[b].yp[e]);r.lineTo(L[b].xp[0],L[b].yp[0])}else if("4"==d)for(r.moveTo(L[b].xp[0],L[b].yp[0]),e=1;e<L[b].xp.length;e++)r.lineTo(L[b].xp[e],L[b].yp[e]);else"5"==d&&(r.fillStyle=L[b].color,r.font=L[b].width+"pt arial",a=r.measureText(L[b].text).width,r.fillText(L[b].text,
L[b].x-a/2,L[b].y+L[b].width/2));r.stroke()}Ub&&(pa=Ja.getX(),S=pa*Y,Ha=sa+S/ca,na=Ja.getY(),Q=na*Z,Ia=ta+Q/ea,r.beginPath(),r.strokeStyle=pi,r.lineWidth=3,r.moveTo(bi/Y,ci/Z),r.lineTo(Jg/Y,Kg/Z),r.stroke(),r.closePath(),Se&&(ec(),Ej=pb[0],Fj=pb[1]),me?(ge=Lc*Te[0],he=Lc*Ej,Lf=Lc*Te[1],Mf=Lc*Fj,di=Math.pow(Math.sin((he-ge)/2),2)+Math.cos(ge)*Math.cos(he)*Math.pow(Math.sin((Mf-Lf)/2),2),di=12742.02*Vf*Math.asin(Math.min(1,Math.sqrt(di))),b=" "+di.toFixed(Xg)+" "+ne+" ",df&&(a=D(df,"t")?(Math.atan2(Math.sin(Mf-
Lf)*Math.cos(he),Math.cos(ge)*Math.sin(he)-Math.sin(ge)*Math.cos(he)*Math.cos(Mf-Lf))/Lc+360)%360:(Math.atan2(Math.sin(Lf-Mf)*Math.cos(ge),Math.cos(he)*Math.sin(ge)-Math.sin(he)*Math.cos(ge)*Math.cos(Lf-Mf))/Lc+360)%360,b=b+" ("+a.toFixed(0)+"\u00b0)")):(a=Fd*(Te[0]-Ej),e=Tf*(Te[1]-Fj),b=" "+Math.sqrt(a*a+e*e).toFixed(Xg)+" "+ne+" ",df&&(a=Math.atan2(-a,e)/Lc,0>a&&(a+=360),D(df,"f")&&(a+=180),360<a&&(a-=360),b=b+" ("+a.toFixed(0)+"\u00b0)")),Db(Nj,Jg/Y+10,Kg/Z,b,-1));Dc&&Db(Li,Gj,Hj,Ij,-1);if(Rc||
He||Zf)if(pa=Ja.getX(),S=pa*Y,na=Ja.getY(),Q=na*Z,0<=S&&0<=Q){Ha=sa+S/ca;Ia=ta+Q/ea;if(He){ec();b=pb[1];me&&180<b&&(b-=360);me&&360<b&&(b-=360);ik=Qf+pb[0].toFixed(Rg)+"  "+Rf+b.toFixed(Rg);b=na;if(Ub||Dc)b=na+oi.fontHeight+6;Db(oi,pa+10,b,ik,-1)}if(Zf)for(r.fillStyle=ti,b=0;b<Sb;b++)if(a=Tb[b],a.isPan){if(Ha>=a.x0&&Ha<=a.x1&&Ia>=a.y0&&Ia<=a.y1){(-1===a.overlay||O[a.overlay].checked)&&r.fillRect((a.x0-sa)*ca,(a.y0-ta)*ea,a.width*ca,a.height*ea);break}}else if(S>a.x0&&S<a.x1&&Q>a.y0&&Q<a.y1){(-1===
a.overlay||O[a.overlay].checked)&&r.fillRect(a.x0,a.y0,a.width,a.height);break}if(Rc&&Pd&&Yd)if(Ha=Math.round(Ha),Ia=Math.round(Ia),a=Ha-Ee,e=Ia-De,Zg)Kb.clearRect(0,0,1,1),Kb.drawImage(xb[H],a,e,1,1,0,0,1,1),za=Kb.getImageData(0,0,1,1).data,ua=0,bf(!1);else for(d=-1,k=ya-1;0<=k;k--)if(b=null!=Vc?Vc[k]:k,ka[H][b].gotit&&O[b].checked&&(null!=Ob&&Ob[b]&&-1==d&&(d=b),b==ic||null!=qd[b]&&0<=qd[b]))if(!Yg||-1==d||pa<ja[d][0][4]||pa>ja[d][0][6]||na<ja[d][0][5]||na>ja[d][0][7]){Kb.clearRect(0,0,1,1);b==
ic?Kb.drawImage(dd[H],a,e,1,1,0,0,1,1):Kb.drawImage(ka[H][b],a,e,1,1,0,0,1,1);za=Kb.getImageData(0,0,1,1).data;ua=qd[b];null!=ua&&bf(b==ic||ej);break}}!Ib||Cb||gc||Rc||null==Za||(r.drawImage(Za.can,0,0,Za.width,Za.height,Za.xmin/Y,Za.ymin/Z,Za.width/Y,Za.height/Z),Db(Li,(Za.xmin+Za.xmax)/2/Y,(Za.ymin+Za.ymax)/2/Z,Za.tip,0),$h=!0)}function bf(b){Lg=999;id=qi;var a=nc[ua].length-1;if(0==za[3])id=kg[ua];else{if(ri)jd=za[0];else if(b)ei=0,jd=za[0],Lg=0;else for(var d=0;d<a;d++)kd[0]=za[0]-Pb[ua][d],0>
kd[0]*(Pb[ua][d+1]-za[0]-1)||(kd[1]=za[1]-Qb[ua][d],0>kd[1]*(Qb[ua][d+1]-za[1]-1)||(kd[2]=za[2]-Rb[ua][d],0>kd[2]*(Rb[ua][d+1]-za[2]-1)||(Ue=vh[ua][d],ld=kd[Ue]/Td[ua][d][Ue],Jj=Math.abs(kd[Kj[Ue]]-ld*Td[ua][d][Kj[Ue]])+Math.abs(kd[Lj[Ue]]-ld*Td[ua][d][Lj[Ue]]),Jj<Lg&&(jd=d,Lg=Jj,ei=ld))));if(999>Lg)id=Rd[ua][jd],-1!=$c[ua][jd]&&(fi=nc[ua][jd],0!=ei&&(fi+=ei*(nc[ua][jd+1]-nc[ua][jd])),id=void 0==fi?"hide":id+" "+fi.toFixed($c[ua][jd])+" "+Qd[ua][jd]);else if(b||0<ef){var c=-1;if(b)c=za[0];else for(d=
0;d<a;d++)if(Math.abs(za[0]-Pb[ua][d])<ef&&Math.abs(za[1]-Qb[ua][d])<ef&&Math.abs(za[2]-Rb[ua][d])<ef){c=d;break}-1!=c&&(id=Rd[ua][c],-1!=$c[ua][c]&&(id=id+" "+nc[ua][c].toFixed($c[ua][c])+" "+Qd[ua][c]))}}"hide"!=id&&Db(Oj,pa-10,na,id,1)}function ia(){gi=sa-Ee;0>gi?(Ve=0,We=-gi*ha/eb):(Ve=gi,We=0);hi=ta-De;0>hi?(Xe=0,Ye=-hi*da/fb):(Xe=hi,Ye=0);if(Yd)try{z.clearRect(0,0,ha,da);z.globalAlpha=1;if(!Ti)if(Oe&&null!=ed&&0<=Ca&&ed[Ca].gotit)z.drawImage(ed[Ca],sa*Va[Ca],ta*Va[Ca],eb*Va[Ca],fb*Va[Ca],0,
0,ha,da);else if(xb[H].gotit&&(null!=eh?af(xb[H],Ve,Xe,eb,fb,We,Ye,eh):z.drawImage(xb[H],Ve,Xe,eb,fb,We,Ye,ha,da)),null!=vb&&(z.globalAlpha=1,xb[H].gotit))for(var b=0;b<vb.length;b+=4)z.drawImage(xb[H],vb[b],vb[b+1],vb[b+2],vb[b+3],vb[b]/Y,vb[b+1]/Z,vb[b+2]/Y,vb[b+3]/Z);if(0<ya){for(b=0;b<ya;b++){var a=null!=Vc?Vc[b]:b;z.imageSmoothingEnabled=Cg[a];if(!gh[a]&&O[a].checked&&O[a].showMe)if(null!=bg&&(z.globalAlpha=bg[a]),Oe&&0<=Ca&&null!=hb&&void 0!=hb[a]&&hb[a][Ca][H].gotit)z.drawImage(hb[a][Ca][H],
sa*Va[Ca],ta*Va[Ca],eb*Va[Ca],fb*Va[Ca],0,0,ha,da);else if(ka[H][a].gotit)if(wc||od){cb=0==kb?da/2:0>kb?da+kb:kb;z.save();wc?(z.beginPath(),z.strokeStyle="#00000000",z.lineWidth=1,z.rect(Aa,0,ha-Aa,da),z.closePath(),z.clip()):(ld=1-Aa/ha,1<ld&&(ld=1),0>ld&&(ld=0),z.globalAlpha=ld);z.drawImage(ka[H][a],Ve,Xe,eb,fb,We,Ye,ha,da);z.restore();z.beginPath();z.strokeStyle=Ug;z.fillStyle=Ug;z.lineWidth=Vg;wc&&(z.moveTo(Aa,0),z.lineTo(Aa,da));if(0==xc)z.rect(Aa-Qc/2,cb-Fb/2,Qc,Fb);else if(1==xc)z.moveTo(Aa,
cb-Fb/2),z.lineTo(Aa+Qc/2,cb),z.lineTo(Aa,cb+Fb/2),z.lineTo(Aa-Qc/2,cb),z.lineTo(Aa,cb-Fb/2);else if(2==xc){var d=2*Vg+2;z.moveTo(Aa+d,cb-Fb/2);z.lineTo(Aa+Qc/2,cb);z.lineTo(Aa+d,cb+Fb/2);z.lineTo(Aa+d,cb-Fb/2);z.moveTo(Aa-d,cb-Fb/2);z.lineTo(Aa-Qc/2,cb);z.lineTo(Aa-d,cb+Fb/2);z.lineTo(Aa-d,cb-Fb/2)}else 3==xc&&z.ellipse(Aa,cb,Qc,Fb,0,0,2*Math.PI);z.closePath();z.stroke();Wg&&z.fill()}else null==sd||1===sd[a]?null!=Id&&0<=Id[a]?af(ka[H][a],Ve,Xe,eb,fb,We,Ye,Id[a]):z.drawImage(ka[H][a],Ve,Xe,eb,fb,
We,Ye,ha,da):null!=sd&&0===sd[a]&&z.drawImage(ka[H][a],0,0,Oa,Pa,0,0,ha,da)}if(null!=Ob)for(z.globalAlpha=1,b=0;b<ya;b++)if(a=null!=Vc?Vc[b]:b,ka[H][a].gotit&&(Fi[a]||O[a].checked)&&Ob[a])for(d=0;d<ja[a].length;d++)z.drawImage(null!=ka[H][a].origImage?ka[H][a].origImage:ka[H][a],ja[a][d][0],ja[a][d][1],ja[a][d][2],ja[a][d][3],ja[a][d][4]/Y,ja[a][d][5]/Z,ja[a][d][2]/Y,ja[a][d][3]/Z)}Rc&&wa();jj&&v();if(Sh)for(z.globalAlpha=1,a=0;a<Sb;a++)if(null!=Tb[a]){var c=Tb[a];null!=c.icon&&(c.icon.style.visibility=
"hidden");if((-1==c.frame||c.frame==H)&&null!=c.icon&&c.icon.gotit&&(-1==c.overlay||-1!=c.overlay&&O[c.overlay].checked)){if(c.isPan){c.zoomme&&(c.icon.style.width=Math.round(c.width*ca)+"px",c.icon.style.height=Math.round(c.height*ea)+"px",c.w2=Math.round(c.width*ca/2),c.h2=Math.round(c.height*ea/2));var e=Math.round(((c.x0-sa)*ca-c.w2)/Y);var k=Math.round(((c.y0-ta)*ea-c.h2)/Z);if(c.anim){if(0>=e+c.icon.width||e>=Oa||0>=k+c.icon.height||k>=Pa)continue;c.icon.style.top=k+"px";c.icon.style.left=e+
"px"}else z.drawImage(c.icon,c.origX,c.origY,c.width,c.height,e,k,c.width/Y,c.height/Z)}else z.drawImage(c.icon,c.origX,c.origY,c.width,c.height,c.x0/Y,c.y0/Z,c.width/Y,c.height/Z);c.icon.style.visibility="visible"}}Mg&&(Ng.addFrame(z,{copy:!0,delay:ii}),H==La(y-1)&&(Mg=!1,U(Xa),Ng.render()))}catch(l){fa("Error:"+l)}}function bb(b,a,d){!fg||d>=a||(z.save(),z.fillStyle="blue",z.strokeStyle="white",z.lineWidth=3,z.strokeRect(lg,mg,200,18),z.fillRect(lg,mg,d/a*200,18),a=z.measureText(b).width,z.fillStyle=
"orange",z.font="14px arial",z.fillText(b,lg+100-a/2,mg+14),z.restore())}function v(){fg&&cd>yb?bb("Loading Images",cd,yb):(jj=!1,Qg&&(cc.style.visibility="hidden"));yb>=cd&&(ib||Sa(La(H)),null!=le&&(lb.value=le,R.doEnhance(null),le=null),void 0!=ng&&ng(!0),null!=pc&&(pc.disabled=!1),null!=Cc&&(Cc.disabled=!1),sg&&ia())}function fa(b){if(Of&&Pg&&!Pg.closed)try{Pg.document.write(b+"<br>")}catch(a){}}function Yj(){0!=Gd?(ii=Gd,Gd=0):(ib&&fc(xf),ii=H==La(y-1)?si+nb:nb);ia();setTimeout(function(){qk(Yj)},
ii)}function Og(b){for(;-180>b;)b+=360;for(;180<b;)b-=360;return b}function ok(){var b,a,d,c,e,k,l,g,t=Math.PI/180;this.init=function(B){for(var m=[],q=1;q<B.length;q++)m[q]=parseFloat(B[q]);a=m[1];b=m[4]/m[5];e=m[6];k=m[7];B=this.toXY(m[2],m[3]);e=B[0];k=B[1]};this.toXY=function(B,m){d=b*Og(m-a)*t-e;c=-b*B*t-k;return[d,c]};this.toLatLon=function(B,m){l=-(m+k)/b/t;g=Og((B+e)/b/t+a);return[l,g]}}function nk(){var b,a,d,c,e,k,l,g,t,B,m,q,M,G,ba,Ga,xa,X,u,Fa,K,Ka,db,ma,Wa,Ma,ob,p,V,F,T,ra=Math.PI/180;
this.init=function(jb){for(var Ba=[],md=1;md<jb.length;md++)Ba[md]=parseFloat(jb[md]);b=Ba[1];a=Ba[2];Fa=0==Ba[8]?!1:!0;K=Ba[6];Ka=K*K;db=Ka*Ka;ma=db*Ka;Wa=db*db;l=Ba[5]/Ba[7];T=Ba[7];Fa?(g=Math.cos(ra*b),t=Math.sin(ra*b)):(g=Math.cos(-b*ra),t=Math.sin(-b*ra));xa=g/Math.sqrt(1-Ka*t*t);u=(1-K*t)/(1+K*t);Ga=Fa?Math.tan(Math.PI/4-b*ra/2)/Math.pow(u,K/2):Math.tan(Math.PI/4- -b*ra/2)/Math.pow(u,K/2);G=Ba[9];ba=Ba[10];jb=this.toXY(Ba[3],Ba[4]);G=jb[0];ba=jb[1]};this.toXY=function(jb,Ba){Fa?(e=ra*jb,k=ra*
(Ba-a)):(e=ra*-jb,k=ra*(a-Ba));u=(1-K*Math.sin(e))/(1+K*Math.sin(e));X=Math.tan(Math.PI/4-e/2)/Math.pow(u,K/2);Ma=90!=b&&-90!=b?l*xa*X/Ga:2*l*T*X/Math.sqrt(Math.pow(1+K,1+K)*Math.pow(1-K,1-K));d=Ma*Math.sin(k);c=Ma*Math.cos(k);Fa||(d=-d,c=-c);B=d-G;m=c-ba;return[B,m]};this.toLatLon=function(jb,Ba){d=jb+G;c=Ba+ba;Ma=Math.sqrt(d*d+c*c);X=90==b||-90==b?Ma*Math.sqrt(Math.pow(1+K,1+K)*Math.pow(1-K,1-K))/(2*l*T):Ma*Ga/(l*xa);ob=Math.PI/2-2*Math.atan(X);p=Math.sin(2*ob);V=Math.sin(4*ob);F=Math.sin(6*ob);
e=ob+p*Ka/2+5*p*db/24+p*ma/12+13*p*Wa/360+7*V*db/48+29*V*ma/240+811*V*Wa/11520+7*F*ma/120+81*F*Wa/1120+4279*Math.sin(8*ob)*Wa/161280;Fa?(q=e/ra,M=Math.atan2(d,c)/ra+a):(q=-e/ra,M=-Math.atan2(-d,-c)/ra+a);return[q,Og(M)]}}function pk(){var b,a,d,c,e,k,l,g,t,B,m,q,M,G,ba,Ga,xa,X,u,Fa,K,Ka,db,ma,Wa,Ma,ob,p,V,F,T,ra,jb,Ba,md,ie=Math.PI/180;this.init=function(Cd){for(var Lb=[],ji=1;ji<Cd.length;ji++)Lb[ji]=parseFloat(Cd[ji]);b=Lb[1];a=Lb[2];d=Lb[3];ma=Lb[7];Wa=ma*ma;Ma=Wa*Wa;ob=Ma*Wa;p=Ma*Ma;g=Lb[6]/Lb[8];
t=Math.cos(ie*b);B=Math.cos(ie*a);q=Math.sin(b*ie);m=Math.sin(a*ie);K=t/Math.sqrt(1-Wa*q*q);Ka=B/Math.sqrt(1-Wa*m*m);u=Math.sqrt((1-q)/(1+q)*Math.pow((1+ma*q)/(1-ma*q),ma));Fa=Math.sqrt((1-m)/(1+m)*Math.pow((1+ma*m)/(1-ma*m),ma));T=(Math.log(K)-Math.log(Ka))/(Math.log(u)-Math.log(Fa));ra=K/(T*Math.pow(u,T));Ba=g*ra*Math.pow(u,T);xa=Lb[9];X=Lb[10];Cd=this.toXY(Lb[4],Lb[5]);xa=Cd[0];X=Cd[1]};this.toXY=function(Cd,Lb){k=ie*Cd;l=ie*Og(Lb-d);md=Math.sin(k);db=Math.sqrt((1-md)/(1+md)*Math.pow((1+ma*md)/
(1-ma*md),ma));F=g*ra*Math.pow(db,T);jb=T*l;c=F*Math.sin(jb);e=Ba+F*Math.cos(jb);M=c-xa;G=e-X;return[M,G]};this.toLatLon=function(Cd,Lb){c=Cd+xa;e=Lb+X;F=Math.abs(T)/T*Math.sqrt(c*c+(Ba-e)*(Ba-e));db=Math.pow(F/(g*ra),1/T);V=Math.PI/2-2*Math.atan(db);jb=0>T?Math.atan(-c/(e-Ba)):Math.atan(c/(Ba-e));l=jb/T;k=V+(Wa/2+5/24*Ma+ob/12+13/360*p)*Math.sin(2*V)+(7/48*Ma+29/240*ob+811/11520*p)*Math.sin(6*V)+(7/120*ob+81/1120*p)*Math.sin(6*V)+4279/161280*p*Math.sin(8*V);ba=k/ie;Ga=Og(d-l/ie);return[ba,Ga]}}var R=
this,xi,da,ha,Pa,Oa,Vd,Ce,Y,Z,Ee,De,cj,dj,Ec,Fc,cc,Qg,Ja,Of,Th,Pg,Ad,ki,Kd,J,P,tg,ug,Eb,vf,wd,qf,jk,kk,hc,z,Kb,pd,r,of,Fh,gi,hi,Ve,Xe,We,Ye,Ld,kh,dg,ij,lh,xd,y,gb,Xi,Wb,Ud,mb,ee,ya,gh,Uc,Vc,oa,yd,Wc,se,Ea,Mi,xb,ka,Bf,wc,Le,Aa,Qc,Fb,Ug,Vg,xc,Cf,zc,od,Me,Wg,kb,cb,Ah,Vj,fj,wi,O,bg,uf,Dc,Ij,Gj,Hj,pe,Ac,hh,qa,zi,nf,Bh,pa,na,S,Q,Ha,Ia,eb,fb,sa,ta,zf,bc,dc,sg,Xj,ib,Xa,rg,H,Fg,xf,If,Pe,vd,Ae=!0,$f,vg,Ih,Hh,Sf,Pf,f,nb,Xc,Nd,Ke,ng,sh,si,Gd,Yf,ii,oe,ui,Cg,lb,Fe,Jd,ic,le,Gb,dd,Wd,tf,Dh,og,eh,Be,pf,xj,fe,Xb,Uh,
Vh,Wh,Xh,ck,hd,Id,zb,Ne,zg,Ag,wj,sc,yj,Oh,li,tj,uj,vj,gf,yi,Tb,Sb,Sh,mh,Zf,ah,ti,uh,Na,Sd,Hf,gj,oc,wb,za,mi,Hb,pg,Ib,zd,Eh,sf,Za,$h,yc,rd,Va,Ca,ed,Xd,hb,Ab,Oe,Vb,Bb,Dd,Qh,Bg,de,Ph,Yd,ke,Bc,mc,lc,Gc,Zc,Yc,ag,pc,Mg,Ng,Cc,ze,$d,rc,Je,gg,th,hg,jg,bj,Ya,Zj,kj,gk,fk,hk,fd,Cb,Jb,Kc,tc,Qe,Bj,$i,Cj,Dj,aj,Pj,kc,Jf,Ig,Kf,Mj,Lc,lf,zh,Aj,ai,Re,Da,Eg,bd,cg,Gi,td,hf,jf,qe,Hi,Ii,bk,Mh,Nh,Lh,sj,Kh,Df,L,Jh,pj,gd,rj,qj,Ra,Hc,ce,Ef,be,ae,yg,ak,Gf,Ff,Bd,Ic,mj,nj,Ua,Oi,Ni,xe,ca,ea,qg,Dg,Zi,ud,kf,Yi,eg,Ta,Md,ye,Se,rh,Ai=
!1,Bi,Ci,Di,ih,Ei,qc,Gg,wg,lj,wf,yf,sb,xg,Af,Ch,Qa,gc,bi,ci,Xg,Uf,me,Hg,Yh,zj,Zh,hj=!0,rf,ni,Jg,Kg,Nj,pi,Tg,tb,Sg,Wf,Zd,Ej,Fj,Ub,Fd,Tf,ne,df,ge,he,Lf,Mf,di,Vf,Li,fh,Ge,He,Rg,Qf,Rf,oi,ad,pb,Te,ik,wh,xh,Uj,yh,vb,Jc,Rh,sd,Ob,ja,Fi,Gh,ig,Od,Ui,Wi,Vi,qd,Rc,Ie,Xf,Yg,Pd,Qd,Rd,$c,Ue,Lg,Oj,qi,ef,ri,Zg,jh,Ji,Ki,re,dk,ek,jd,ei,ld,Kj,Lj,kd,ua,Jj,id,fi,nc,N,Td,ej,Pb,Qb,Rb,mf,vh,kg,lk,ff,$g,Hd,fg,bh,ch,dh,Sc,Tc,vi,jj,lg,mg,yb,cd,te,Ti,nh,ue,oh,ve,ph,Pi,Qi,Si,Ri,we,qh,cf,jc,rk="N NNE NE ENE E ESE SE SSE S SSW SW WSW W WNW NW NNW N".split(" "),
qk=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(b){setTimeout(b,10)},x=function(b){return document.createElement(b)},D=function(b,a){return null==b?!1:0==b.trim().toLowerCase().indexOf(a)},Wj=function(b,a){if(null!=b)return b=b.trim(),b.lastIndexOf(a)===b.length-1},Tj=function(b){void 0==ki&&(ki=x("textarea"));ki.innerHTML=b;return ki.value},oj=function(b,a,d){var c=x("select");c.style.width="70px";c.style.margin=
"5px";for(var e=0;e<b.length;e++){var k=x("option");k.innerHTML=b[e];k.value=a[e];c.add(k)}c.addEventListener("change",d,!1);return c},Sj=function(b){b=b.split(",");oa=Array(y);for(var a=0;a<b.length;a++){var d=b[a].split("&");ya=b.length;for(var c=0;c<y;c++)0===a&&(oa[c]=Array(ya)),oa[c][a]=d[1==d.length?0:c].trim(),null!=jc?oa[c][a]=(jc+oa[c][a]).trim():null!=Ea&&(oa[c][a]=(Ea+oa[c][a]).trim())}ke=!1},Qj=function(b){b=b.split(",");y=b.length;gb=Array(y);for(var a=0;a<y;a++)gb[a]=null!=Ea?Ea+b[a].trim():
b[a].trim();ke=!1;y>ya&&(ya=0)},Rj=function(b,a,d){var c=b;null!=Ea&&(c=Ea+b);gb=Array(y);for(var e=0;e<y;e++){b=e*d+a;if(0<=c.indexOf("*"))gb[e]=c.replace("*",b);else if(0<=c.indexOf("?")){for(var k=c;0<=k.lastIndexOf("?");){var l=k.lastIndexOf("?");k=k.substring(0,l)+b%10+k.substring(l+1);b=Math.floor(b/10)}gb[e]=k}else gb[e]=c+e;fa("image filename = "+gb[e])}D(f.reverse_order,"t")&&gb.reverse();ke=!1;y>ya&&(ya=0)};HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,
"toBlob",{value:function(b,a,d){d=window.atob(this.toDataURL(a,d).split(",")[1]);for(var c=d.length,e=new Uint8Array(c),k=0;k<c;k++)e[k]=d.charCodeAt(k);b(new Blob([e],{type:a||"image/png"}))}});this.setup=function(b,a,d,c){void 0==a&&(a="MORdivcan");if("string"==typeof a)vf=a,J=document.getElementById(a);else{J=a;if("DIV"!=J.nodeName){console.log("Invalid value for HAniS div element...");return}vf=""==J.id?("MORdivcan"+Math.round(1E7*Math.random())).trim():J.id}rf=d;void 0!=rf&&"function"!=typeof rf&&
(rf=null);ni=void 0!=c?c.split("\n"):null;cf="center";J.align=cf;Eb=x("div");Eb.setAttribute("style","position:relative;border:0px;margin:0px;padding:0px;-webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none; -webkit-tap-heightlight-color:transparent;");hc=x("canvas");hc.setAttribute("style","position:absolute;top:0;left:0;z-index:1;");z=hc.getContext("2d");pd=x("canvas");pd.setAttribute("style","position:absolute;top:0;left:0;z-index:12;");r=pd.getContext("2d");
r.imageSmoothingEnabled=!1;of=x("canvas");of.setAttribute("style","position:absolute;top:0;left:0;z-index:10;");Fh=of.getContext("2d");Fh.imageSmoothingEnabled=!1;wd=x("div");wd.setAttribute("style","position:absolute;top:0;left:0;z-index:5;overflow:hidden;border-width:0px;padding:0px;margin:0px;");qf=x("div");qf.setAttribute("style","position:absolute;top:0;left:0;z-index:10;overflow:hidden;border-width:0px;padding:0px;margin:0px;");qf.appendChild(of);Be=x("canvas");Eb.appendChild(qf);Eb.appendChild(hc);
Eb.appendChild(pd);Eb.appendChild(wd);J.appendChild(Eb);Ja=new PEvs(Eb,R.down,R.up,R.move,R.drag,null,R.canTip);J.setAttribute("tabindex",0);J.addEventListener("keyup",function(e){Hc||Pf||(Hh=Ih=vg=!1,Sf&&(e.preventDefault(),e.stopPropagation()))},!1);J.addEventListener("keypress",function(e){Hc||Pf||!Sf||(e.preventDefault(),e.stopPropagation())},!1);J.addEventListener("keydown",function(e){Hc||Pf||(Sf&&(e.preventDefault(),e.stopPropagation()),vg=e.ctrlKey?!0:!1,Ih=e.shiftKey?!0:!1,Hh=e.altKey?!0:
!1,37==e.keyCode?(U(!1),fc(-1),ia()):39==e.keyCode?(U(!1),fc(1),ia()):32==e.keyCode?R.toggleIsLooping():82==e.keyCode&&e.altKey?R.resetZoom(0):67==e.keyCode&&e.altKey&&R.doCapture())},!1);J.addEventListener("mouseenter",function(e){J.focus({preventScroll:!0})},!1);J.style.outlineWidth="0px";J.style.outline="none";Lc=.01745329252;dc=H=0;od=Me=wc=Le=If=sg=!1;Fb=Qc=30;kb=0;Wg=!1;Ug="white";Vg=1;xc=2;xf=1;Gg=qc=!1;Xa=ib=!0;Mg=!1;Sb=ya=y=0;ah=Zf=!1;$f=!0;Vc=null;Wb=[];Ud=!1;mb=0;ee=[];vd=!0;nb=500;Xc=
100;Nd=2E3;sh=30;Yf=Gd=si=0;$g=6E4;Hd=null;Ld=ff=!1;dg=!0;xd=[];se=jc=Ea=null;Ah=!1;Va=Mi=null;Oe=!1;Ca=-1;ye=!1;Dg=qg=ea=ca=1;Se=!1;ta=sa=fb=eb=Ia=Ha=Q=S=na=pa=0;Zi=!1;Ae=hj=!0;Qh=Qg=Kd=!1;gf=li=-1;zb=[];oc=0;Sh=!1;Na=null;Sd=-1;uh=0;Hf=!1;Bb=null;mg=lg=yb=cd=0;ej=!1;ua=0;Yd=!1;wi="?";Dc=lh=mh=!1;bi=ci=Jg=Kg=0;Zd=Ub=gc=!1;tb=[];tb.push("default");tb.push("default");Sg="default";He=!1;Wf="default";ad=null;pb=[0,0];Te=[0,0];Ib=Ch=Uf=!1;rd=!0;Za=yc=null;rc=$h=!1;hg=!0;Tg="default";zf=!0;Ya=[];Rc=Zg=
!1;Yg=!0;Xf="default";Pd=!1;Kj=[1,0,0];Lj=[2,2,1];kd=[];qd=[];Jd=Fe=Cb=!1;cg=Eg=0;Jc=ug=tg=P=sc=null;Rh=0;Sf=!0;Hc=Pf=Ih=Hh=vg=!1;ze=27;a=x("canvas");a.height=1;a.width=1;Kb=a.getContext("2d");Kb.imageSmoothingEnabled=!1;Eh=x("canvas");Of=!1;"string"===typeof b?0>b.indexOf("\n")?$a(b):h(b.split("\n")):h(b)};this.newBasenames=function(b,a,d,c){Yd=!1;Xa=ib;U(!1);y=c;Rj(b,a,d);vd=!0;Nb()};this.newFilenames=function(b){Yd=!1;Xa=ib;U(!1);Qj(b);vd=!0;Nb()};this.newOverlayFilenames=function(b){Yd=!1;Xa=
ib;U(!1);Sj(b);vd=!0;Nb()};this.newProbeTable=function(b){Pd=!1;I(b.trim())};this.reloadFOF=function(){fa("reload FoF = "+Hd);w("r");ke?mk(lk,!1):(null==rg?Xa=!0:(Xa=ib,ib=!1,Gd=Yf),vd=!0,Nb())};this.getFOF=function(){var b=f.file_of_filenames.trim();R.newFOF(null!=se?se+b:b,!0)};this.newFOF=function(b,a){R.resetZoom(0);mk(b,a)};var mk=function(b,a){var d,c,e,k,l=new XMLHttpRequest,g,t,B,m,q,M,G,ba=null,Ga=!1;gj=oc;Yd=!1;Xa=ib;U(!1);a&&Sa(dc);oc=y=0;gb=[];qa=Hb=null;Ah=!1;Bh=[];for(nf=null;wd.hasChildNodes();)wd.removeChild(wd.lastChild);
pg=0;Oe=Ib=zd=!1;hb=Xd=ed=null;Ab=[];Dd=-1;oa=[];var xa=!1;if(null==kc||null!=lf)kc=[];fa("new FOF="+b);Cb&&(null!=fd&&(W(fd,!0,"extrap on"),J.style.cursor="default",U(Xa),Jb=-1),Cb=!1,wa());rc&&(null!=$d&&(W($d,!0,"mark on"),J.style.cursor="default",U(Xa),Je=-1),rc=!1,wa());l.onload=function(){var X=this.responseText.split("\n");for(d=0;d<X.length;d++)if(g=X[d].trim(),!(2>g.length)&&(fa("FOF: "+g),0!=g.indexOf("#")))if(0==g.indexOf("frame_labels"))q=g.split("="),Vb=q[1].split(",");else if(0==g.indexOf("redirect"))for(q=
g.split("="),G=q[1].split(","),nf=G[0].trim(),c=1;c<G.length;c++){var u=parseInt(G[c],10)-1;Bh[u]=!0}else if(0==g.indexOf("framenumber_index_values"))q=g.split("="),fh=q[1].split(",");else if(0==g.indexOf("slice")){q=g.split("=");G=q[1].split(",");qa=[];for(c=0;c<G.length;c++)qa[c]=parseInt(G[c],10);qa[2]=qa[2]-qa[0]+1;qa[3]=qa[3]-qa[1]+1;4<qa.length&&(qa[6]=qa[6]-qa[4]+1,qa[7]=qa[7]-qa[5]+1)}else if(0==g.indexOf("fof_extension"))q=g.split("="),ba=q[1].trim();else if(0==g.indexOf("probe_table"))q=
g.split("="),Pd=!1,I(q[1].trim());else if(0==g.indexOf("image_base"))q=g.split("="),Ea=q[1].trim();else if(0==g.indexOf("overlay_base"))q=g.split("="),jc=q[1].trim();else if(0==g.indexOf("high_res_basemap")){q=g.split("=");G=q[1].split(",");Xd=[];for(c=0;c<G.length;c++)Xd[c]=G[c].trim(),null!=Ea&&(Xd[c]=Ea+Xd[c]);Oe=!0}else if(0==g.indexOf("high_res_overlay"))for(q=g.split("="),M=q[1].split("&"),e=0;e<M.length;e++){G=M[e].split(",");Dd=parseInt(G[0].trim(),10)-1;Ab[Dd]=[];for(c=1;c<G.length;c++)Ab[Dd][c-
1]=G[c].trim(),Wj(Ab[Dd][c-1],"/")||(null!=jc?Ab[Dd][c-1]=jc+Ab[Dd][c-1]:null!=Ea&&(Ab[Dd][c-1]=Ea+Ab[Dd][c-1]));Oe=!0}else if(0==g.indexOf("high_res_zoom")){q=g.split("=");G=q[1].split(",");Va=[];for(c=0;c<G.length;c++)Va[c]=parseFloat(G[c].trim());Oc()}else if(0==g.indexOf("hoverzone"))Ze(g);else if(0==g.indexOf("hotzone"))ub(g);else if(0==g.indexOf("hotspot"))Ga||(Tb=null,Sb=0,Ga=!0),Mc(g);else if(0==g.indexOf("toggle_onoff"))q=g.split("="),Bg=q[1].split(",");else if(0==g.indexOf("coordinates"))q=
g.split("="),C(q[1]);else if(0==g.indexOf("fof_substitute"))u=g.indexOf("="),G=g.substring(u+1).split(","),Ah=!0,fj=G[0].trim(),Vj=G[1].trim();else if(0==g.indexOf("map_scale"))q=g.split("="),G=q[1].split(","),Fd=parseFloat(G[0]),Tf=1<G.length?parseFloat(G[1]):Fd;else if(0==g.indexOf("times")){q=g.split("=");G=q[1].split(",");for(d=0;d<G.length;d++)kc[d]=parseInt(G[d].trim(),10);xa=!0}else{null!=lf&&(u=g.match(lf),null!=u&&2==u.length?(kc.push(parseInt(u[1],10)),fa("+ + + Extrap time = "+u[1]),xa=
!0):fa("+ + + Cannot parse times using "+lf+" from line: "+g));e=g.indexOf(" ");0>e&&(e=g.length);gb[y]=g.substring(0,e).trim();null!=Ea&&(gb[y]=Ea+gb[y]);g=g.substring(e+1);u=g.indexOf('"');0<=u&&(null==Vb&&(Vb=[]),e=g.substring(u+1),u=e.indexOf('"'),0<=u&&(Vb[y]=e.substring(0,u),0==y&&(Bb.innerHTML=Vb[0])));oa[y]=[];u=g.indexOf("overlay");if(0<=u)for(t=g.substring(u),u=t.indexOf("="),0>u&&fa("Cannot find a = sign in "+t),B=t.substring(u+1),t=B.trim(),B=t.split(","),ya=Math.max(ya,B.length),fa("numOverlays set to "+
ya),k=0;k<B.length;k++)oa[y][k]=B[k].trim(),null!=nf&&Bh[k]?oa[y][k]=(nf+oa[y][k]).trim():null!=jc?oa[y][k]=(jc+oa[y][k]).trim():null!=Ea&&(oa[y][k]=(Ea+oa[y][k]).trim());y+=1}xa&&E(kc);null!=ba?(X=new XMLHttpRequest,X.onload=function(){var Fa=this.responseText.split("\n");for(d=0;d<Fa.length;d++)2>Fa[d].length||(m=Fa[d].trim(),fa("ext_FOF: "+m),0!=m.indexOf("#")&&(0==m.indexOf("hotzone")?ub(m):0==m.indexOf("hotspot")&&Mc(m)));la()},X.onerror=function(){la()},X.open("get",ba+"?"+Math.round(1E5*Math.random()),
!0),X.send()):la()};lk=b;l.open("get",b+"?"+Math.round(1E5*Math.random()),!0);l.send()};this.setWindowSize=function(b,a){if(null!=J){J.style.height=a+"px";J.style.width=b+"px";J.style.padding="0px";jk=a=a-(null!=tg?tg.offsetHeight:0)-(null!=ug?ug.offsetHeight:0)-(null!=sc?sc.offsetHeight:0)-Rh*(null!=Jc?Jc.offsetHeight:0);kk=b;var d=a*Oa/Pa;d>b&&(d=b,a=b*Pa/Oa);a=Math.floor(a);d=Math.floor(d);Ae||(Kd?uc(kk,jk):uc(d,a),wa())}};this.drag=function(b){rc||(Se=!0,pa=Ja.getX(),na=Ja.getY(),Le||Me?(Aa=Ja.getX(),
void 0!=zc&&zc(Aa/ha),ia()):(Hc?(b=L.length-1,L[b].xe=pa,L[b].ye=na,L[b].xp.push(pa),L[b].yp.push(na),L[b].size=Math.round(Math.sqrt(Math.pow(pa-L[b].x,2)+Math.pow(na-L[b].y,2)))):(S=pa*Y,Q=na*Z,Ub=Dc=!1,gc&&(!Uf||Uf&&b.shiftKey)?(Jg=S,Kg=Q,Ub=!0):(Ta&&ea!=Dg?(sa=Ha-S/ca,ta=Ia-Q/ea,Ed(),Ha=Math.round(sa+S/ca),Ia=Math.round(ta+Q/ea),void 0!=Pe&&Pe(["drag",ca,ea,Ha,Ia,S,Q,sa,ta,eb,fb])):rc||Cb||!Ib||(Za=null,rd&&0<=S&&0<=Q&&(za=sf.getImageData(S,Q,1,1).data,0!=za[3]&&(Za=Hb[za[3]-1]))),Se=!0,ia())),
wa()))};this.doCapture=function(){var b=x("canvas");b.height=hc.height;b.width=hc.width;var a=b.getContext("2d");zf=!1;wa();a.drawImage(hc,0,0);a.drawImage(pd,0,0);zf=!0;var d=Kh;if(null!=sj&&(d=window.prompt(sj,d),null==d))return;b.toBlob(function(c){var e=URL.createObjectURL(c),k=document.createElement("a");k.href=e;k.download=d;k.click();setTimeout(function(){URL.revokeObjectURL(c)},3E4)})};this.resetZoom=function(b){ca=qg;ea=Dg;Ca=-1;null!=Ua&&(W(Ua,!0,"zoom on"),Ta=!1);Ha=S;Ia=Q;ta=sa=0;fb=Pa;
eb=Oa;Oc();ia();zd&&(Ib=!0);void 0!=Pe&&0==b&&Pe(["reset",0,0])};this.canTip=function(){var b;Dc=!1;pa=Ja.getX();S=pa*Y;na=Ja.getY();Q=na*Z;if(!((rc||Cb)&&Q<Dj&&Q>Cj&&S>Bj)){Ha=Math.round(sa+S/ca);Ia=Math.round(ta+Q/ea);if(0!=oc)for(b=0;b<oc;b++)if(wb[b].overlay>=ya)fa(" Error...hotzone overlay # "+wb[b].overlay+" > number of overlays = "+ya);else if(O[wb[b].overlay].checked&&(Kb.clearRect(0,0,1,1),Kb.drawImage(ka[H][wb[b].overlay],Ha,Ia,1,1,0,0,1,1),za=Kb.getImageData(0,0,1,1).data,mi=(za[0]<<16)+
(za[1]<<8)+za[2],mi==wb[b].color)){Dc=!0;Gj=pa;Hj=na;Ij=wb[b].tip;break}if(0!=Sb)for(b=Sb-1;0<=b;b--)if(null!=Tb[b]){var a=Tb[b];if(-1==a.frame||a.frame==H)if(-1==a.overlay||O[a.overlay].checked){var d=!1;if(a.isPan)if(a.isIcon){var c=(a.x0-sa)*ca-a.w2;var e=(a.y0-ta)*ea-a.h2;S>c&&S<c+a.width&&Q>e&&Q<e+a.height&&(d=!0)}else c=(a.x0-sa)*ca,e=(a.y0-ta)*ea,S>c&&S<c+a.width*ca&&Q>e&&Q<e+a.height*ea&&(d=!0);else S>a.x0&&S<a.x1&&Q>a.y0&&Q<a.y1&&(d=!0);if(d&&null!=a.tip){Dc=!0;Gj=pa;Hj=na;Ij=Tb[b].tip;break}}}wa()}};
this.move=function(){if(!Cb&&Ib&&(Za=null,rd)){var b=Ja.getX()*Y,a=Ja.getY()*Z;0<=b&&0<=a&&(za=sf.getImageData(b,a,1,1).data,0!=za[3]&&(Za=Hb[za[3]-1]))}Cb&&2<=Jb&&(pa=Ja.getX(),S=pa*Y,na=Ja.getY(),Q=na*Z);wa()};this.down=function(){if(!cc||"visible"!=cc.style.visibility){Dc&&(Dc=!1,wa());pa=Ja.getX();S=pa*Y;na=Ja.getY();Q=na*Z;if(od||wc)if(cb=0==kb?da/2:0>kb?da+kb:kb,Math.abs(pa-Aa)<Qc/2&&Math.abs(na-cb)<Fb/2){wc&&(Le=!0);od&&(Me=!0);return}bi=S;ci=Q;Jg=bi;Kg=ci;Ha=Math.round(sa+S/ca);Ia=Math.round(ta+
Q/ea);gc&&(ec(),Te[0]=pb[0],Te[1]=pb[1]);Se=!1;if(Hc){var b={};b.x=pa;b.y=na;b.xe=pa;b.ye=na;b.xp=[pa];b.yp=[na];b.type=Gf.value;b.color=Ff.value;b.width=Bd.value;b.text=Ic.value;b.size=0;L.push(b)}}};this.up=function(b){if(!cc||"visible"!=cc.style.visibility)if(Dc=!1,!Hc)if(Le)Le=!1;else if(Me)Me=!1;else{if(Cb||rc){pa=Ja.getX();S=pa*Y;na=Ja.getY();Q=na*Z;if(rc){Je=1;if(0<Je&&Q/Z<hk){if(S/Y>gk){Ya.pop();Ya.pop();0==Ya.length&&(Je=0);wa();return}if(S/Y<fk){wa();b=window.open("","Mark Points");b.document.write("<div>Marked Points<br>");
for(var a=[],d=0;d<Ya.length;d+=2)Ha=sa+Ya[d]/ca,Ia=ta+Ya[d+1]/ea,ec(),b.document.write(pb[0].toFixed(4)+","+pb[1].toFixed(4)+"<br>"),0==d&&(a[0]=pb[0],a[1]=pb[1]);hg&&b.document.write(a[0].toFixed(4)+","+a[1].toFixed(4)+"<br>");return}}Ya.push(S);Ya.push(Q);wa();return}if(3>Jb)if(Kc[Jb]=S,tc[Jb]=Q,Qe[Jb]=zh[H],0==Jb)Jb=1,Sa(La(y-1)),Eg=1,re=null;else{Mj=Qe[1]-Qe[0];Ig=(Kc[1]-Kc[0])/Mj;Kf=(tc[1]-tc[0])/Mj;if(null!=jh&&null!=Fd){d=Ig*Fd;var c=Kf*Tf;a=Math.round(60*Math.sqrt(d*d+c*c));d=Math.atan2(d,
-c)/Lc;0>d&&(d+=360);re=Ji+rk[Math.round(d/22.5)]+" at "+a+" "+Ki;dk=Kc[0];ek=0<Kf?tc[0]-15:tc[0]+30}a=parseInt(jf,10);Da=Math.round(Math.abs(4*(a+4)/Ig));Re=Math.round(Math.abs(2*(a+4)/Kf));Re<Da&&(Da=Re);120<Da?Da=120*Math.floor(Da/120)+60:90<Da?Da=120:60<Da?Da=90:30<Da?Da=60:15<Da?Da=30:10<Da?Da=15:5<Da?Da=10:2<Da?Da=5:0==Da&&(Da=1);Re=Qe[1]/Da*Da+Da;Jf=1;Ii&&(Jf=-1);Aj=Ig*Da;ai=Kf*Da;Sa(La(y-1));Jb=3;Eg=2}else if(Q/Z<Dj&&Q/Z>Cj&&S/Y>Bj&&3==Jb){Pc();wa();return}wa()}Ub&&!Zd?(Ub=!1,wa()):null!=
Qa&&Ta&&(gc=!1,W(Qa,!0,"distance on"));if(Se)Se=!1;else if(b.altKey)R.resetZoom(0);else if(Ib&&null!=Za&&$h)je(Za,"z");else{pa=Ja.getX();S=pa*Y;na=Ja.getY();Q=na*Z;if(0!=oc)for(a=0;a<oc;a++)if(wb[a].overlay>=ya)fa(" Error...hotzone overlay # "+wb[a].overlay+" > number of overlays = "+ya);else if(O[wb[a].overlay].checked&&(Kb.clearRect(0,0,1,1),Kb.drawImage(ka[H][wb[a].overlay],Math.floor(Ha),Math.floor(Ia),1,1,0,0,1,1),za=Kb.getImageData(0,0,1,1).data,mi=(za[0]<<16)+(za[1]<<8)+za[2],mi==wb[a].color)){je(wb[a],
"z");return}if(0!=Sb)for(a=Sb-1;0<=a;a--)if(null!=Tb[a]){var e=Tb[a];if(!(-1!=e.frame&&e.frame!=H||e.fromfile||-1!=e.overlay&&!O[e.overlay].checked)){var k=!1;e.isPan?e.isIcon?(d=(e.x0-sa)*ca-e.w2,c=(e.y0-ta)*ea-e.h2,S>d&&S<d+e.width&&Q>c&&Q<c+e.height&&(k=!0)):(d=(e.x0-sa)*ca,c=(e.y0-ta)*ea,S>d&&S<d+e.width*ca&&Q>c&&Q<c+e.height*ea&&(k=!0)):S>e.x0&&S<e.x1&&Q>e.y0&&Q<e.y1&&(k=!0);if(k){je(Tb[a],"s");return}}}Ta&&(Ib=!1,$e(b.ctrlKey||vg||b.which&&3==b.which||b.button&&2==b.button));ia();wa()}}};this.wheel=
function(b){Xi?fc(b):Ta&&(pa=Ja.getX(),S=pa*Y,na=Ja.getY(),Q=na*Z,Ha=Math.round(sa+S/ca),Ia=Math.round(ta+Q/ea),$e(-1==b))};this.toggleAutoRefresh=function(){ff?(W(Od,!1,"autorefresh off"),null!=Hd&&clearInterval(Hd),ff=!1):(W(Od,!0,"autorefresh on"),Hd=setInterval("HAniS.reloadFOF();",$g),ff=!0)};this.toggleLoopRock=function(){If?(W(wf,!0,"looprock rock"),If=!1):(W(wf,!1,"looprock loop"),If=!0)};this.toggleLoopHalt=function(){qc?(W(yf,!0,"loophalt halt"),Gg=qc=!1):(W(yf,!1,"loophalt loop"),Gg=qc=
!0)};this.toggleExtrap=function(){Cb?(null!=fd&&(W(fd,!0,"extrap on"),J.style.cursor=tb.pop(),null!=Bc&&(Bc.disabled=!1),U(Xa),Ta=eg,Jb=-1),Cb=!1,wa()):(null!=fd&&(Cb=!0,re=null,tb.push(J.style.cursor),J.style.cursor="crosshair",W(fd,!1,"extrap off"),Xa=ib,null!=Bc&&(Bc.disabled=!0),ib=!1,eg=Ta,Ta=!1,R.resetZoom(0),Pc(),wa()),ia())};this.doEnhance=function(b){if(Fe||Jd){var a=Gb[0].height,d=Gb[0].width;b=parseInt(lb.value,10);0<=b?(Uh=Pb[b],Vh=Qb[b],Wh=Rb[b],Xh=mf[b],qd[ic]=b):qd[ic]=null;var c=a*
d*4;for(d=0;d<dd.length;d++)if(Gb[d].gotit){Gb[d].gotit=!1;var e=og[d].data;var k=Dh[d];if(0>b)for(a=0;a<c;a+=4)e[a]=k[a],e[a+1]=k[a+1],e[a+2]=k[a+2],e[a+3]=k[a+3];else for(a=0;a<c;a+=4)Xb=k[a],Xb===k[a+1]&&Xb===k[a+2]&&(e[a]=Uh[Xb],e[a+1]=Vh[Xb],e[a+2]=Wh[Xb],e[a+3]=Xh[Xb]);Wd[d].putImageData(og[d],0,0);Gb[d].gotit=!0}}};this.overClick=function(b){var a;if(b.target.checked)for(a=0;a<O.length;a++)b.target!=O[a]&&0!=b.target.name&&b.target.name==O[a].name&&(O[a].checked=!1);rd=!0;for(a=0;a<Wc.length;a++)b.target!=
O[a]&&vc(a),null!=yc&&!yc[a]&&O[a].checked&&(rd=!1),null!=lb&&a===ic&&(lb.disabled=!O[a].checked);ia()};this.toggleIsLooping=function(){ib?(ib=!1,W(Bc,!0,"startstop start")):(ib=!0,W(Bc,!1,"startstop stop"),Gg=qc,qc=!1)};this.toggleSliding=function(){wc?(W(Bf,!0,"slide on"),wc=!1):(W(Bf,!1,"slide off"),null!=Qa&&(gc=!1,W(Qa,!0,"distance on")),zd&&(Ib=!0),Cb&&R.toggleExtrap(),Aa=ha/2,void 0!=zc&&zc(.5),wc=!0);Le=!1;ia()};this.toggleFading=function(){od?(W(Cf,!0,"fade on"),od=!1):(W(Cf,!1,"fade off"),
null!=Qa&&(gc=!1,W(Qa,!0,"distance on")),zd&&(Ib=!0),Cb&&R.toggleExtrap(),Aa=ha/2,void 0!=zc&&zc(.5),od=!0);Me=!1;ia()};this.toggleZooming=function(){Ta?(R.resetZoom(0),W(Ua,!0,"zoom on")):(W(Ua,!1,"zoom off"),Ta=!0,zd&&(Ib=!0),Cb&&R.toggleExtrap());null!=Qa&&(Ub=gc=!1,W(Qa,!0,"distance on"),wa())};this.togup=function(b){li=-1};this.togdown=function(b){var a=Oh.getX();Oh.getY();for(var d=yj,c=0;c<zb.length;c++){if(a>d&&a<d+Ne){if(c==li)break;if(b.shiftKey){0<=zb[c]&&(U(!1),Sa(c));break}a=0;!b.ctrlKey&&
0<=zb[c]&&(a=-1);rb(c,a);li=c;break}d=d+Ne+Ag}};this.makeMP4=function(){var b=Cc.innerHTML;Xa=ib;U(!1);xf=1;Sa(La(dc));Cc.innerHTML="Working";HME.createH264MP4Encoder().then(function(a){var d,c,e,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:a.width=ha,a.height=da,a.frameRate=Math.max(1,Math.round(1E3/nb)),a.quantizationParameter=ze,a.initialize();case 2:return ia(),a.addFrameRgba(z.getImageData(0,0,ha,da).data),g.yield(new Promise(function(t){return window.requestAnimationFrame(t)}),
4);case 4:if(H>=La(y-1)){g.jumpTo(3);break}fc(1);g.jumpTo(2);break;case 3:a.finalize();Cc.innerHTML=b;d=a.FS.readFile(a.outputFilename);c=f.mp4_prompt;e=f.mp4_filename;null==e&&(e="hanimate.mp4");k=e;if(null!=c&&(k=window.prompt(c,k),null==k))return a.delete(),U(Xa),g.return();l=document.createElement("a");l.href=URL.createObjectURL(new Blob([d],{type:"video/mp4"}));l.download=k;l.click();a.delete();U(Xa);g.jumpToEnd()}})})};this.makeAniGIF=function(){if(!Mg){var b=pc.innerHTML;Ng=new GIF({workers:4,
debug:!1,quality:10,width:ha,height:da,repeat:0});Ng.on("finished",function(a){pc.innerHTML=b;var d=f.anigif_prompt,c=f.anigif_filename;null==c&&(c="hanimate.gif");if(null!=d&&(c=window.prompt(d,c),null==c))return;d=document.createElement("a");d.href=URL.createObjectURL(a);d.download=c;d.click();setTimeout(function(){URL.revokeObjectURL(a)},3E4)});Ng.on("progress",function(a){pc.innerHTML=Math.round(100*a)+"%"});Xa=ib;U(!1);xf=1;Mg=!0;Sa(La(dc));ia();U(!0);pc.innerHTML="Loading"}};this.doneLoading=
function(b){ng=b};this.getCustomButton=function(){return jg};this.dwellChanged=function(b){Ke=b};this.getDwell=function(){return nb};this.slidefadeChanged=function(b){zc=b};this.setSlidefade=function(b){Aa=Math.round(ha*b);ia()};this.frameChanged=function(b){Fg=b};this.getFrame=function(){return H};this.showFrame=function(b){Sa(La(b));ia()};this.zoomChanged=function(b){Pe=b};this.showZoom=function(b){"reset"===b[0]?R.resetZoom(1):(ca=b[1],ea=b[2],Ha=b[3],Ia=b[4],S=b[5],Q=b[6],sa=b[7],ta=b[8],eb=b[9],
fb=b[10],Ed(),ia())}};
